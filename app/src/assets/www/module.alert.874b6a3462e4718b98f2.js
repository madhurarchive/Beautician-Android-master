(window.webpackJsonp=window.webpackJsonp||[]).push([[269,3],{"1EZC":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var r=a("VkAN"),n=a.n(r),c=a("ePPS"),o=a("q9fD");function i(){var e=n()(["No tax"]);return i=function(){return e},e}function s(e){return e?"".concat(e.name," (").concat(e.taxRates.map(e=>e.rate).join("%, "),"%)"):Object(c.c)(i())}var l=(e,t)=>({taxRate:e===o.a?null:e,useDefault:e===o.a,location:t})},"4ebE":function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("/MKj"),f=a("nbpM"),g=a("Uvni"),h=a("5ZU+"),E=a("XOD0"),v=a("ePPS"),O=a("/Q2I"),y=a("3wSE"),P=a("8mxr"),S=a("IiP0"),j=a("BUUB"),T=a("1063"),I=a("kZhr");function C(){var e=i()(["Save"]);return C=function(){return e},e}function k(){var e=i()(["Delete"]);return k=function(){return e},e}function R(){var e=i()(["Edit Service Groups"]);return R=function(){return e},e}function N(){var e=i()(["Edit Category"]);return N=function(){return e},e}function x(){var e=i()(["Remove existing services first to be able to delete a group"]);return x=function(){return e},e}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(){var e=i()(["Service Group"]);return M=function(){return e},e}function w(){var e=i()(["Category"]);return w=function(){return e},e}var D=Object(b.b)((e,{match:{params:{id:t}={}}})=>({offerCatalogCategory:f.a.getOfferCatalogCategory(e,t),packagesEnabled:f.a.isPackagesEnabled(e),isReshedulEnabled:f.a.isReshedulEnabled(e)}),{updateCategory:j.j,submitForm:P.e})((c=n=class extends u.PureComponent{constructor(e){super(e),l()(this,"state",{submitting:!1}),l()(this,"goBack",()=>{Object(E.b)(T.z)}),l()(this,"handleSubmit",e=>{var{isReshedulEnabled:t}=this.props;this.setState({submitting:!0});var a=this.props.packagesEnabled?Object(v.c)(w()):Object(v.c)(M()),r=t?L(L({},e),{},{[P.a]:t?e[P.a]:Object(S.d)(e[P.a])}):e;return this.props.updateCategory(this.props.offerCatalogCategory.id,r).then(()=>{h.a.addGlobalSuccessToast(Object(v.c)("%{categoryName} updated",{categoryName:a})),this.goBack()}).catch(e=>{Object(I.ib)(e,{fields:[{code:"name-not-unique",field:"name",message:Object(v.c)("%{categoryName} name should be unique",{categoryName:a})}],globalMessage:Object(v.c)("%{categoryName} couldn't updated, please try again later",{categoryName:a})})}).finally(()=>{this.setState({submitting:!1})})}),l()(this,"handleDelete",()=>{this.props.offerCatalogCategory.items.length>0?h.a.addErrorToast(Object(v.c)(x())):Object(E.c)(T.M(this.props.offerCatalogCategory.id))}),e.offerCatalogCategory||Object(E.b)(T.z)}componentDidUpdate(){this.props.offerCatalogCategory||Object(E.b)(T.z)}render(){var{offerCatalogCategory:e,packagesEnabled:t}=this.props,{submitting:a}=this.state,r=t?Object(v.c)(N()):Object(v.c)(R());return e?d.a.createElement(O.i,{size:"small"},d.a.createElement(O.g,{onClose:this.goBack},r),d.a.createElement(O.c,{noPadding:!0},d.a.createElement(P.d,{onSubmit:this.handleSubmit,initialValues:{[P.c]:e.name,[P.a]:e.appointmentColor,[P.b]:e.description},packagesEnabled:t})),d.a.createElement(O.e,{noPadding:!0},d.a.createElement(y.d,null,d.a.createElement(y.g,{onAction:this.handleDelete,disabled:a,qaType:"delete-button"},Object(v.c)(k())),d.a.createElement(y.f,{onAction:this.props.submitForm,isPending:a,qaType:"save-button"},Object(v.c)(C()))))):null}},l()(n,"propTypes",{offerCatalogCategory:m.a.shape(g.a.propTypes),submitForm:m.a.func,updateCategory:m.a.func,packagesEnabled:m.a.bool,isReshedulEnabled:m.a.bool}),r=c))||r},"8mxr":function(e,t,a){"use strict";a.d(t,"e",(function(){return C})),a.d(t,"c",(function(){return k})),a.d(t,"a",(function(){return R})),a.d(t,"b",(function(){return N})),a.d(t,"d",(function(){return x}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("ePPS"),f=a("ZO1O"),g=a("kZhr"),h=a("dhJQ"),E=a("QBmR"),v=a("IiP0"),O=a("5eCU"),y=a.n(O);function P(){var e=i()(["See your Calendar Settings page under Setup to set how colors\n                  are displayed on the calendar"]);return P=function(){return e},e}function S(){var e=i()(["Appointment color"]);return S=function(){return e},e}function j(){var e=i()(["e.g. Hair Services"]);return j=function(){return e},e}function T(){var e=i()(["Service group"]);return T=function(){return e},e}function I(){var e=i()(["Category"]);return I=function(){return e},e}var C=()=>Object(g.hb)("service-group-modal-form"),k="name",R="appointmentColor",N="description",x=Object(h.g)()(r=Object(g.q)({form:"service-group-modal-form"})((c=n=class extends u.PureComponent{constructor(e){super(e);var{packagesEnabled:t}=e,a=t?Object(b.c)(I()):Object(b.c)(T());this.FIELD_CATEGORY_NAME_LABEL=Object(b.c)("%{categoryName} name",{categoryName:a}),this.FIELD_CATEGORY_DESCRIPTION_LABEL=Object(b.c)("%{categoryName} description",{categoryName:a}),this.validateCategoryName=[g.kb.maxLength(255),g.kb.required(this.FIELD_CATEGORY_NAME_LABEL)],this.validateCategoryDescription=g.kb.maxLength(255)}render(){var{isMatch:e}=this.props;return d.a.createElement(f.d,{type:"plain popup-form"},d.a.createElement(E.s,{label:this.FIELD_CATEGORY_NAME_LABEL,placeholder:Object(b.c)(j()),name:k,validate:this.validateCategoryName,qaType:"category-name-input"}),d.a.createElement(E.e,{label:Object(b.c)(S()),hint:Object(b.c)(P()),name:R,options:v.b,className:y.a.colorSelect}),d.a.createElement(E.s,{rows:e?1:3,multiline:!e||void 0,type:"textarea",label:this.FIELD_CATEGORY_DESCRIPTION_LABEL,name:N,validate:this.validateCategoryDescription}))}},l()(n,"propTypes",{isMatch:m.a.bool.isRequired,packagesEnabled:m.a.bool}),r=c))||r)||r},"9hiP":function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return b}));var r=a("lSNA"),n=a.n(r),c=a("q1tI"),o=a.n(c),i=a("17x9"),s=a.n(i),l=a("TSYQ"),u=a.n(l),d=a("Jje6"),p=a("DZ53"),m=a.n(p),b={GREEN:"green",BLUE:"blue",YELLOW:"yellow",RED:"red"};class f extends c.PureComponent{render(){var{badgeText:e,badgeColor:t,className:a}=this.props;return e&&t?o.a.createElement(d.b,{className:u()(m.a.self,m.a[t],a),as:"span"},e):null}}n()(f,"propTypes",{className:s.a.string,badgeText:s.a.string,badgeColor:s.a.oneOf(Object.values(b)).isRequired});var g=f},BUUB:function(e,t,a){"use strict";a.d(t,"e",(function(){return N})),a.d(t,"i",(function(){return x})),a.d(t,"d",(function(){return A})),a.d(t,"h",(function(){return L})),a.d(t,"g",(function(){return M})),a.d(t,"b",(function(){return w})),a.d(t,"j",(function(){return D})),a.d(t,"a",(function(){return _})),a.d(t,"f",(function(){return F})),a.d(t,"c",(function(){return q}));var r=a("9oTK"),n=a("lSNA"),c=a.n(n),o=a("VkAN"),i=a.n(o),s=a("mwIZ"),l=a.n(s),u=a("5ZU+"),d=a("nbpM"),p=a("HTL0"),m=a("XOD0"),b=a("ePPS"),f=a("1EZC"),g=a("eAqY"),h=a("Xqy3"),E=a("zsI5"),v=a("GaML"),O=a("rzky");var y=a("vMAe"),P=a("1063");function S(){var e=i()(["At least one resource must be selected"]);return S=function(){return e},e}function j(){var e=i()(["At least one staff member must be selected."]);return j=function(){return e},e}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(){var e=i()(["Service created"]);return C=function(){return e},e}function k(){var e=i()(["Service couldn't be updated, please try again later"]);return k=function(){return e},e}function R(){var e=i()(["Service updated"]);return R=function(){return e},e}function N(e){return u.a.createExport({report:h.k,exportFormat:e}).then(e=>e.body.id)}function x(e){return u.a.readExportStatus(e).then(({body:{status:e,url:t}})=>({status:e,url:t}))}function A(e){return u.a.deleteServiceGroup(e).then(()=>(u.a.deleteServiceGroupModel(e),u.a.deleteOfferCatalogCategoryModel(e)))}var L=(e,t)=>u.a.updateService(e,t).then(()=>u.a.readOfferCatalogMenu()).then(()=>{u.a.addGlobalSuccessToast(Object(b.c)(R())),Object(m.c)(P.z)}).catch(e=>{var{status:a,response:r}=e;if(422===a){var n=l()(r,"body.errors");Object(m.c)(P.hb({mode:"edit",serviceId:t.data.id}),{updateRequest:t,errors:n,type:h.a.SERVICE})}else u.a.addGlobalErrorToast(Object(b.c)(k()))});var M=e=>(t,a)=>{var r=a(),n=d.a.isServicesRevampEnabled(r),c=I(I(I(I(I({[O.d.CATEGORY]:e[O.d.CATEGORY],[O.d.NAME]:e[O.d.NAME],[O.d.SUBCATEGORY]:e[O.d.SUBCATEGORY]},e[O.b.ONLINE_BOOKING]),e[O.b.STAFF]),e[O.b.ROOMS]),e[O.b.SETTINGS]),e[O.b.TAXES]);c[O.d.SERVICE_PRICING_LEVELS]=e[O.d.SERVICE_PRICING_LEVELS].map(y.f),c[O.d.ROOMS]=c[O.d.ROOM_REQUIRED]?c[O.d.ROOMS]:[],c[O.d.EXTRA_TIME_TYPE]=c[O.d.EXTRA_TIME_TYPE]||null,n&&(c[O.d.EXTRA_TIME_TYPE]=c[O.d.EXTRA_TIME_ENABLED]?c[O.d.EXTRA_TIME_TYPE]:null),c[O.d.TAX_RATE]=c[O.d.TAX_RATE]||null;var o,i,s=d.a.getExistingLocationList(r),l=c[g.a];if(c[g.a]=1!==s.length?l.map(e=>Object(f.a)(e.taxRate,e.location)):[Object(f.a)(c[O.d.TAX_RATE],d.a.getExistingLocationList(r)[0].id)],d.a.getEmployeeList(r).filter(e=>e.providesServices).length>0){if(0===c[O.d.EMPLOYEES].length)return void u.a.addErrorToast(Object(b.c)(j()));if(c[O.d.ROOM_REQUIRED]&&0===c[O.d.ROOMS].length)return void u.a.addErrorToast(Object(b.c)(S()))}if(e[O.d.MODE]===h.j.ADD){var T=p.a.serviceCreateRequest(c);i=T,o=u.a.createService(i).then(()=>u.a.readOfferCatalogMenu()).then(()=>{u.a.addGlobalSuccessToast(Object(b.c)(C())),Object(m.c)(P.z)}).catch(e=>{throw u.a.addGlobalErrorToast("Service couldn't be created, please try again later"),e})}else if(e[O.d.MODE]===h.j.EDIT){c[O.d.SERVICE_ID]=e[O.d.SERVICE_ID];var k=p.a.serviceUpdateRequest(c);o=L(e[O.d.SERVICE_ID],k).then(e=>(t(Object(E.h)(v.a.jsonApiType)),e))}return o};function w(e){var t=p.a.serviceGroupCreateRequest(e);return u.a.createServiceGroup(t)}function D(e,t){var a=p.a.serviceGroupUpdateRequest(e,t);return u.a.updateServiceGroup(e,a)}var _=e=>{var t=p.a.batchReorderOfferCatalogMenu(e);return u.a.batchReorderOfferCatalogMenu(t).then(()=>u.a.readOfferCatalogMenu())},F=(e,t)=>{var a,n,{destination:c,draggableId:o,type:i}=e;switch(i){case h.e.CATEGORY:return function(e,{sortingId:t}){var a=p.a.serviceGroupSortingUpdateRequest(e,{sortingId:t});return u.a.reorderServiceGroup(e,a)}(o.replace(h.d.CATEGORY,""),t[c.index]);case h.e.MENU_ITEM:var s=t.find(e=>e.id===c.droppableId),l=(a=s.items,n=c.index,0===a.length?0:n>=a.length?a[a.length-1].sortingId+1:a[n].sortingId);return function(e,{sortingId:t,category:a}){var r=p.a.offerCatalogMenuItemSortingUpdateRequest(e,{sortingId:t,category:a});return u.a.reorderOfferCatalogMenuItem(e,r)}(o.replace(h.d.MENU_ITEM,""),{sortingId:l,category:s.id});default:return Object(r.resolve)()}};function q(e,t){return u.a.deleteService(e,t).then(()=>u.a.deleteServiceModel(e))}},DDyp:function(e,t,a){"use strict";a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return v}));var r=a("VkAN"),n=a.n(r),c=a("mwIZ"),o=a.n(c),i=a("5ZU+"),s=a("HTL0"),l=a("XOD0"),u=a("ePPS"),d=a("Xqy3"),p=a("1063");function m(){var e=n()(["Package couldn't be created, please try again later"]);return m=function(){return e},e}function b(){var e=n()(["Package created"]);return b=function(){return e},e}function f(){var e=n()(["Package couldn't be updated, please try again later"]);return f=function(){return e},e}function g(){var e=n()(["Package updated"]);return g=function(){return e},e}function h(e,t){return i.a.updatePackage(e,t).then(()=>i.a.readOfferCatalogMenu()).then(()=>{i.a.addGlobalSuccessToast(Object(u.c)(g())),i.a.softDeletePackageVersion(e),Object(l.c)(p.z)}).catch(e=>{var{status:a,response:r}=e;if(422!==a)throw i.a.addGlobalErrorToast(Object(u.c)(f())),e;var n=o()(r,"body.errors");Object(l.c)(p.gb({mode:"edit",packageId:t.data.id}),{updateRequest:t,errors:n,type:d.a.PACKAGE})})}function E(e,t){return i.a.deletePackage(e,t).then(()=>{i.a.deletePackageModel(e)})}function v(e,{packageId:t,mode:a}){var r,n;if(a===d.j.ADD){var c=s.a.createPackageRequestFromForm(e);n=c,r=i.a.createPackage(n).then(()=>i.a.readOfferCatalogMenu()).then(()=>{i.a.addGlobalSuccessToast(Object(u.c)(b())),Object(l.c)(p.z)}).catch(e=>{throw i.a.addGlobalErrorToast(Object(u.c)(m())),e})}else if(a===d.j.EDIT){r=h(t,s.a.updatePackageRequestFromForm(e,t))}return r}},DPKA:function(e,t,a){"use strict";a.d(t,"a",(function(){return Pn}));var r=a("pVnL"),n=a.n(r),c=a("VkAN"),o=a.n(c),i=a("lSNA"),s=a.n(i),l=a("BkRI"),u=a.n(l),d=a("q1tI"),p=a.n(d),m=a("/MKj"),b=a("17x9"),f=a.n(b),g=a("ePPS"),h=a("nbpM"),E=a("5ZU+"),v=a("XOD0"),O=a("UtX9"),y=a("Xqy3"),P=a("iA5e"),S=a("1063"),j=a("mwIZ"),T=a.n(j),I=a("Ty5D"),C=a("kZhr"),k=a("dhJQ"),R=a("Xz+p"),N=a("1Ggn"),x=a("vMAe"),A=a("eq57"),L=a("QILm"),M=a.n(L),w=a("TSYQ"),D=a.n(w),_=a("Jje6"),F=a("Qs7Y"),q=a("KvEn"),B=a("jwng"),V=a("SUHC"),G=a.n(V);class U extends d.PureComponent{render(){var e=this.props,{retailPrice:t,nonDiscountedPrice:a,totalTimeInSeconds:r,defaultTotalTimeInSeconds:c,className:o,priceType:i}=e,s=M()(e,["retailPrice","nonDiscountedPrice","totalTimeInSeconds","defaultTotalTimeInSeconds","className","priceType"]),l=Object(B.l)(r,"s"),u=Object(B.l)(c,"s"),d=a<t?a:t;return p.a.createElement(_.b,n()({flex:"column",className:D()(G.a.self,o)},s),p.a.createElement(F.d,{className:G.a.actualSummary},Object(g.c)("Total: %{price} (%{packageTime})",{price:p.a.createElement(q.a,{price:d,key:"actual-price",qaType:"package-actual-price",priceType:i}),packageTime:l})),a>t&&p.a.createElement(F.d,{className:G.a.staleSummary},Object(g.c)("%{price} (%{defaultPackageTime})",{price:p.a.createElement(q.a,{price:a,key:"non-discounted-price",qaType:"package-original-price"}),defaultPackageTime:u})))}}s()(U,"propTypes",{className:f.a.string,retailPrice:f.a.number.isRequired,nonDiscountedPrice:f.a.number.isRequired,totalTimeInSeconds:f.a.number,defaultTotalTimeInSeconds:f.a.number,priceType:f.a.oneOf(Object.values(N.a))});var Y,X,z,H=a("NFlB"),Q=a("3wSE"),K=a("/Q2I"),Z=a("SFs4"),J=a("ZO1O"),W=a("DDyp");function $(){var e=o()(["Delete"]);return $=function(){return e},e}function ee(){var e=o()(["Delete Package"]);return ee=function(){return e},e}function te(){var e=o()(["Package couldn't be deleted, please try again later"]);return te=function(){return e},e}function ae(){var e=o()(["Package deleted"]);return ae=function(){return e},e}function re(){var e=o()(["Are you sure you want to delete this package?"]);return re=function(){return e},e}var ne=Object(g.c)(re()),ce=Object(k.g)()((z=X=class extends d.PureComponent{constructor(e){super(e),s()(this,"handleDelete",()=>{var e=Object(P.h)(this.props);return Object(W.a)(e,{confirmResetMarketingCampaigns:this.displayCampaignNote,confirmOfflineLocationProfiles:this.displayOfflineProfilesNote}).then(()=>{E.a.addGlobalSuccessToast(Object(g.c)(ae())),Object(v.f)(S.z)}).catch(()=>{this.handleClose(),E.a.addErrorToast(Object(g.c)(te()))})}),s()(this,"handleClose",()=>{var e=Object(P.h)(this.props);Object(v.b)(S.U({packageId:e,mode:y.j.EDIT}))}),this.affectedMarketingCampaigns=T()(this.props,"location.state.affectedMarketingCampaigns"),this.affectedLocationProfiles=T()(this.props,"location.state.affectedLocationProfiles"),this.packageName=T()(this.props,"location.state.packageName"),this.displayOfflineProfilesNote=this.affectedLocationProfiles.length>0,this.displayCampaignNote=this.affectedMarketingCampaigns>0}render(){var{isMatch:e}=this.props;return p.a.createElement(K.i,{size:"small",qaType:"delete-package-modal"},p.a.createElement(K.g,{onClose:this.handleClose,subheader:e&&ne,noBottomPadding:!0},Object(g.c)(ee())),p.a.createElement(K.c,{onlyBottomPadding:!0},p.a.createElement(p.a.Fragment,null,!e&&p.a.createElement(J.d,{type:"mobile modal noBottomPadding"},p.a.createElement(F.d,{qaType:"delete-package-modal-text"},ne)),this.displayCampaignNote&&p.a.createElement(Z.b,{icon:"light-bulb-yellow",title:Object(g.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:this.affectedMarketingCampaigns})}),this.displayOfflineProfilesNote&&p.a.createElement(H.a,{affectedLocationProfiles:this.affectedLocationProfiles}))),p.a.createElement(K.e,{noPadding:!0},p.a.createElement(K.b,null,p.a.createElement(Q.g,{qaType:"delete-package-confirm-button",onAction:this.handleDelete,withPending:!0},Object(g.c)($())))))}},s()(X,"propTypes",{isMatch:f.a.bool}),Y=z))||Y,oe=a("Du07"),ie=a("9AV2"),se=a("QqEi");function le(e,t,a){var r=Array.from(e),[n]=r.splice(t,1);return r.splice(a,0,n),r}var ue=a("QJc1"),de=a("uopA"),pe=a("i6OX"),me=a("ngQI"),be=a("Vows");class fe extends d.PureComponent{constructor(...e){super(...e),s()(this,"renderPackageItem",(e,t,a)=>{var{onRemovePackageItem:r,openManagePackageItemModal:c,pricingType:o}=this.props,i=a.get(t);return p.a.createElement(me.b,{type:"package-item",draggableId:"package-".concat(t),index:t,key:t},e=>p.a.createElement(_.b,n()({selfRef:e.innerRef},e.draggableProps,e.dragHandleProps),p.a.createElement(be.s,{formIndex:t,onRemovePackageItem:r,openManagePackageItemModal:c,packageItem:i,qaType:"service-package-item",propagateEvents:!0,pricingType:o})))})}render(){var{fields:e,onPackageItemDrop:t}=this.props;return p.a.createElement(me.a,{onDragEnd:t},p.a.createElement(me.c,{droppableId:"package-items"},t=>p.a.createElement(_.b,n()({},t.droppableProps,{selfRef:t.innerRef}),e.map(this.renderPackageItem))))}}function ge(){var e=o()(["Add Service"]);return ge=function(){return e},e}function he(){var e=o()(["You havenâ€™t added any services to your package yet."]);return he=function(){return e},e}function Ee(){var e=o()(["Add another service"]);return Ee=function(){return e},e}s()(fe,"propTypes",{fields:f.a.object,onRemovePackageItem:f.a.func,onPackageItemDrop:f.a.func,openManagePackageItemModal:f.a.func,pricingType:f.a.string});class ve extends d.PureComponent{render(){var{hasPackageItems:e,openSelectServiceModal:t,packageSummary:a,canAddPackageItem:r,fields:n,onRemovePackageItem:c,openManagePackageItemModal:o,onPackageItemDrop:i,pricingType:s}=this.props;return e?p.a.createElement(p.a.Fragment,null,p.a.createElement(fe,{fields:n,onRemovePackageItem:c,openManagePackageItemModal:o,onPackageItemDrop:i,pricingType:s}),p.a.createElement(_.b,{flex:"row",justifyContent:"space-between",paddingTop:24},r&&p.a.createElement(Q.n,{onAction:t,qaType:"add-another-package-btn"},p.a.createElement(pe.b,{name:"plus",size:"small",marginRight:4}),Object(g.c)(Ee())),a)):p.a.createElement(_.b,{flex:"column",grow:1,shrink:0,justifyContent:"center"},p.a.createElement(de.a,{icon:"empty-order",text:Object(g.c)(he())},p.a.createElement(Q.d,null,p.a.createElement(Q.f,{qaType:"package-add-service-btn",onAction:t},Object(g.c)(ge())))))}}function Oe(){var e=o()(["Add services"]);return Oe=function(){return e},e}s()(ve,"propTypes",{hasPackageItems:f.a.bool,canAddPackageItem:f.a.bool,packageSummary:f.a.node,fields:f.a.object,openSelectServiceModal:f.a.func,openManagePackageItemModal:f.a.func,onRemovePackageItem:f.a.func,onPackageItemDrop:f.a.func,pricingType:f.a.string});class ye extends d.PureComponent{render(){var{canAddPackageItem:e,fields:t,openManagePackageItemModal:a,openSelectServiceModal:r,onPackageItemDrop:n,pricingType:c}=this.props;return p.a.createElement(p.a.Fragment,null,p.a.createElement(fe,{fields:t,openManagePackageItemModal:a,onPackageItemDrop:n,pricingType:c}),e&&p.a.createElement(be.b,{onAction:r},Object(g.c)(Oe())))}}s()(ye,"propTypes",{canAddPackageItem:f.a.bool,fields:f.a.object,openSelectServiceModal:f.a.func,openManagePackageItemModal:f.a.func,onPackageItemDrop:f.a.func,pricingType:f.a.string});var Pe,Se,je,Te=a("N1om"),Ie=a.n(Te),Ce=a("sEfC"),ke=a.n(Ce),Re=a("4qC0"),Ne=a.n(Re),xe=a("Wwog"),Ae=a("Uvni"),Le=a("6Max"),Me=a("ITHA"),we=a("uZ2f"),De=a("1mqe"),_e=a.n(De);function Fe(){var e=o()(["Search any item"]);return Fe=function(){return e},e}var qe,Be,Ve,Ge=Object(C.q)({as:"div",form:"select-package-item"})((je=Se=class extends d.PureComponent{render(){var{reshedulEnabled:e}=this.props;return p.a.createElement(we.q,{name:"search-services",placeholder:Object(g.c)(Fe()),className:_e.a.self,sticky:!!e})}},s()(Se,"propTypes",{reshedulEnabled:f.a.bool}),Pe=je))||Pe,Ue=a("IF+p"),Ye=a.n(Ue);function Xe(){var e=o()(["Select Category"]);return Xe=function(){return e},e}function ze(){var e=o()(["No services found"]);return ze=function(){return e},e}var He,Qe,Ke,Ze=Object(m.b)(e=>({categories:h.a.getOfferCatalogCategoriesList(e),servicePricingLevels:h.a.getActiveServicePricingLevels(e),reshedulEnabled:h.a.isReshedulEnabled(e)}),{})((Ve=Be=class extends d.PureComponent{constructor(e){super(e),s()(this,"getSelectedCategory",Object(xe.a)(e=>this.props.categories.find(t=>t.id===e))),s()(this,"getSPLsByGroup",Object(xe.a)(e=>this.props.servicePricingLevels.filter(t=>t.category===e))),s()(this,"getSPLsBySearch",Object(xe.a)((e,t)=>{var a=t.toLowerCase();return e.filter(e=>function(e,t){return["name","description"].some(a=>{var r=T()(e,a,"");return Ne()(r)&&r.toLowerCase().includes(t)})}(e,a))})),s()(this,"getServices",(e,t)=>{var a=e?this.getSPLsByGroup(e):this.props.servicePricingLevels;return t&&(a=this.getSPLsBySearch(a,t)),a}),s()(this,"setCategoryId",e=>{this.setState({categoryId:e})}),s()(this,"handleInput",e=>{var t={searchInput:(e["search-services"]||"").trim()};this.setState(t)}),s()(this,"debouncedHandleInput",ke()(this.handleInput,100)),this.state={categoryId:void 0,searchInput:void 0}}renderCategories(){var{categories:e}=this.props;return p.a.createElement(Me.c,{key:"categories"},e.map(e=>p.a.createElement(be.x,{key:e.id,as:"li",onAction:()=>this.setCategoryId(e.id),forceSuffixShow:!0,qaType:"service-group-item:".concat(Ie()(e.name))},e.name)))}renderServices(){var{categoryId:e,searchInput:t=""}=this.state,a=this.getServices(e,t.trim());return a.length>0?p.a.createElement(Me.c,{key:"services"},a.map(e=>p.a.createElement(be.x,{as:"li",key:e.id,rightName:p.a.createElement(q.a,{price:e.nonDiscountedPrice,priceType:e.priceType,withTopLabel:!0}),leftLabel:"".concat(e.description?"".concat(e.description,", "):"").concat(Object(B.l)(e.durationInSeconds,"s")),onAction:()=>this.props.onSelectSPL(e),qaType:"service-search-item:".concat(e.id)},e.name))):p.a.createElement(de.a,{icon:"no-results-found",text:Object(g.c)(ze())})}render(){var{reshedulEnabled:e}=this.props,{categoryId:t,searchInput:a}=this.state,r=t?p.a.createElement(Q.c,{onAction:this.setCategoryId,size:"large"}):void 0;return p.a.createElement(K.i,{fullHeight:!0},p.a.createElement(K.g,{primaryAction:r,onClose:this.props.goBack},t?this.getSelectedCategory(t).name:Object(g.c)(Xe())),p.a.createElement(K.c,{noPadding:!0},p.a.createElement(Ge,{className:Ye.a.searchForm,onChange:this.debouncedHandleInput,reshedulEnabled:e}),t||a?this.renderServices():this.renderCategories()))}},s()(Be,"propTypes",{categories:f.a.arrayOf(f.a.shape(Ae.a.propTypes)),goBack:f.a.func,onSelectSPL:f.a.func,servicePricingLevels:f.a.arrayOf(f.a.shape(Le.a.propTypes)),reshedulEnabled:f.a.bool}),qe=Ve))||qe,Je=a("pKoe"),We=a("tPh7");function $e(){var e=o()(["Remove Service"]);return $e=function(){return e},e}function et(){var e=o()(["No extra time"]);return et=function(){return e},e}function tt(){var e=o()(["Duration"]);return tt=function(){return e},e}function at(){var e=o()(["Extra time type"]);return at=function(){return e},e}var rt,nt,ct,ot={EXTRA_TIME_TYPE:Object(g.c)(at()),DURATION:Object(g.c)(tt())},it=Object(C.R)(ue.e),st=Object(k.g)()(He=Object(m.b)((e,t)=>{var{packageItemIndex:a}=t,r=it(e,ue.d.SERVICES)[a];return{extraTimeSelected:r&&r[ue.d.EXTRA_TIME_TYPE],packageItem:r}},{})((Ke=Qe=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"onRemoveItem",()=>{var{packageItemIndex:e,onRemovePackageItem:t,onSubmit:a}=this.props;t(e),a()})}componentDidMount(){var{packageItem:e,routeParams:t}=this.props;e||Object(v.f)(S.U(t))}render(){var{packageItemIndex:e,extraTimeSelected:t,isMatch:a,subheader:r}=this.props;return p.a.createElement(_.b,null,!a&&p.a.createElement(We.a,{forceShow:!0},r),p.a.createElement(we.r,{label:ot.EXTRA_TIME_TYPE,name:"services[".concat(e,"][").concat(ue.d.EXTRA_TIME_TYPE,"]"),hideInvalidLabel:!0,paddingLayout:!0},p.a.createElement("option",{key:"no-extra-time",value:""},Object(g.c)(et())),Object.values(R.b).map(e=>p.a.createElement("option",{key:e,value:e},ue.b[e]))),p.a.createElement(we.r,{label:ot.DURATION,name:"services[".concat(e,"][").concat(ue.d.EXTRA_TIME,"]"),parse:Number,disabled:!t,hideInvalidLabel:!0,paddingLayout:!0},Je.a.map(({value:e,text:t})=>p.a.createElement("option",{key:e,value:e},t))),a&&p.a.createElement(be.w,{onAction:this.onRemoveItem},Object(g.c)($e())))}},s()(Qe,"propTypes",{packageItemIndex:f.a.string,extraTimeSelected:f.a.string,isMatch:f.a.bool,onRemovePackageItem:f.a.func,onSubmit:f.a.func,subheader:f.a.string,packageItem:f.a.object,routeParams:f.a.shape({groupId:f.a.oneOfType([f.a.number,f.a.string]),mode:f.a.string,packageId:f.a.string})}),He=Ke))||He)||He;function lt(){var e=o()(["Set extra time to follow this service, for example processing time for colour treatments, or blocked time for cleanup afterwards."]);return lt=function(){return e},e}function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pt,mt,bt,ft=Object(I.f)((ct=nt=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"onPackageItemDrop",e=>{var{source:t,destination:a}=e;if(a&&t){var r=le(this.props.fields.getAll(),t.index,a.index);this.updatePackageValues(r)}}),s()(this,"routeParams",{mode:this.props.match.params.mode,packageId:"add"===this.props.match.params.mode?"":this.props.match.params.packageId}),s()(this,"openSelectServiceModal",()=>{Object(v.c)(S.T(this.routeParams))}),s()(this,"closeSelectServiceModal",()=>{Object(v.b)(S.U(this.routeParams))}),s()(this,"openManagePackageItemModal",e=>{Object(v.c)(S.S(dt(dt({},this.routeParams),{},{packageItemIndex:e})))}),s()(this,"addPackageItem",e=>{var t=this.props.fields.getAll(),a={id:e.id,name:e.name,description:e.description,durationInSeconds:e.durationInSeconds,nonDiscountedPrice:e.nonDiscountedPrice,retailPrice:e.nonDiscountedPrice,priceType:e.priceType,extraTimeType:e.extraTimeType,extraTimeInSeconds:e.extraTimeInSeconds||ue.a,defaultExtraTimeInSeconds:e.extraTimeType&&e.extraTimeInSeconds};t.push(a),this.updatePackageValues(t),this.closeSelectServiceModal()}),s()(this,"removePackageItem",e=>{var t=this.props.fields.getAll();t.splice(e,1),this.updatePackageValues(t)}),s()(this,"updatePackageValues",(e=this.props.fields.getAll())=>{var{onUpdateServiceList:t}=this.props,a=e.reduce((e,t,a,r)=>{var n=0,c=0;return t.extraTimeType&&a<r.length-1&&(n+=t.extraTimeInSeconds),t.defaultExtraTimeInSeconds&&a<r.length-1&&(c+=t.defaultExtraTimeInSeconds),{totalPrice:e.totalPrice+t.nonDiscountedPrice,totalTimeInSeconds:e.totalTimeInSeconds+t.durationInSeconds+n,defaultTotalTimeInSeconds:e.defaultTotalTimeInSeconds+t.durationInSeconds+c}},{totalPrice:0,totalTimeInSeconds:0,defaultTotalTimeInSeconds:0});t(e,a)}),s()(this,"formModal",Object(C.r)({formName:ue.e,name:ue.d.SERVICES,size:"small",subheader:Object(g.c)(lt()),content:p.a.createElement(st,{onRemovePackageItem:this.removePackageItem}),cacheFieldArray:!0})),s()(this,"renderSelectServiceModal",()=>p.a.createElement(Ze,{onSelectSPL:this.addPackageItem,goBack:this.closeSelectServiceModal})),s()(this,"renderAddExtraTimeModal",e=>{var t=this.formModal,a=T()(e,"match.params.packageItemIndex"),r=this.props.fields.get(a);return p.a.createElement(t,{header:r&&r.name,onSubmit:this.updatePackageValues,packageItemIndex:a,routeParams:this.routeParams})})}render(){var e=this.props,{mobile:t,match:a,history:r,location:c}=e,o=M()(e,["mobile","match","history","location"]),i=dt({hasPackageItems:o.fields.length>0,canAddPackageItem:o.fields.length<6,openSelectServiceModal:this.openSelectServiceModal,openManagePackageItemModal:this.openManagePackageItemModal,onPackageItemDrop:this.onPackageItemDrop},o);return p.a.createElement(p.a.Fragment,null,t?p.a.createElement(ye,i):p.a.createElement(ve,n()({onRemovePackageItem:this.removePackageItem},i)),p.a.createElement(I.b,{path:S.o,render:this.renderSelectServiceModal}),p.a.createElement(I.b,{path:S.n,render:this.renderAddExtraTimeModal}))}},s()(nt,"propTypes",{mobile:f.a.bool,onUpdateServiceList:f.a.func.isRequired,fields:f.a.object.isRequired,match:f.a.object,history:f.a.object,location:f.a.object}),rt=ct))||rt,gt=a("o20C"),ht=a("PhEd"),Et=a("6kH+"),vt=a("ILui"),Ot=a("jFWb"),yt=a.n(Ot);function Pt(){var e=o()(["Prices"]);return Pt=function(){return e},e}function St(){var e=o()(["Learn more"]);return St=function(){return e},e}function jt(){var e=o()(["Learn more"]);return jt=function(){return e},e}function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ct(){var e=o()(["0.00"]);return Ct=function(){return e},e}function kt(){var e=o()(["0"]);return kt=function(){return e},e}function Rt(){var e=o()(["Schedule type"]);return Rt=function(){return e},e}function Nt(){var e=o()(["Discount value"]);return Nt=function(){return e},e}function xt(){var e=o()(["Retail price"]);return xt=function(){return e},e}function At(){var e=o()(["Pricing type"]);return At=function(){return e},e}function Lt(){var e=o()(["Package name"]);return Lt=function(){return e},e}var Mt={PACKAGE_NAME:Object(g.c)(Lt()),PRICING_TYPE:Object(g.c)(At()),RETAIL_PRICE:Object(g.c)(xt()),DISCOUNT_VALUE:Object(g.c)(Nt()),SCHEDULE_TYPE:Object(g.c)(Rt())},wt={PACKAGE:[C.kb.maxLength(255),C.kb.required(Mt.PACKAGE_NAME)],TYPE:C.kb.required(Mt.PRICING_TYPE),DISCOUNT:C.kb.rangeOfNumbers(Mt.DISCOUNT_VALUE,.01,100,!0)},Dt=Object(C.R)(ue.e),_t=Object(m.b)(e=>({currencySymbol:h.a.getCurrencySymbol(e),pricingType:Dt(e,ue.d.PRICING_TYPE),services:Dt(e,ue.d.SERVICES),isReshedulEnabled:h.a.isReshedulEnabled(e)}),{})((bt=mt=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"getPriceInputAttr",()=>{var{currencySymbol:e,pricingType:t}=this.props,a={currencySymbol:"%",placeholder:Object(g.c)(kt()),name:ue.d.DISCOUNT_VALUE,label:Mt.DISCOUNT_VALUE,precision:2,validate:wt.DISCOUNT},r={currencySymbol:e,placeholder:Object(g.c)(Ct()),name:ue.d.RETAIL_PRICE,label:Mt.RETAIL_PRICE},n=It(It({},r),{},{validate:this.validateRetailPrice}),c=It(It({},r),{},{disabled:!0});switch(t){case R.e.PERCENTAGE_DISCOUNT:return a;case R.e.CUSTOM_PRICE:return n;case R.e.CATALOG_PRICE:default:return c}}),s()(this,"validateRetailPrice",e=>{var{services:t,nonDiscountedPrice:a}=this.props;if(!(t&&t.length<1||0===a))return e>=a?Object(g.c)("Please enter a price less than %{max}",{max:a}):void 0})}render(){var{mobile:e,retailPrice:t,nonDiscountedPrice:a,isReshedulEnabled:r}=this.props,c=a-t,o=c>0?Object(g.c)("Discounted by %{discount}",{discount:p.a.createElement(q.a,{price:c,key:c})}):null;return p.a.createElement(_.b,null,p.a.createElement(J.d,{type:e?"form":"plain noPadding"},p.a.createElement(we.s,{name:ue.d.NAME,label:Mt.PACKAGE_NAME,noEditError:!0,grow:1,validate:wt.PACKAGE,qaType:"package-name-input"}),p.a.createElement(_.b,{flex:"row"},p.a.createElement(we.r,{label:Mt.SCHEDULE_TYPE,name:ue.d.TYPE,grow:1,hideInvalidLabel:!0,className:yt.a.fieldScheduleType,hint:r?p.a.createElement(ht.Text,{color:"gray50",className:yt.a.scheduleTypeHint,type:"field-helper-text"},Object(g.c)("Services can be booked by sequential order, or in parallel with the same start\n              time. %{link} about packages.",{link:p.a.createElement(Q.n,{as:"span",key:"link",inheritFontSize:!0,linkTo:S.s},p.a.createElement(F.d,{as:"span",type:"inherit",noWrap:!0},Object(g.c)(jt())))})):Object(g.c)("Services can be booked by sequential order, or in parallel with the same start\n              time. %{link} about packages.",{link:p.a.createElement(Q.n,{as:"span",key:"link",inheritFontSize:!0,linkTo:S.s},p.a.createElement(F.d,{as:"span",type:"inherit",noWrap:!0},Object(g.c)(St())))})},Object.values(R.d).map(e=>p.a.createElement("option",{key:e,value:e},ue.h[e]))))),!e&&p.a.createElement(vt.a,{withMargin:!0}),e&&p.a.createElement(Et.b,{label:Object(g.c)(Pt())}),p.a.createElement(_.b,{flex:e?"column":"row",className:yt.a.lastRow},p.a.createElement(we.r,{label:Mt.PRICING_TYPE,name:ue.d.PRICING_TYPE,basis:e?"100%":"45%",grow:1,hideInvalidLabel:!0,className:yt.a.fieldPricingType},Object.values(R.e).map(e=>p.a.createElement("option",{key:e,value:e},ue.i[e]))),p.a.createElement(we.a,n()({basis:e?"100%":"45%",grow:1,noEditError:!0,hint:r?p.a.createElement(ht.Text,{color:"gray50",className:yt.a.hint,qaType:"input-hint"},o):o,onlyPositive:!0,qaType:"package-price-input",className:yt.a.fieldPrice},this.getPriceInputAttr()))))}},s()(mt,"propTypes",{currencySymbol:f.a.string,mobile:f.a.bool,pricingType:f.a.string.isRequired,services:f.a.arrayOf(f.a.object),retailPrice:f.a.number,nonDiscountedPrice:f.a.number,isReshedulEnabled:f.a.bool}),pt=bt))||pt;function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function qt(){var e=o()(["Online booking"]);return qt=function(){return e},e}function Bt(){var e=o()(["Services"]);return Bt=function(){return e},e}function Vt(){var e=o()(["Save"]);return Vt=function(){return e},e}function Gt(){var e=o()(["Cancel"]);return Gt=function(){return e},e}function Ut(){var e=o()(["Delete"]);return Ut=function(){return e},e}class Yt extends d.PureComponent{renderFooter(){var{headerOnAction:e,submitForm:t,submitting:a,editMode:r,deletePackage:n}=this.props;return p.a.createElement(_.b,{flex:"row",grow:1},r&&p.a.createElement(Q.g,{onAction:n,disabled:a,qaType:"delete-package-button"},Object(g.c)(Ut())),p.a.createElement(_.b,{grow:1}),p.a.createElement(Q.d,{grow:0,neutralizeOutsidePadding:!0},p.a.createElement(Q.a,{onAction:e,qaType:"cancel-package-button"},Object(g.c)(Gt())),p.a.createElement(Q.f,{onAction:t,isPending:a,qaType:"save-package-button"},Object(g.c)(Vt()))))}render(){var e=this.props,{submitForm:t,onUpdateServiceList:a,retailPrice:r,nonDiscountedPrice:c,packageSummary:o,actionHandlers:i,submitting:s,pricingType:l}=e,u=M()(e,["submitForm","onUpdateServiceList","retailPrice","nonDiscountedPrice","packageSummary","actionHandlers","submitting","pricingType"]);return p.a.createElement(ie.a,n()({leftPanel:p.a.createElement(_t,{actionHandlers:i,nonDiscountedPrice:c,retailPrice:r}),rightPanel:p.a.createElement(se.b,{flex:"column",grow:1,flexContent:!0},p.a.createElement(se.a,{name:Object(g.c)(Bt())},p.a.createElement(C.o,{component:ft,name:ue.d.SERVICES,onUpdateServiceList:a,packageSummary:o,pricingType:l})),p.a.createElement(se.a,{name:Object(g.c)(qt())},p.a.createElement(C.s,{name:ue.c.ONLINE_BOOKING},p.a.createElement(gt.a,{formName:ue.e})))),footer:this.renderFooter()},u))}}s()(Yt,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ue.k));var Xt,zt,Ht,Qt,Kt=a("MoLQ");function Zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Wt(){var e=o()(["Online Booking"]);return Wt=function(){return e},e}function $t(){var e=o()(["Disabled"]);return $t=function(){return e},e}function ea(){var e=o()(["Enabled"]);return ea=function(){return e},e}function ta(){var e=o()(["Other options"]);return ta=function(){return e},e}function aa(){var e=o()(["Services"]);return aa=function(){return e},e}function ra(){var e=o()(["Save"]);return ra=function(){return e},e}function na(){var e=o()(["Delete"]);return na=function(){return e},e}function ca(){var e=o()(["Allow clients to book this service online, switch off to hide this service from your online bookings menu."]);return ca=function(){return e},e}function oa(){var e=o()(["Online booking"]);return oa=function(){return e},e}var ia,sa,la,ua=Object(C.r)({formName:ue.e,name:ue.c.ONLINE_BOOKING,partialPath:S.l,header:Object(g.c)(oa()),subheader:Object(g.c)(ca()),content:p.a.createElement(gt.a,{formName:ue.e})}),da=(Xt=Object(m.b)((e,t)=>{var a=Object(P.g)(e)[ue.c.ONLINE_BOOKING];return{mode:Object(P.e)(t),onlineBookingEnabled:a[ue.d.ONLINE_BOOKING_ENABLED]}},{}),Object(I.f)(zt=Xt((Qt=Ht=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"getOnlineBookingLink",()=>this.getModalLink(S.l)),s()(this,"getModalLink",e=>{var t={mode:this.props.mode};switch(e){case S.l:return S.V(t);default:return null}})}render(){var e=this.props,{history:t,location:a,match:r,mode:c,editMode:o,submitForm:i,deletePackage:s,onlineBookingEnabled:l,settingsSetToDefault:u,actionHandlers:d,nonDiscountedPrice:m,retailPrice:b,onUpdateServiceList:f,packageSummary:h,submitting:E,pricingType:v}=e,O=M()(e,["history","location","match","mode","editMode","submitForm","deletePackage","onlineBookingEnabled","settingsSetToDefault","actionHandlers","nonDiscountedPrice","retailPrice","onUpdateServiceList","packageSummary","submitting","pricingType"]);return p.a.createElement(Kt.a,n()({footer:p.a.createElement(_.b,{flex:"column"},h,p.a.createElement(Q.d,{neutralizeOutsidePadding:!0},o&&p.a.createElement(Q.g,{grow:1,onAction:s,disabled:E,qaType:"delete-package-button-mobile"},Object(g.c)(na())),p.a.createElement(Q.f,{grow:1,onAction:i,isPending:E,qaType:"save-package-button"},Object(g.c)(ra()))))},O),p.a.createElement(_t,{mobile:!0,actionHandlers:d,nonDiscountedPrice:m,retailPrice:b}),p.a.createElement(Et.b,{label:Object(g.c)(aa())}),p.a.createElement(C.o,{mobile:!0,component:ft,name:ue.d.SERVICES,onUpdateServiceList:f,pricingType:v}),p.a.createElement(Et.b,{label:Object(g.c)(ta())}),p.a.createElement(be.x,{linkTo:this.getOnlineBookingLink,leftLabel:l?Object(g.c)(ea()):Object(g.c)($t())},Object(g.c)(Wt())),p.a.createElement(I.b,{path:S.r,component:ua}))}},s()(Ht,"propTypes",Jt(Jt({},ue.k),{},{mode:f.a.string,onlineBookingEnabled:f.a.bool,settingsSetToDefault:f.a.bool,history:f.a.object,location:f.a.object,match:f.a.object,submitting:f.a.bool})),zt=Qt))||zt)||zt),pa=a("IVzs"),ma=a("DpsG"),ba=a("4kuM"),fa=a.n(ba),ga=a("LpzX"),ha=a("MqbX"),Ea=a.n(ha);function va(){var e=o()(["blocking time after"]);return va=function(){return e},e}function Oa(){var e=o()(["processing time after"]);return Oa=function(){return e},e}var ya,Pa={processing:Object(g.c)(Oa()),blocking:Object(g.c)(va())},Sa=Object(k.g)()((la=sa=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"onRemove",()=>{var{onRemovePackageItem:e,formIndex:t}=this.props;e(t)}),s()(this,"onOpenModal",()=>{var{openManagePackageItemModal:e,formIndex:t}=this.props;e(t)}),s()(this,"getDescription",()=>{var{packageItem:{description:e,durationInSeconds:t,extraTimeType:a,extraTimeInSeconds:r}}=this.props,n=[e,Object(B.l)(t,"s"),a&&"".concat(Object(B.l)(r)," ").concat(Pa[a])].filter(Boolean);return p.a.createElement(ht.Text,{type:"caption"},n.join(", "))})}render(){var{packageItem:{name:e,nonDiscountedPrice:t,retailPrice:a,priceType:r},isMatch:c,pricingType:o,propagateEvents:i}=this.props,{price:s,oldPrice:l}=Object(ga.a)(t,a),u=o!==R.e.FREE?r:null,d=c?{onAction:this.onOpenModal,suffix:"arrow-right"}:{};return p.a.createElement(ht.RowButton,n()({padding:c?"small":"large",hoverColor:"lightGray100",className:Ea.a.self,propagateEvents:i,rawPrefix:p.a.createElement(ht.Icon,{name:"drag",size:"16"}),rightName:p.a.createElement(q.a,{isReshedulEnabled:!0,bold:!0,price:s,priceType:u}),rightLabel:l&&p.a.createElement(q.a,{strikethrough:!0,isReshedulEnabled:!0,price:l,bold:!0,type:"fresha-caption",color:"gray50"}),leftLabel:this.getDescription(),suffix:p.a.createElement(ht.ActionIcon,{name:"navigation-24-close",size:16,className:Ea.a.removeIcon,buttonColor:"lightGray150",variant:"button",onAction:this.onRemove,color:"red200",qaType:"remove-service-package-item"})},d),p.a.createElement(ht.Text,{type:"fresha-h4"},p.a.createElement(ht.Link,{variant:"inherit",onAction:this.onOpenModal,qaType:"service-package-item-name"},e)))}},s()(sa,"propTypes",{formIndex:f.a.number,packageItem:f.a.shape({id:f.a.string,name:f.a.string,nonDiscountedPrice:f.a.number,retailPrice:f.a.number,description:f.a.string,durationInSeconds:f.a.number,extraTimeType:f.a.string,extraTimeInSeconds:f.a.number,priceType:f.a.oneOf(Object.values(N.a))}),pricingType:f.a.string,openManagePackageItemModal:f.a.func,onRemovePackageItem:f.a.func,isMatch:f.a.bool,propagateEvents:f.a.bool}),ia=la))||ia;class ja extends d.PureComponent{constructor(...e){super(...e),s()(this,"renderPackageItem",(e,t,a)=>{var{onRemovePackageItem:r,openManagePackageItemModal:c,pricingType:o}=this.props,i=a.get(t);return p.a.createElement(me.b,{type:"package-item",draggableId:"package-".concat(t),index:t,key:t},e=>p.a.createElement(_.b,n()({selfRef:e.innerRef},e.draggableProps,e.dragHandleProps),p.a.createElement(Sa,{formIndex:t,onRemovePackageItem:r,openManagePackageItemModal:c,packageItem:i,qaType:"service-package-item",propagateEvents:!0,pricingType:o})))})}render(){var{fields:e,onPackageItemDrop:t}=this.props;return p.a.createElement(me.a,{onDragEnd:t},p.a.createElement(me.c,{droppableId:"package-items"},t=>p.a.createElement(p.a.Fragment,null,p.a.createElement(_.b,n()({},t.droppableProps,{selfRef:t.innerRef}),e.map(this.renderPackageItem)),t.placeholder)))}}function Ta(){var e=o()(["Learn more"]);return Ta=function(){return e},e}function Ia(){var e=o()(["Extra options"]);return Ia=function(){return e},e}function Ca(){var e=o()(["Assign services to your package"]);return Ca=function(){return e},e}function ka(){var e=o()(["Services"]);return ka=function(){return e},e}function Ra(){var e=o()(["Select service"]);return Ra=function(){return e},e}function Na(){var e=o()(["Add another service"]);return Na=function(){return e},e}s()(ja,"propTypes",{fields:f.a.object,onRemovePackageItem:f.a.func,onPackageItemDrop:f.a.func,openManagePackageItemModal:f.a.func,pricingType:f.a.string});class xa extends d.PureComponent{render(){var{hasPackageItems:e,openSelectServiceModal:t,packageSummary:a,canAddPackageItem:r,fields:n,onRemovePackageItem:c,openManagePackageItemModal:o,onPackageItemDrop:i,pricingType:s,isMatch:l}=this.props,u=e?Object(g.c)(Na()):Object(g.c)(Ra()),d=e?"add-another-package-btn":"package-add-service-btn";return p.a.createElement(ht.Card,{rounded:!l,noShadow:l,padding:l?"small":"large",withSections:!0},p.a.createElement(ht.CardHeader,{title:Object(g.c)(ka()),caption:Object(g.c)(Ca()),noSeparator:l}),p.a.createElement(ht.CardSection,{noPadding:!0,noBorder:!0},p.a.createElement(ja,{fields:n,onRemovePackageItem:c,openManagePackageItemModal:o,onPackageItemDrop:i,pricingType:s}),r&&l&&p.a.createElement("div",null,p.a.createElement(ht.RowButton,{qaType:d,noBorder:!0,leftLabel:p.a.createElement(ht.Text,{type:"fresha-paragraph",color:"blue200"},u),onAction:t,suffix:p.a.createElement(ht.Icon,{name:"plus-circled",size:24,buttonColor:"blue200",variant:"button"})}))),r&&!l&&p.a.createElement(ht.CardSection,null,p.a.createElement("div",{className:fa.a.packageItemsBottomSection},p.a.createElement(ht.Link,{qaType:d,onAction:t,icon:"plus-circled"},u),e&&a)),p.a.createElement(ht.CardSection,null,p.a.createElement(_.b,{paddingBottom:24},p.a.createElement(ht.Text,{type:"fresha-h3",color:"black"},Object(g.c)(Ia()))),p.a.createElement(ma.a,null,p.a.createElement(ht.ReduxForm.SelectField,{label:ue.g.SCHEDULE_TYPE,name:ue.d.TYPE,helperTextWithLink:!0,helperText:Object(g.c)("Services can be booked by sequential order, or in parallel with the same start\n            time. %{link} about packages.",{link:p.a.createElement(ht.Link,{as:"span",key:"link",inheritFontSize:!0,linkTo:S.s},p.a.createElement(ht.Text,{as:"span",type:"inherit",noWrap:!0},Object(g.c)(Ta())))}),xpos:"single",ypos:"last"},Object.values(R.d).map(e=>p.a.createElement("option",{key:e,value:e},ue.h[e]))))))}}function Aa(){var e=o()(["Search services..."]);return Aa=function(){return e},e}s()(xa,"propTypes",{hasPackageItems:f.a.bool,canAddPackageItem:f.a.bool,packageSummary:f.a.node,fields:f.a.object,openSelectServiceModal:f.a.func,openManagePackageItemModal:f.a.func,onRemovePackageItem:f.a.func,onPackageItemDrop:f.a.func,pricingType:f.a.string,isMatch:f.a.bool});var La,Ma,wa,Da=ht.ReduxForm.default({as:"div",form:"select-package-item"})(ya=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"propTypes",{className:b.PropTypes.string})}render(){return p.a.createElement(ht.ReduxForm.SearchField,{className:this.props.className,ypos:"last",xpos:"single",name:"search-services",placeholder:Object(g.c)(Aa())})}})||ya;function _a(){var e=o()(["Select Category"]);return _a=function(){return e},e}function Fa(){var e=o()(["Select Category"]);return Fa=function(){return e},e}function qa(){var e=o()(["No services found"]);return qa=function(){return e},e}var Ba,Va,Ga,Ua=Object(k.g)()(La=Object(m.b)(e=>({categories:h.a.getOfferCatalogCategoriesList(e),servicePricingLevels:h.a.getActiveServicePricingLevels(e)}),{})((wa=Ma=class extends d.PureComponent{constructor(e){super(e),s()(this,"getSelectedCategory",Object(xe.a)(e=>this.props.categories.find(t=>t.id===e))),s()(this,"getSPLsByGroup",Object(xe.a)(e=>this.props.servicePricingLevels.filter(t=>t.category===e))),s()(this,"getSPLsBySearch",Object(xe.a)((e,t)=>{var a=t.toLowerCase();return e.filter(e=>function(e,t){return["name","description"].some(a=>{var r=T()(e,a,"");return Ne()(r)&&r.toLowerCase().includes(t)})}(e,a))})),s()(this,"getServices",(e,t)=>{var a=e?this.getSPLsByGroup(e):this.props.servicePricingLevels;return t&&(a=this.getSPLsBySearch(a,t)),a}),s()(this,"setCategoryId",e=>{this.setState({categoryId:e})}),s()(this,"handleInput",e=>{var t={searchInput:(e["search-services"]||"").trim()};this.setState(t)}),s()(this,"debouncedHandleInput",ke()(this.handleInput,100)),this.state={categoryId:void 0,searchInput:void 0}}renderCategories(){var{categories:e,isMatch:t}=this.props;return p.a.createElement(ht.CardSection,{noPadding:!0,key:"categories"},e.map((a,r)=>p.a.createElement(ht.RowButton,{hoverColor:"lightGray100",padding:t?"small":"large",suffix:"arrow-right",key:a.id,onAction:()=>this.setCategoryId(a.id),qaType:"service-group-item:".concat(Ie()(a.name)),noBorder:e.length-1===r},p.a.createElement(ht.Text,{type:"fresha-h4"},a.name))))}renderServices(){var{categoryId:e,searchInput:t=""}=this.state,{isMatch:a}=this.props,r=this.getServices(e,t.trim());return r.length>0?p.a.createElement(ht.CardSection,{noPadding:!0},r.map((e,t)=>p.a.createElement(ht.RowButton,{hoverColor:"lightGray100",padding:a?"small":"large",as:"li",key:e.id,noBorder:r.length-1===t,valign:"top",rightName:p.a.createElement(q.a,{isReshedulEnabled:!0,bold:!0,price:e.nonDiscountedPrice,priceType:e.priceType,withTopLabel:!0}),leftLabel:p.a.createElement(ht.Text,{type:"fresha-caption",color:"gray50"},"".concat(e.description?"".concat(e.description,", "):"").concat(Object(B.l)(e.durationInSeconds,"s"))),onAction:()=>this.props.onSelectSPL(e),qaType:"service-search-item:".concat(e.id)},p.a.createElement(ht.Text,{type:"fresha-h4"},e.name)))):p.a.createElement(ht.Placeholder,{iconColor:"original",icon:"shedul/image-64-placeholder-search",name:Object(g.c)(qa())})}render(){var{categoryId:e,searchInput:t}=this.state,{isMatch:a}=this.props;return a?p.a.createElement(ht.ModalFullScreen,{color:"white",className:fa.a.selectServiceModal},p.a.createElement(ht.ModalFullScreenMobileHeader,{center:!0,onClose:this.props.goBack,onBack:e&&this.setCategoryId,title:e?this.getSelectedCategory(e).name:Object(g.c)(Fa())}),p.a.createElement(ht.FullScreenModalContent,null,p.a.createElement(Da,{className:fa.a.searchForm,onChange:this.debouncedHandleInput}),e||t?this.renderServices():this.renderCategories())):p.a.createElement(K.d,{isResheduleMobile:a,fullHeight:!0},p.a.createElement(ht.ModalCard,{title:e?this.getSelectedCategory(e).name:Object(g.c)(_a()),rounded:!0,withSections:!0,scrollable:!0,onClose:this.props.goBack,onBack:e&&this.setCategoryId,headerChildren:p.a.createElement(Da,{onChange:this.debouncedHandleInput})},e||t?this.renderServices():this.renderCategories()))}},s()(Ma,"propTypes",{categories:f.a.arrayOf(f.a.shape(Ae.a.propTypes)),goBack:f.a.func,onSelectSPL:f.a.func,servicePricingLevels:f.a.arrayOf(f.a.shape(Le.a.propTypes)),isMatch:f.a.bool}),La=wa))||La)||La;function Ya(){var e=o()(["No extra time"]);return Ya=function(){return e},e}function Xa(){var e=o()(["Set extra time to follow this service, for example processing time for colour treatments,\n          or blocked time for cleanup afterwards."]);return Xa=function(){return e},e}function za(){var e=o()(["Duration"]);return za=function(){return e},e}function Ha(){var e=o()(["Extra time type"]);return Ha=function(){return e},e}var Qa,Ka,Za,Ja={EXTRA_TIME_TYPE:Object(g.c)(Ha()),DURATION:Object(g.c)(za())},Wa=Object(C.R)(ue.e),$a=Object(m.b)((e,t)=>{var{packageItemIndex:a}=t,r=Wa(e,ue.d.SERVICES)[a];return{extraTimeSelected:r&&r[ue.d.EXTRA_TIME_TYPE],packageItem:r}},{})((Ga=Va=class extends d.PureComponent{componentDidMount(){var{packageItem:e,routeParams:t}=this.props;e||Object(v.f)(S.U(t))}render(){var{packageItemIndex:e,extraTimeSelected:t}=this.props;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ht.Text,{type:"fresha-caption",color:"gray100"},Object(g.c)(Xa())),p.a.createElement(ht.ReduxForm.SelectField,{label:Ja.EXTRA_TIME_TYPE,name:"services[".concat(e,"][").concat(ue.d.EXTRA_TIME_TYPE,"]"),hideInvalidLabel:!0,xpos:"single",ypos:"last"},p.a.createElement("option",{key:"no-extra-time",value:""},Object(g.c)(Ya())),Object.values(R.b).map(e=>p.a.createElement("option",{key:e,value:e},ue.b[e]))),p.a.createElement(ht.ReduxForm.SelectField,{label:Ja.DURATION,name:"services[".concat(e,"][").concat(ue.d.EXTRA_TIME,"]"),parse:Number,disabled:!t,hideInvalidLabel:!0,xpos:"single",ypos:"last"},Je.a.map(({value:e,text:t})=>p.a.createElement("option",{key:e,value:e},t))))}},s()(Va,"propTypes",{packageItemIndex:f.a.string,extraTimeSelected:f.a.string,packageItem:f.a.object,routeParams:f.a.shape({groupId:f.a.oneOfType([f.a.number,f.a.string]),mode:f.a.string,packageId:f.a.string})}),Ba=Ga))||Ba;function er(){var e=o()(["Remove"]);return er=function(){return e},e}function tr(){var e=o()(["Time processing"]);return tr=function(){return e},e}function ar(){var e=o()(["Set extra time to follow this service, for example processing time for colour treatments, or blocked time for cleanup afterwards."]);return ar=function(){return e},e}function rr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function nr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var cr=Object(I.f)((Za=Ka=class extends d.PureComponent{constructor(...e){super(...e),s()(this,"onPackageItemDrop",e=>{var{source:t,destination:a}=e;if(a&&t){var r=le(this.props.fields.getAll(),t.index,a.index);this.updatePackageValues(r)}}),s()(this,"routeParams",{mode:this.props.match.params.mode,packageId:"add"===this.props.match.params.mode?"":this.props.match.params.packageId}),s()(this,"openSelectServiceModal",()=>{Object(v.c)(S.T(this.routeParams))}),s()(this,"closeSelectServiceModal",()=>{Object(v.b)(S.U(this.routeParams))}),s()(this,"openManagePackageItemModal",e=>{Object(v.c)(S.S(nr(nr({},this.routeParams),{},{packageItemIndex:e})))}),s()(this,"addPackageItem",e=>{var t=this.props.fields.getAll(),a={id:e.id,name:e.name,description:e.description,durationInSeconds:e.durationInSeconds,nonDiscountedPrice:e.nonDiscountedPrice,retailPrice:e.nonDiscountedPrice,priceType:e.priceType,extraTimeType:e.extraTimeType,extraTimeInSeconds:e.extraTimeInSeconds||ue.a,defaultExtraTimeInSeconds:e.extraTimeType&&e.extraTimeInSeconds};t.push(a),this.updatePackageValues(t),this.closeSelectServiceModal()}),s()(this,"removePackageItem",(e,{goBack:t=!1}={})=>{var a=this.props.fields.getAll();a.splice(e,1),this.updatePackageValues(a),t&&Object(v.b)(S.U(this.routeParams))}),s()(this,"updatePackageValues",(e=this.props.fields.getAll())=>{var{onUpdateServiceList:t}=this.props,a=e.reduce((e,t,a,r)=>{var n=0,c=0;return t.extraTimeType&&a<r.length-1&&(n+=t.extraTimeInSeconds),t.defaultExtraTimeInSeconds&&a<r.length-1&&(c+=t.defaultExtraTimeInSeconds),{totalPrice:e.totalPrice+t.nonDiscountedPrice,totalTimeInSeconds:e.totalTimeInSeconds+t.durationInSeconds+n,defaultTotalTimeInSeconds:e.defaultTotalTimeInSeconds+t.durationInSeconds+c}},{totalPrice:0,totalTimeInSeconds:0,defaultTotalTimeInSeconds:0});t(e,a)}),s()(this,"formModal",Object(C.r)({formName:ue.e,name:ue.d.SERVICES,size:"small",subheader:Object(g.c)(ar()),content:p.a.createElement($a,{onRemovePackageItem:this.removePackageItem}),cacheFieldArray:!0})),s()(this,"renderSelectServiceModal",()=>p.a.createElement(Ua,{onSelectSPL:this.addPackageItem,goBack:this.closeSelectServiceModal})),s()(this,"renderAddExtraTimeModal",e=>{var{isMatch:t}=this.props,a=this.formModal,r=T()(e,"match.params.packageItemIndex"),n=this.props.fields.get(r);return p.a.createElement(a,{header:t?n&&n.name:Object(g.c)(tr()),onSubmit:this.updatePackageValues,packageItemIndex:r,routeParams:this.routeParams,redesignedModal:!0,secondaryButton:t&&p.a.createElement(ht.Button,{variant:"secondary",onAction:()=>this.removePackageItem(r,{goBack:!0}),color:"red200"},Object(g.c)(er())),packageItemName:n&&n.name})})}render(){var e=this.props,{mobile:t,match:a,history:r,location:c}=e,o=M()(e,["mobile","match","history","location"]),i=nr({hasPackageItems:o.fields.length>0,canAddPackageItem:o.fields.length<6,openSelectServiceModal:this.openSelectServiceModal,openManagePackageItemModal:this.openManagePackageItemModal,onPackageItemDrop:this.onPackageItemDrop},o);return p.a.createElement(p.a.Fragment,null,p.a.createElement(xa,n()({onRemovePackageItem:this.removePackageItem},i)),p.a.createElement(I.b,{path:S.o,render:this.renderSelectServiceModal}),p.a.createElement(I.b,{path:S.n,render:this.renderAddExtraTimeModal}))}},s()(Ka,"propTypes",{mobile:f.a.bool,onUpdateServiceList:f.a.func.isRequired,fields:f.a.object.isRequired,match:f.a.object,history:f.a.object,location:f.a.object,isMatch:f.a.bool}),Qa=Za))||Qa,or={PACKAGE:[C.kb.maxLength(255),C.kb.required(ue.g.PACKAGE_NAME)],TYPE:C.kb.required(ue.g.PRICING_TYPE),DISCOUNT:C.kb.rangeOfNumbers(ue.g.DISCOUNT_VALUE,.01,100,!0)};function ir(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function sr(){var e=o()(["Package available for"]);return sr=function(){return e},e}function lr(){var e=o()(["Add short description"]);return lr=function(){return e},e}function ur(){var e=o()(["No category selected"]);return ur=function(){return e},e}function dr(){var e=o()(["Edit"]);return dr=function(){return e},e}function pr(){var e=o()(["Package category"]);return pr=function(){return e},e}function mr(){var e=o()(["Add a package name, description and choose who it's available for."]);return mr=function(){return e},e}function br(){var e=o()(["Basic info"]);return br=function(){return e},e}function fr(){var e=o()(["Package category"]);return fr=function(){return e},e}function gr(){var e=o()(["Package description"]);return gr=function(){return e},e}var hr=Object(g.c)(gr()),Er=C.kb.maxLength(1e3),vr=C.kb.required(Object(g.c)(fr())),Or=e=>{var t,{isMatch:a}=e;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ht.Card,{rounded:!a,noShadow:a,padding:a?"small":"large",withSections:!0},p.a.createElement(ht.CardHeader,{title:Object(g.c)(br()),caption:Object(g.c)(mr()),noSeparator:a}),p.a.createElement(ht.CardSection,null,p.a.createElement(ma.a,null,p.a.createElement(ht.ReduxForm.TextField,{name:ue.d.NAME,label:ue.g.PACKAGE_NAME,"data-qa":"package-name-input",validate:or.PACKAGE,xpos:"single"}),p.a.createElement(ht.ReduxForm.StaticField,{xpos:"single",label:Object(g.c)(pr()),name:ue.d.CATEGORY,suffix:p.a.createElement(ht.Link,{qaType:"open-offer-item-category-modal",linkTo:(t={mode:Object(P.e)(e),packageId:Object(P.h)(e),groupId:Object(P.d)(e)},S.Z(t))},Object(g.c)(dr())),validate:vr,placeholder:Object(g.c)(ur())}),p.a.createElement(ht.ReduxForm.TextField,{xpos:"single",multiline:!0,name:y.c.DESCRIPTION,label:hr,type:"textarea",noEditError:!0,grow:1,validate:Er,rows:3,placeholder:Object(g.c)(lr()),maxLength:100}),p.a.createElement(ht.ReduxForm.SelectField,{label:Object(g.c)(sr()),name:y.c.GENDER,xpos:"single",ypos:"last"},Object.values(R.c).map(e=>p.a.createElement("option",{key:e,value:e},y.i[e])))))))};Or.propTypes=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ir(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ue.k);var yr=Object(I.f)(Or),Pr=a("ANjH");function Sr(){var e=o()(["Add the price of the package"]);return Sr=function(){return e},e}function jr(){var e=o()(["Price"]);return jr=function(){return e},e}function Tr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ir(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Cr(){var e=o()(["0.00"]);return Cr=function(){return e},e}function kr(){var e=o()(["0"]);return kr=function(){return e},e}var Rr=Object(C.R)(ue.e),Nr=Object(Pr.d)(Object(m.b)((e,t)=>({currencySymbol:h.a.getCurrencySymbol(e),pricingType:Rr(e,ue.d.PRICING_TYPE),services:Rr(e,ue.d.SERVICES),isMatch:t.isMatch}),{})),xr=e=>t=>{var{services:a,nonDiscountedPrice:r}=e;if(!(a&&a.length<1||0===r))return t>=r?Object(g.c)("Please enter a price less than %{max}",{max:r}):void 0},Ar=e=>{var{retailPrice:t,nonDiscountedPrice:a,isMatch:r}=e,c=a-t,o=c>0?Object(g.c)("Discounted by %{discount}",{discount:p.a.createElement(q.a,{isReshedulEnabled:!0,price:c,key:c})}):null;return p.a.createElement(ht.Card,{rounded:!r,noShadow:r,padding:r?"small":"large",withSections:!0},p.a.createElement(ht.CardHeader,{title:Object(g.c)(jr()),caption:Object(g.c)(Sr()),noSeparator:r}),p.a.createElement(ht.CardSection,null,p.a.createElement(ma.a,{className:fa.a.pricingInputs},p.a.createElement(ht.ReduxForm.SelectField,{xpos:r?"single":"first",ypos:"last",label:ue.g.PRICING_TYPE,name:ue.d.PRICING_TYPE},Object.values(R.e).map(e=>p.a.createElement("option",{key:e,value:e},ue.i[e]))),p.a.createElement(ht.ReduxForm.AmountField,n()({xpos:r?"single":"last",ypos:"last",qaType:"package-price-input",helperText:o,helperTextWithLink:!0},(e=>{var{currencySymbol:t,pricingType:a}=e,r={currencySymbol:"%",placeholder:Object(g.c)(kr()),name:ue.d.DISCOUNT_VALUE,label:ue.g.DISCOUNT_VALUE,precision:2,validate:or.DISCOUNT},n={currencySymbol:t,placeholder:Object(g.c)(Cr()),name:ue.d.RETAIL_PRICE,label:ue.g.RETAIL_PRICE},c=Ir(Ir({},n),{},{validate:xr(e)}),o=Ir(Ir({},n),{},{disabled:!0});switch(a){case R.e.PERCENTAGE_DISCOUNT:return r;case R.e.CUSTOM_PRICE:return c;case R.e.CATALOG_PRICE:default:return o}})(e))))))};Ar.propTypes=Ir({},ue.k);var Lr=Nr(Ar);function Mr(){var e=o()(["Enable online bookings"]);return Mr=function(){return e},e}function wr(){var e=o()(["Enable online bookings, choose who the service is available for and add a short description."]);return wr=function(){return e},e}function Dr(){var e=o()(["Online booking"]);return Dr=function(){return e},e}var _r=({isMatch:e})=>p.a.createElement(ht.Card,{rounded:!e,noShadow:e,withSections:!0,padding:e?"small":"large"},p.a.createElement(ht.CardHeader,{title:Object(g.c)(Dr()),caption:Object(g.c)(wr()),noSeparator:e}),p.a.createElement(ht.CardSection,null,p.a.createElement(ma.a,null,p.a.createElement(ht.ReduxForm.BooleanField,{name:y.c.ONLINE_BOOKING_ENABLED,label:Object(g.c)(Mr()),widgetType:"switch",xpos:"single",ypos:"last"}))));_r.propTypes={isMatch:f.a.bool};var Fr,qr,Br,Vr=_r;function Gr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Ur,Yr,Xr,zr,Hr,Qr,Kr=Object(k.g)()((Br=qr=class extends d.PureComponent{render(){var{isMatch:e,onUpdateServiceList:t,retailPrice:a,nonDiscountedPrice:r,packageSummary:n,pricingType:c,editMode:o,deletePackage:i,headerOnAction:s,header:l,submitForm:u,submitting:d}=this.props;return p.a.createElement(ma.b,{title:l,isSaving:d,onSave:u,onClose:s,onDelete:o&&i,footerSummary:n,qaDataView:"package"},p.a.createElement(yr,{isMatch:e}),p.a.createElement(Vr,{isMatch:e}),p.a.createElement(C.o,{component:cr,name:ue.d.SERVICES,onUpdateServiceList:t,packageSummary:n,pricingType:c,isMatch:e}),p.a.createElement(Lr,{nonDiscountedPrice:r,retailPrice:a,isMatch:e}))}},s()(qr,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ue.k)),Fr=Br))||Fr,Zr=Object(k.g)()((Xr=Yr=class extends d.PureComponent{render(){var{retailPrice:e,nonDiscountedPrice:t,totalTimeInSeconds:a,defaultTotalTimeInSeconds:r,priceType:n,isMatch:c}=this.props,o=Object(B.l)(a,"s"),i=Object(B.l)(r,"s"),s=t<e?t:e,l=Object(g.c)("Total: %{price} (%{packageTime})",{price:p.a.createElement(q.a,{price:s,key:"actual-price",qaType:"package-actual-price",priceType:n}),packageTime:o}),u=Object(g.c)("%{price} (%{defaultPackageTime})",{price:p.a.createElement(q.a,{reshedul:!0,price:t,key:"non-discounted-price",qaType:"package-original-price"}),defaultPackageTime:i});return a?c?p.a.createElement(_.b,{flex:"column"},p.a.createElement(ht.Text,{type:"fresha-h5",color:"gray100",align:"center"},l),t>e&&p.a.createElement(ht.Text,{type:"fresha-caption",color:"gray50",align:"center",strikethrough:!0},u)):p.a.createElement(_.b,{flex:"column",paddingRight:30},p.a.createElement(ht.Text,{type:"fresha-h4",color:"gray100",align:"right"},l),t>e&&p.a.createElement(ht.Text,{type:"fresha-caption",color:"gray50",align:"right",strikethrough:!0},u)):null}},s()(Yr,"propTypes",{retailPrice:f.a.number.isRequired,nonDiscountedPrice:f.a.number.isRequired,totalTimeInSeconds:f.a.number,defaultTotalTimeInSeconds:f.a.number,priceType:f.a.oneOf(Object.values(N.a)),isMatch:f.a.bool}),Ur=Xr))||Ur;function Jr(){var e=o()(["Delete"]);return Jr=function(){return e},e}function Wr(){var e=o()(["Cancel"]);return Wr=function(){return e},e}function $r(){var e=o()(["Delete"]);return $r=function(){return e},e}function en(){var e=o()(["Cancel"]);return en=function(){return e},e}function tn(){var e=o()(["Package couldn't be deleted, please try again later"]);return tn=function(){return e},e}function an(){var e=o()(["Package deleted"]);return an=function(){return e},e}function rn(){var e=o()(["Are you sure you want to delete this package? This action cannot be undone."]);return rn=function(){return e},e}function nn(){var e=o()(["Delete the package"]);return nn=function(){return e},e}var cn,on,sn,ln=Object(g.c)(nn()),un=Object(g.c)(rn()),dn=Object(k.g)()((Qr=Hr=class extends d.PureComponent{constructor(e){super(e),s()(this,"handleDelete",()=>{var e=Object(P.h)(this.props);return Object(W.a)(e,{confirmResetMarketingCampaigns:this.displayCampaignNote,confirmOfflineLocationProfiles:this.displayOfflineProfilesNote}).then(()=>{E.a.addGlobalSuccessToast(Object(g.c)(an())),Object(v.f)(S.z)}).catch(()=>{this.handleClose(),E.a.addErrorToast(Object(g.c)(tn()))})}),s()(this,"handleClose",()=>{var e=Object(P.h)(this.props);Object(v.b)(S.U({packageId:e,mode:y.j.EDIT}))}),this.affectedMarketingCampaigns=T()(this.props,"location.state.affectedMarketingCampaigns"),this.affectedLocationProfiles=T()(this.props,"location.state.affectedLocationProfiles"),this.packageName=T()(this.props,"location.state.packageName"),this.displayOfflineProfilesNote=this.affectedLocationProfiles.length>0,this.displayCampaignNote=this.affectedMarketingCampaigns>0}render(){var{isMatch:e}=this.props;return e?p.a.createElement(ht.ModalFullScreen,{color:"white"},p.a.createElement(ht.ModalFullScreenMobileHeader,{center:!0,onClose:this.handleClose,title:ln}),p.a.createElement(ht.FullScreenModalContent,{mobileLayout:!0},p.a.createElement(ht.Text,{qaType:"delete-package-modal-text"},un),this.displayCampaignNote&&p.a.createElement(ht.CardSection,null,p.a.createElement(ht.MediaCardNote,{title:Object(g.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:this.affectedMarketingCampaigns})})),this.displayOfflineProfilesNote&&p.a.createElement(H.a,{affectedLocationProfiles:this.affectedLocationProfiles})),p.a.createElement(ht.ModalFullScreenMobileFooter,{qaType:"delete-package-modal",buttons:[p.a.createElement(ht.Button,{variant:"secondary",onAction:this.handleClose},Object(g.c)(en())),p.a.createElement(ht.Button,{qaType:"delete-package-confirm-button",onAction:this.handleDelete,variant:"danger"},Object(g.c)($r()))]})):p.a.createElement(K.d,{fullHeight:!0},p.a.createElement(ht.ModalCard,{qaType:"delete-package-modal",title:ln,rounded:!0,size:"small",className:fa.a.modalWide,onClose:this.handleClose,withSections:!0,buttons:[p.a.createElement(ht.Button,{variant:"secondary",onAction:this.handleClose},Object(g.c)(Wr())),p.a.createElement(ht.Button,{qaType:"delete-package-confirm-button",onAction:this.handleDelete,variant:"danger"},Object(g.c)(Jr()))]},p.a.createElement(ht.CardSection,{noBorder:!0},p.a.createElement(ht.Text,{qaType:"delete-package-modal-text",type:"fresha-paragraph"},un)),this.displayCampaignNote&&p.a.createElement(ht.CardSection,{noBorder:!0},p.a.createElement(ht.MediaCardNote,{title:Object(g.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:this.affectedMarketingCampaigns})})),this.displayOfflineProfilesNote&&p.a.createElement(ht.CardSection,{noBorder:!0},p.a.createElement(H.a,{affectedLocationProfiles:this.affectedLocationProfiles}))))}},s()(Hr,"propTypes",{isMatch:f.a.bool}),zr=Qr))||zr;function pn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var mn=Object(C.R)(ue.e);var bn,fn,gn,hn=Object(k.g)()(cn=Object(m.b)(e=>({pricingType:mn(e,ue.d.PRICING_TYPE),retailPrice:mn(e,ue.d.RETAIL_PRICE),isPackageParallel:mn(e,ue.d.TYPE)===R.d.PARALLEL,percentageDiscount:mn(e,ue.d.DISCOUNT_VALUE),services:mn(e,ue.d.SERVICES),isServicesRevampEnabled:h.a.isServicesRevampEnabled(e),offerCatalogCategories:h.a.getOfferCatalogCategoryList(e)}),{})(cn=Object(C.q)({validate:e=>{var t={},a=e[ue.d.SERVICES]||[];a.length&&(0===a.reduce((e,t)=>e+t.nonDiscountedPrice,0)&&e[ue.d.PRICING_TYPE]!==R.e.CATALOG_PRICE&&e[ue.d.PRICING_TYPE]!==R.e.FREE&&a.length>1&&(t[ue.d.PRICING_TYPE]="Please select Service Pricing, as all included services are free of charge"));return t[ue.d.PRICING_TYPE]||(t[ue.d.PRICING_TYPE]=wt.TYPE(e[ue.d.PRICING_TYPE])),t},form:ue.e,immutableProps:["header","services","packageObject"]})((sn=on=class extends d.PureComponent{constructor(e){super(e),s()(this,"onUpdateServiceList",(e,{totalPrice:t,totalTimeInSeconds:a,defaultTotalTimeInSeconds:r})=>{var{retailPrice:n,percentageDiscount:c}=this.state,{pricingType:o}=this.props,i={},{parallelTotalTimeInSeconds:s,parallelDefaultTotalTimeInSeconds:l}=function(e){return{parallelTotalTimeInSeconds:Math.max(...e.map(e=>e.durationInSeconds+(e.extraTimeType?e.extraTimeInSeconds:0))),parallelDefaultTotalTimeInSeconds:Math.max(...e.map(e=>e.durationInSeconds+(e.defaultExtraTimeInSeconds||0)))}}(e);this.setState({sequentialTotalTimeInSeconds:a,sequentialDefaultTotalTimeInSeconds:r,parallelTotalTimeInSeconds:s,parallelDefaultTotalTimeInSeconds:l,nonDiscountedPrice:t},()=>{o===R.e.CATALOG_PRICE?(i.retailPrice=t,this.props.change(ue.d.RETAIL_PRICE,t)):o===R.e.PERCENTAGE_DISCOUNT?i.retailPrice=Object(x.b)(t,c):n>t?(i.retailPrice=t,i.percentageDiscount=0,this.props.change(ue.d.RETAIL_PRICE,i.retailPrice)):i.percentageDiscount=Object(x.a)(t,n),this.setState(i,()=>{this.updatePackageItemsList(e)})})}),s()(this,"onPricingTypeChange",e=>{var{nonDiscountedPrice:t,retailPrice:a,percentageDiscount:r}=this.state;e===R.e.CATALOG_PRICE?(this.props.change(ue.d.RETAIL_PRICE,t),this.setState({percentageDiscount:0,retailPrice:t},this.updatePackageItemsList)):e===R.e.CUSTOM_PRICE?this.props.change(ue.d.RETAIL_PRICE,a):e===R.e.FREE?this.setState({percentageDiscount:0,retailPrice:0},this.updatePackageItemsList):(this.props.change(ue.d.DISCOUNT_VALUE,100*r),this.onDiscountChange(100*r))}),s()(this,"onCustomPriceChange",e=>{var{nonDiscountedPrice:t}=this.state,a=Number(e)||0,r=Object(x.a)(t,a);this.setState({percentageDiscount:r,retailPrice:a},this.updatePackageItemsList)}),s()(this,"onDiscountChange",e=>{var{nonDiscountedPrice:t}=this.state,a=.01*e,r={percentageDiscount:a,retailPrice:Object(x.b)(t,a)};a>1&&(r.percentageDiscount=1,r.retailPrice=0),this.setState(r,this.updatePackageItemsList)}),s()(this,"goBack",()=>{Object(v.c)(S.z)}),s()(this,"updatePackageItemsList",e=>{var{percentageDiscount:t,nonDiscountedPrice:a,retailPrice:r}=this.state,n=Object(pa.a)(e||this.props.services,{percentageDiscount:t,packageNonDiscountedPrice:a,packageRetailPrice:r});e?(this.props.array.removeAll(ue.d.SERVICES),n.forEach(e=>{this.props.array.push(ue.d.SERVICES,e)}),this.props.change("__revalidate_stamp",Date.now())):n.forEach((e,t)=>{this.props.change("".concat(ue.d.SERVICES,"[").concat(t,"].retailPrice"),e.retailPrice)})}),s()(this,"deletePackage",()=>{var{id:e,name:t}=this.props.packageObject;E.a.verifyPackageDelete(e).then(a=>{var r=T()(a,"body.meta.affectedMarketingCampaignsCount",0),n=T()(a,"body.meta.affectedLocationProfiles",[]);Object(v.c)(S.N({packageId:e,mode:y.j.EDIT}),{affectedMarketingCampaigns:r,affectedLocationProfiles:n,packageName:t})})}),s()(this,"onCategorySelection",e=>{var{offerCatalogCategories:t}=this.props,a=t.find(t=>t.id===e);this.props.change(y.c.CATEGORY,{id:a.id,name:a.name})}),s()(this,"renderCategoryModal",()=>p.a.createElement(oe.a,{onCategorySelection:this.onCategorySelection})),this.state=e.packageObject?{nonDiscountedPrice:e.packageObject.nonDiscountedPrice,retailPrice:e.packageObject.retailPrice,percentageDiscount:.01*e.packageObject.percentageDiscount,sequentialTotalTimeInSeconds:e.packageObject.durationForProviderInSeconds,sequentialDefaultTotalTimeInSeconds:e.packageObject.defaultTotalTimeInSeconds,parallelTotalTimeInSeconds:e.packageObject.durationForProviderInSeconds,parallelDefaultTotalTimeInSeconds:e.packageObject.defaultTotalTimeInSeconds}:{nonDiscountedPrice:0,retailPrice:0,percentageDiscount:0,sequentialTotalTimeInSeconds:0,sequentialDefaultTotalTimeInSeconds:0,parallelTotalTimeInSeconds:0,parallelDefaultTotalTimeInSeconds:0}}componentDidUpdate(e){this.props.retailPrice!==e.retailPrice?this.onCustomPriceChange(this.props.retailPrice):this.props.percentageDiscount!==e.percentageDiscount?this.onDiscountChange(this.props.percentageDiscount):this.props.pricingType!==e.pricingType&&this.onPricingTypeChange(this.props.pricingType)}render(){var{isMatch:e,isPackageParallel:t,header:a,editMode:r,pricingType:n,isServicesRevampEnabled:c}=this.props,{nonDiscountedPrice:o,retailPrice:i,sequentialTotalTimeInSeconds:l,sequentialDefaultTotalTimeInSeconds:u,parallelTotalTimeInSeconds:d,parallelDefaultTotalTimeInSeconds:m}=this.state,b=t?{totalTimeInSeconds:d,defaultTotalTimeInSeconds:m}:{totalTimeInSeconds:l,defaultTotalTimeInSeconds:u},f=null;n!==R.e.CATALOG_PRICE&&n!==R.e.PERCENTAGE_DISCOUNT||(f=Object(N.g)(this.props.services||[]));var g=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({retailPrice:i,nonDiscountedPrice:o,priceType:f},b),h={isMatch:e,headerOnAction:this.goBack,header:a,editMode:r,submitForm:this.props.submit,submitting:this.props.submitting,onUpdateServiceList:this.onUpdateServiceList,nonDiscountedPrice:o,retailPrice:i,deletePackage:this.deletePackage,pricingType:n,packageSummary:c?p.a.createElement(Zr,g):p.a.createElement(U,g)},E=c?Kr:e?da:Yt,v=c?dn:ce;return p.a.createElement(p.a.Fragment,null,p.a.createElement(E,h),p.a.createElement(I.b,{path:S.i,component:v}),p.a.createElement(I.b,{path:S.G,component:A.a}),p.a.createElement(I.b,{path:S.p,render:this.renderCategoryModal}))}},s()(on,"propTypes",{isMatch:f.a.bool,isPackageParallel:f.a.bool,pricingType:f.a.string,services:f.a.arrayOf(f.a.object),packageObject:f.a.object,editMode:f.a.bool,header:f.a.string,percentageDiscount:f.a.number,retailPrice:f.a.number,submit:f.a.func,submitting:f.a.bool,change:f.a.func,array:f.a.shape({push:f.a.func,removeAll:f.a.func}),isServicesRevampEnabled:f.a.bool,offerCatalogCategories:f.a.array}),cn=sn))||cn)||cn)||cn;function En(){var e=o()(["New Package"]);return En=function(){return e},e}function vn(){var e=o()(["Add new package"]);return vn=function(){return e},e}function On(){var e=o()(["Edit Package"]);return On=function(){return e},e}function yn(){var e=o()(["At least two services must be added"]);return yn=function(){return e},e}var Pn=Object(m.b)((e,t)=>{var a=Object(P.h)(t),r=Object(P.e)(t),n=Object(P.d)(t);return{editMode:r===y.j.EDIT,mode:r,packageId:a,initialCategory:n?h.a.getOfferCatalogCategory(e,n):null,packageObject:h.a.getPackage(e,a),packageFormObject:h.a.getPackageFormObject(e,a),isServicesRevampEnabled:h.a.isServicesRevampEnabled(e)}})((gn=fn=class extends d.PureComponent{constructor(e){super(e),s()(this,"goBack",()=>{Object(v.c)(S.z)}),s()(this,"submitPackageForm",e=>{var{packageId:t,mode:a}=this.props;if(e[ue.d.SERVICES]&&!(e[ue.d.SERVICES].length<2))return Object(W.b)(e,{packageId:t,mode:a});E.a.addErrorToast(Object(g.c)(yn()))}),this.state={loading:!0,error:!1}}componentDidMount(){this.fetchData()}setInitialValues(){var{initialCategory:e}=this.props;this.initialValues=this.props.editMode?this.props.packageFormObject:u()(this.props.isServicesRevampEnabled?ue.j:ue.f),e&&(this.initialValues[ue.d.CATEGORY]={id:e.id,name:e.name}),this.setState({loading:!1})}fetchData(){var{editMode:e,packageId:t}=this.props;E.a.bulk([E.a.readOfferCatalog,e&&[E.a.readPackage,t]]).then(()=>{var{packageObject:t}=this.props;return!e||t&&!t.deletedAt?this.setInitialValues():this.goBack()}).catch(e=>{this.setState({loading:!1,error:e})})}render(){var{loading:e,error:t}=this.state,{editMode:a,packageObject:r,isServicesRevampEnabled:c}=this.props,o=a?Object(g.c)(On()):c?Object(g.c)(vn()):Object(g.c)(En());if(t&&c)throw t;if(e||t){var i=c?{}:{header:o,headerSecondaryAction:this.goBack};return p.a.createElement(O.a,n()({},i,{type:"white"}))}return p.a.createElement(hn,{initialValues:this.initialValues,onSubmit:this.submitPackageForm,header:o,editMode:a,packageObject:r})}},s()(fn,"propTypes",{editMode:f.a.bool,mode:f.a.string,packageId:f.a.string,packageObject:f.a.object,packageFormObject:f.a.object,location:f.a.shape({search:f.a.string}),isServicesRevampEnabled:f.a.bool,initialCategory:f.a.object}),bn=gn))||bn},DpsG:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return I}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("PhEd"),m=a("17x9"),b=a.n(m),f=a("ePPS"),g=a("dhJQ"),h=a("87zd"),E=a.n(h);function v(){var e=i()(["Save"]);return v=function(){return e},e}function O(){var e=i()(["Delete"]);return O=function(){return e},e}var y=Object(g.g)()((c=n=class extends u.PureComponent{renderContent(){var{children:e}=this.props;return d.a.createElement(p.FullScreenModalContent,null,d.a.createElement("div",{className:E.a.cards},e))}renderButtons(){var{isSaving:e,onDelete:t,onSave:a,qaDataView:r}=this.props;return[t&&d.a.createElement(p.Button,{variant:"secondary",qaType:"delete-".concat(r,"-button"),isDisabled:e,onAction:t,color:"red200"},Object(f.c)(O())),d.a.createElement(p.Button,{variant:"primary",qaType:"save-".concat(r,"-button"),isPending:e,onAction:a},Object(f.c)(v()))]}renderMobile(){var{footerSummary:e,onClose:t,title:a}=this.props;return d.a.createElement(d.a.Fragment,null,d.a.createElement(p.ModalFullScreenMobileHeader,{onClose:t,center:!0,title:a}),this.renderContent(),d.a.createElement(p.ModalFullScreenMobileFooter,{buttons:this.renderButtons()},e))}renderDesktop(){var{onClose:e,title:t}=this.props;return d.a.createElement(d.a.Fragment,null,d.a.createElement(p.ModalFullScreenDesktopHeader,{onClose:e,buttons:this.renderButtons(),title:t}),this.renderContent(t))}render(){var{isMatch:e,onClose:t}=this.props;return d.a.createElement(p.ModalFullScreen,{onClose:t,className:E.a.self},e?this.renderMobile():this.renderDesktop())}},l()(n,"propTypes",{title:m.PropTypes.string.isRequired,children:m.PropTypes.node,footerSummary:m.PropTypes.node,isSaving:m.PropTypes.bool,isMatch:m.PropTypes.bool,onClose:m.PropTypes.func.isRequired,onSave:m.PropTypes.func.isRequired,onDelete:m.PropTypes.func,qaDataView:m.PropTypes.string}),r=c))||r,P=a("TSYQ"),S=a.n(P),j=a("8+5v"),T=a.n(j);function I({children:e,className:t}){return d.a.createElement("div",{className:S()(T.a.self,t)},e)}I.propTypes={children:b.a.node,className:b.a.string}},Du07:function(e,t,a){"use strict";a.d(t,"a",(function(){return U}));var r,n=a("VkAN"),c=a.n(n),o=a("lSNA"),i=a.n(o),s=a("N1om"),l=a.n(s),u=a("sEfC"),d=a.n(u),p=a("4qC0"),m=a.n(p),b=a("mwIZ"),f=a.n(b),g=a("q1tI"),h=a.n(g),E=a("/MKj"),v=a("17x9"),O=a.n(v),y=a("Wwog"),P=a("PhEd"),S=a("nbpM"),j=a("Uvni"),T=a("/Q2I"),I=a("ePPS"),C=a("dhJQ"),k=a("IiP0"),R=a("XOD0"),N=a("Xqy3"),x=a("iA5e"),A=a("1063"),L=a("QnMy"),M=a.n(L);function w(){var e=c()(["Search categories..."]);return w=function(){return e},e}var D,_,F,q=P.ReduxForm.default({as:"div",form:"select-category-item"})(r=class extends g.PureComponent{constructor(...e){super(...e),i()(this,"propTypes",{className:v.PropTypes.string})}render(){return h.a.createElement(P.ReduxForm.SearchField,{className:this.props.className,ypos:"last",xpos:"single",name:"search-categories",placeholder:Object(I.c)(w())})}})||r;function B(){var e=c()(["Select Category"]);return B=function(){return e},e}function V(){var e=c()(["Select Category"]);return V=function(){return e},e}function G(){var e=c()(["No categories found"]);return G=function(){return e},e}var U=Object(C.g)()(D=Object(E.b)((e,t)=>{var a=Object(x.m)(t);return{resourceId:a||Object(x.h)(t),categories:S.a.getOfferCatalogCategoriesList(e),type:a?N.a.SERVICE:N.a.PACKAGE,mode:Object(x.e)(t)}},{})((F=_=class extends g.PureComponent{constructor(e){super(e),i()(this,"getCategoriesBySearch",Object(y.a)((e,t)=>{var a=t.toLowerCase();return e.filter(e=>{return t=e,r=a,["name","description"].some(e=>{var a=f()(t,e,"");return m()(a)&&a.toLowerCase().includes(r)});var t,r})})),i()(this,"goBack",()=>{var{resourceId:e,type:t,mode:a}=this.props;Object(R.b)(t===N.a.PACKAGE?A.U({packageId:e,mode:a}):A.cb({serviceId:e,mode:a}))}),i()(this,"onSelectCategory",e=>{this.props.onCategorySelection(e),this.goBack()}),i()(this,"handleInput",e=>{var t={searchInput:(e["search-categories"]||"").trim()};this.setState(t)}),i()(this,"debouncedHandleInput",d()(this.handleInput,100)),this.state={categoryId:void 0,searchInput:void 0}}renderCategories(){var{categories:e,isMatch:t}=this.props,{searchInput:a}=this.state,r=a?this.getCategoriesBySearch(e,a.trim()):e;return h.a.createElement(P.CardSection,{noPadding:!0,key:"categories"},r.length?r.map((a,r)=>h.a.createElement(P.RowButton,{hoverColor:"lightGray100",prefixBackgroundColor:"none",padding:t?"small":"large",key:a.id,rawPrefix:h.a.createElement(P.Form.ColorSample,{size:"small",value:Object(k.e)(a.appointmentColor)}),valign:"top",onAction:()=>this.onSelectCategory(a.id),qaType:"category:".concat(l()(a.name)),noBorder:e.length-1===r,leftLabel:h.a.createElement(P.Text,{type:"fresha-paragraph",color:"gray50"},a.description)},h.a.createElement(P.Text,{type:"fresha-h4",className:M.a.categoryTitle},a.name))):h.a.createElement(P.Placeholder,{iconColor:"original",icon:"shedul/image-64-placeholder-search",name:Object(I.c)(G())}))}render(){var{categoryId:e}=this.state,{isMatch:t}=this.props;return t?h.a.createElement(P.ModalFullScreen,{color:"white",className:M.a.selectServiceModal},h.a.createElement(P.ModalFullScreenMobileHeader,{center:!0,onClose:this.goBack,title:Object(I.c)(V())}),h.a.createElement(P.FullScreenModalContent,null,h.a.createElement(q,{className:M.a.searchForm,onChange:this.debouncedHandleInput}),this.renderCategories())):h.a.createElement(T.d,{isResheduleMobile:t,fullHeight:!0},h.a.createElement(P.ModalCard,{title:Object(I.c)(B()),rounded:!0,withSections:!0,scrollable:!0,onClose:this.goBack,onBack:e&&this.onSelectCategory,headerChildren:h.a.createElement(q,{onChange:this.debouncedHandleInput})},this.renderCategories()))}},i()(_,"propTypes",{categories:O.a.arrayOf(O.a.shape(j.a.propTypes)),isMatch:O.a.bool,resourceId:O.a.string,type:O.a.oneOf(Object.values(N.a)),mode:O.a.string,onCategorySelection:O.a.func}),D=F))||D)||D},EL3I:function(e,t,a){"use strict";a.d(t,"a",(function(){return Ne}));var r,n,c,o,i,s=a("pVnL"),l=a.n(s),u=a("VkAN"),d=a.n(u),p=a("lSNA"),m=a.n(p),b=a("q1tI"),f=a.n(b),g=a("TSYQ"),h=a.n(g),E=a("17x9"),v=a.n(E),O=a("ngQI"),y=a("5ZU+"),P=a("Uvni"),S=a("ePPS"),j=a("Jje6"),T=a("Xqy3"),I=a("BUUB"),C=a("QILm"),k=a.n(C),R=a("cuY2"),N=a.n(R),x=a("/MKj"),A=a("PhEd"),L=a("XOD0"),M=a("jLFJ"),w=a("TSDZ"),D=a("i6OX"),_=a("dhJQ"),F=a("Qs7Y"),q=a("WTJQ"),B=a("nbpM"),V=a("1063"),G=a("P/b4"),U=a.n(G);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(){var e=d()(["Delete Group"]);return X=function(){return e},e}function z(){var e=d()(["Delete Category"]);return z=function(){return e},e}function H(){var e=d()(["Edit Group"]);return H=function(){return e},e}function Q(){var e=d()(["Edit Category"]);return Q=function(){return e},e}function K(){var e=d()(["Add New Service"]);return K=function(){return e},e}function Z(){var e=d()(["Add New Service"]);return Z=function(){return e},e}function J(){var e=d()(["Remove existing services first to be able to delete a group"]);return J=function(){return e},e}var W,$,ee,te,ae,re,ne,ce,oe=(r=Object(_.g)(),n=Object(x.b)(e=>({isReshedulEnabled:B.a.isReshedulEnabled(e)})),Object(M.b)(c=r(c=n((i=o=class extends b.PureComponent{constructor(...e){super(...e),m()(this,"handleAddNewItem",()=>{Object(L.c)(V.Q({groupId:this.props.offerCatalogCategory.id}))}),m()(this,"handleAddNewService",()=>{Object(L.c)(V.cb({groupId:this.props.offerCatalogCategory.id}))}),m()(this,"handleEditGroup",()=>{Object(L.c)(V.P(this.props.offerCatalogCategory.id))}),m()(this,"handleDeleteGroup",()=>{var{offerCatalogCategory:e}=this.props;e.items.length>0?y.a.addErrorToast(Object(S.c)(J())):Object(L.c)(V.M(e.id))})}render(){var e=this.props,{className:t,offerCatalogCategory:a,isActive:r,isHover:n,isDisabled:c,isDragged:o,isMatch:i,hasAction:s,isReshedulEnabled:u}=e,d=k()(e,["className","offerCatalogCategory","isActive","isHover","isDisabled","isDragged","isMatch","hasAction","isReshedulEnabled"]),p=n||r||o;return f.a.createElement(j.b,l()({flex:"row",className:h()(U.a.self,{[U.a.highlight]:p},t)},d,{qaType:"offer-catalog-category-bar-".concat(a.id)}),f.a.createElement(j.b,{flex:"row",className:U.a.nameContainer},!i&&f.a.createElement(D.b,{name:"drag",size:"small",color:p?"gray-6":"gray-5",className:U.a.dragIcon}),u?f.a.createElement(A.Text,{type:"fresha-h2",className:U.a.name,qaType:"service-group-title"},a.name):f.a.createElement(F.d,{type:"group-title",className:U.a.name,qaType:"service-group-title"},a.name)),f.a.createElement(q.b,{flags:"packagesEnabled"},({packagesEnabled:e})=>f.a.createElement(w.f,{icon:w.f.ICON.OPTIONS,align:"right",shrink:0,transparent:!0,"data-qa":"service-group-options"},e?f.a.createElement(w.c,{onAction:this.handleAddNewItem,qaType:"add-item-button"},Object(S.c)(Z())):f.a.createElement(w.c,{onAction:this.handleAddNewService,qaType:"add-service-button"},Object(S.c)(K())),f.a.createElement(w.c,{onAction:this.handleEditGroup,qaType:"edit-group-button"},e?Object(S.c)(Q()):Object(S.c)(H())),f.a.createElement(w.b,{onAction:this.handleDeleteGroup,qaType:"delete-group-button"},e?Object(S.c)(z()):Object(S.c)(X())))))}},m()(o,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isDragged:v.a.bool,isMatch:v.a.bool,isReshedulEnabled:v.a.bool,offerCatalogCategory:v.a.shape(P.a.propTypes).isRequired},M.h)),c=i))||c)||c)||c),ie=a("pcRD"),se=a.n(ie),le=a("fTTP"),ue=a("K6DH"),de=a("Yvnt"),pe=a("jwng"),me=a("KvEn"),be=a("LpzX"),fe=a("1Ggn"),ge=a("r47z"),he=a.n(ge),Ee=Object(x.b)(e=>({isReshedulEnabled:B.a.isReshedulEnabled(e)}))((ee=$=class extends b.PureComponent{render(){var e=this.props,{variant:{name:t,durationInSeconds:a,nonDiscountedPrice:r,retailPrice:n,description:c,priceType:o},isMatch:i,secondary:s,isReshedulEnabled:u}=e,d=k()(e,["variant","isMatch","secondary","isReshedulEnabled"]),p=Object(pe.l)(a),{price:m,oldPrice:b}=Object(be.a)(r,n);return f.a.createElement(j.b,l()({className:he.a.pricingBar},d,{qaType:"item-variant-bar"}),i?f.a.createElement(f.a.Fragment,null,f.a.createElement(j.b,{key:"mobileLeftColumn",flex:"column",grow:1,className:he.a.nameColumn},u?f.a.createElement(A.Text,{type:"fresha-h4",className:he.a.serviceName,qaType:"offer-catalog-menu-item-name"},t||p):f.a.createElement(F.d,{type:t?"fresh-title-item-name":"title-item-name",className:he.a.serviceName,qaType:"offer-catalog-menu-item-name"},t||p),t&&(u?f.a.createElement(A.Text,{type:"fresha-caption",color:"gray50",qaType:"service-duration-mobile"},c?"".concat(c,", ").concat(p):p):f.a.createElement(F.d,{type:"body-2",qaType:"service-duration-mobile"},c?"".concat(c,", ").concat(p):p))),f.a.createElement(j.b,{key:"mobileRightColumn",grow:1,shrink:0,textAlign:"right"},u?f.a.createElement(A.Text,{type:"fresha-h4",color:"gray100",qaType:"service-retail-price"},f.a.createElement(me.a,{price:m,priceType:o,withTopLabel:!0,enableFromFree:!0})):f.a.createElement(F.d,{type:"fresh-title-item-name",qaType:"service-retail-price"},f.a.createElement(me.a,{price:m,priceType:o,withTopLabel:!0})),u?f.a.createElement(A.Text,{type:"fresha-caption",color:"gray50",className:he.a.oldPrice,qaType:"non-discounted-price"},b&&f.a.createElement(me.a,{price:b})):f.a.createElement(F.d,{type:"body-2",className:he.a.oldPrice,qaType:"non-discounted-price"},b&&f.a.createElement(me.a,{price:b})))):f.a.createElement(f.a.Fragment,null,f.a.createElement(j.b,{key:"desktopLeftColumn",flex:"row",grow:1,className:he.a.nameColumn},f.a.createElement(j.b,{flex:"column",grow:1},u?f.a.createElement(A.Text,{type:s?"fresha-caption":"fresha-h4",className:h()(he.a.serviceName,{[he.a.serviceNameSecondary]:s}),qaType:s?"service-pricing-level-name":"offer-catalog-menu-item-name",color:s?"gray50":"gray100"},t):f.a.createElement(F.d,{type:"fresh-title-item-name",className:h()(he.a.serviceName,{[he.a.serviceNameSecondary]:s}),qaType:s?"service-pricing-level-name":"offer-catalog-menu-item-name"},t),c&&f.a.createElement(F.d,{type:"body-2"},c)),u?f.a.createElement(A.Text,{type:"fresha-caption",color:"gray50",className:he.a.duration,qaType:"service-duration"},p):f.a.createElement(F.d,{type:"title-item-name",className:he.a.duration,qaType:"service-duration"},p)),f.a.createElement(j.b,{key:"desktopRightColumn",flex:"row-reverse",grow:0,shrink:0,textAlign:"right"},u?f.a.createElement(A.Text,{type:"fresha-h4",className:he.a.newPrice,qaType:"service-retail-price"},f.a.createElement(me.a,{price:m,priceType:o,enableFromFree:!0})):f.a.createElement(F.d,{type:"fresh-title-item-name",className:he.a.newPrice,qaType:"service-retail-price"},f.a.createElement(me.a,{price:m,priceType:o})),u?f.a.createElement(A.Text,{type:"fresha-caption",color:"gray50",className:he.a.oldPrice,qaType:"non-discounted-price"},b&&f.a.createElement(me.a,{price:b})):f.a.createElement(F.d,{type:"title-item-name",className:he.a.oldPrice,qaType:"non-discounted-price"},b&&f.a.createElement(me.a,{price:b})))))}},m()($,"propTypes",{variant:v.a.shape({name:v.a.string,description:v.a.string,durationInSeconds:v.a.number,nonDiscountedPrice:v.a.oneOfType([v.a.string,v.a.number]),retailPrice:v.a.oneOfType([v.a.string,v.a.number]),priceType:v.a.oneOf(Object.values(fe.a))}).isRequired,isMatch:v.a.bool,secondary:v.a.bool,isReshedulEnabled:v.a.bool}),W=ee))||W;function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Oe=(te=Object(_.g)(),ae=Object(x.b)(e=>({isReshedulEnabled:B.a.isReshedulEnabled(e)})),te(re=Object(M.b)(re=ae((ce=ne=class extends b.PureComponent{renderSinglePricingLevel(){var{offerCatalogMenuItem:e,isHover:t,isActive:a,isMatch:r}=this.props,n=f.a.createElement(Ee,{variant:e,grow:1,isMatch:r});return f.a.createElement(j.b,{className:he.a.content,qaType:"service-bar"},r?n:f.a.createElement(j.b,{flex:"row",alignItems:"center",grow:1},f.a.createElement(D.b,{name:"drag",size:"small",color:t||a?"gray-6":"gray-5",className:he.a.dragIcon}),n))}renderMultiplePricingLevels(){var{offerCatalogMenuItem:{name:e,variants:t},isHover:a,isActive:r,isMatch:n,isReshedulEnabled:c}=this.props,o=c?f.a.createElement(A.Text,{type:"fresha-h4",qaType:"offer-catalog-menu-item-name"},e):f.a.createElement(F.d,{type:"fresh-title-item-name",qaType:"offer-catalog-menu-item-name"},e);return f.a.createElement(j.b,{className:he.a.content},n?o:f.a.createElement(j.b,{flex:"row",alignItems:"center"},f.a.createElement(D.b,{name:"drag",size:"small",color:a||r?"gray-6":"gray-5",className:he.a.dragIcon}),o),f.a.createElement(j.b,{className:he.a.splContainer,qaType:"price-level-container"},t.map(e=>f.a.createElement(Ee,{key:e.id,qaType:"offer-catalog-item-".concat(e.id),variant:e,isMatch:n,secondary:!0}))))}render(){var e=this.props,{className:t,color:a,offerCatalogMenuItem:{variants:r},offerCatalogMenuItem:n,isActive:c,isHover:o,isDisabled:i,isDragged:s,isMatch:u,hasAction:d}=e,p=k()(e,["className","color","offerCatalogMenuItem","offerCatalogMenuItem","isActive","isHover","isDisabled","isDragged","isMatch","hasAction"]),m=r&&r.length>1;return f.a.createElement(j.b,l()({className:h()(he.a.self,t,{[he.a.hover]:o||s,[he.a.active]:c}),qaType:"menu-item-".concat(n.id)},p),f.a.createElement(de.a,{color:a}),m?this.renderMultiplePricingLevels():this.renderSinglePricingLevel())}},m()(ne,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({color:v.a.string,isDragged:v.a.bool,service:v.a.shape(ue.a.propTypes),isMatch:v.a.bool,isReshedulEnabled:v.a.bool},M.h)),re=ce))||re)||re)||re),ye=a("Nsgx");class Pe extends b.PureComponent{constructor(...e){super(...e),m()(this,"editCatalogItem",()=>{var{offerCatalogMenuItem:{item:e}}=this.props;switch(e.type){case"service":Object(L.c)(Object(V.cb)({mode:"edit",serviceId:e.id}));break;case"package":Object(L.c)(Object(V.U)({mode:"edit",packageId:e.id}))}})}render(){var{color:e,draggableId:t,readonly:a,offerCatalogMenuItem:r}=this.props;return f.a.createElement(O.b,{draggableId:"".concat(T.d.MENU_ITEM).concat(r.id),index:t,isDragDisabled:a,type:T.e.MENU_ITEM},(t,a)=>f.a.createElement(j.b,{className:he.a.listItem},f.a.createElement(j.b,l()({className:he.a.dragHandle,selfRef:t.innerRef},t.draggableProps,t.dragHandleProps),f.a.createElement(Oe,{offerCatalogMenuItem:r,color:e,isDragged:a.isDragging,onAction:this.editCatalogItem,propagateEvents:!0}))))}}m()(Pe,"propTypes",{color:v.a.string,draggableId:v.a.number,readonly:v.a.bool,offerCatalogMenuItem:v.a.shape(ye.b)});class Se extends b.PureComponent{render(){var{color:e,readonly:t,items:a}=this.props;return f.a.createElement(j.b,null,a.map((a,r)=>f.a.createElement(Pe,{color:e,draggableId:r,readonly:t,offerCatalogMenuItem:a,key:a.id})))}}m()(Se,"propTypes",{color:v.a.string,readonly:v.a.bool,items:v.a.arrayOf(v.a.shape(le.a.propTypes))});class je extends b.PureComponent{render(){var{hasItems:e,readonly:t,offerCatalogCategory:a}=this.props;return f.a.createElement(O.c,{droppableId:a.id,type:T.e.MENU_ITEM,isDropDisabled:t},(r,n)=>f.a.createElement(j.b,l()({className:h()(se.a.list,{[se.a.emptyList]:!e,[se.a.draggedOver]:n.isDraggingOver}),selfRef:r.innerRef},r.droppableProps),f.a.createElement(Se,{color:a.appointmentColor,items:a.items,readonly:t}),r.placeholder))}}m()(je,"propTypes",{hasItems:v.a.bool,readonly:v.a.bool,offerCatalogCategory:v.a.shape(P.a.propTypes)});class Te extends b.PureComponent{render(){var{draggableId:e,hideItems:t,readonly:a,offerCatalogCategory:r}=this.props,n=r.items&&r.items.length>0;return f.a.createElement(O.b,{type:T.e.CATEGORY,draggableId:"".concat(T.d.CATEGORY).concat(r.id),index:e,isDragDisabled:a},(e,c)=>f.a.createElement(j.b,l()({className:h()(se.a.draggable,{[se.a.dragged]:c.isDragging}),selfRef:e.innerRef},e.draggableProps,e.dragHandleProps),f.a.createElement(oe,{className:h()({[se.a.empty]:!n}),offerCatalogCategory:r,isDragged:c.isDragging,propagateEvents:!0}),f.a.createElement(N.a,{height:t?0:"auto",duration:500},f.a.createElement(je,{hasItems:n,offerCatalogCategory:r,readonly:a}))))}}m()(Te,"propTypes",{draggableId:v.a.number,hideItems:v.a.bool,readonly:v.a.bool,offerCatalogCategory:v.a.shape(P.a.propTypes)});class Ie extends b.PureComponent{render(){var e=this.props,{offerCatalogOrder:t}=e,a=k()(e,["offerCatalogOrder"]);return f.a.createElement(j.b,null,t.map((e,t)=>f.a.createElement(Te,l()({offerCatalogCategory:e,key:e.id,draggableId:t},a))))}}m()(Ie,"propTypes",{offerCatalogOrder:v.a.arrayOf(v.a.shape(P.a.propTypes))});var Ce=a("mU7L");function ke(){var e=d()(["Service position couldn't be changed. Please try again later"]);return ke=function(){return e},e}function Re(){var e=d()(["Service group position couldn't be changed. Please try again later"]);return Re=function(){return e},e}class Ne extends b.PureComponent{constructor(e){super(e),m()(this,"handleDragEnd",e=>{var{offerCatalogOrder:t}=this.state;if(e.destination){var a=Object(Ce.a)(e,t);a&&this.setState({offerCatalogOrder:a}),this.updatingListOrder=!0,Object(I.f)(e,this.props.offerCatalogMenu).then(()=>y.a.readOfferCatalogMenu()).catch(()=>{y.a.addErrorToast(e.type===T.e.CATEGORY?Object(S.c)(Re()):Object(S.c)(ke())),this.setState({offerCatalogOrder:this.initialOrder})}).finally(()=>{this.updatingListOrder=!1})}}),this.state=this.deriveStateFromProps(e),this.updatingListOrder=!1}UNSAFE_componentWillReceiveProps(e){if(e.offerCatalogMenu!==this.props.offerCatalogMenu&&!this.updatingListOrder){var t=this.deriveStateFromProps(e);this.setState(t)}}deriveStateFromProps(e){return this.initialOrder=[].concat(e.offerCatalogMenu),{offerCatalogOrder:this.initialOrder}}render(){var{hideItems:e,mobile:t}=this.props,{offerCatalogOrder:a}=this.state;return f.a.createElement(O.a,{onDragEnd:this.handleDragEnd},f.a.createElement(j.b,{className:U.a.listContainer},f.a.createElement(O.c,{droppableId:"desktop-service-group-list",type:T.e.CATEGORY,isDropDisabled:t},r=>f.a.createElement(j.b,l()({className:h()(U.a.list,{[U.a.hideItems]:e}),selfRef:r.innerRef},r.droppableProps),f.a.createElement(Ie,{hideItems:e,readonly:t,offerCatalogOrder:a}),r.placeholder))))}}m()(Ne,"propTypes",{hideItems:v.a.bool,mobile:v.a.bool,offerCatalogMenu:v.a.arrayOf(v.a.shape(P.a.propTypes))})},"H/64":function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("/MKj"),f=a("5ZU+"),g=a("nbpM"),h=a("XOD0"),E=a("ePPS"),v=a("IiP0"),O=a("/Q2I"),y=a("3wSE"),P=a("kZhr"),S=a("BUUB"),j=a("1063"),T=a("8mxr");function I(){var e=i()(["Save"]);return I=function(){return e},e}function C(){var e=i()(["New service group"]);return C=function(){return e},e}function k(){var e=i()(["New category"]);return k=function(){return e},e}function R(){var e=i()(["Service Group"]);return R=function(){return e},e}function N(){var e=i()(["Category"]);return N=function(){return e},e}var x=Object(b.b)(e=>({packagesEnabled:g.a.isPackagesEnabled(e)}),{createCategory:S.b,submitForm:T.e})((c=n=class extends u.PureComponent{constructor(...e){super(...e),l()(this,"state",{submitting:!1}),l()(this,"handleSubmit",e=>{this.setState({submitting:!0});var t=this.props.packagesEnabled?Object(E.c)(N()):Object(E.c)(R());return this.props.createCategory(e).then(()=>{f.a.addGlobalSuccessToast(Object(E.c)("%{categoryName} created",{categoryName:t})),Object(h.b)(j.z)}).catch(e=>{Object(P.ib)(e,{fields:[{code:"name-not-unique",field:"name",message:Object(E.c)("%{categoryName} name should be unique",{categoryName:t})}],globalMessage:Object(E.c)("%{categoryName} couldn't be created, please try again later",{categoryName:t})})}).finally(()=>{this.setState({submitting:!1})})})}render(){var{packagesEnabled:e}=this.props,t=e?Object(E.c)(k()):Object(E.c)(C());return d.a.createElement(O.i,{size:"small"},d.a.createElement(O.g,{linkTo:j.z},t),d.a.createElement(O.c,{noPadding:!0},d.a.createElement(T.d,{onSubmit:this.handleSubmit,initialValues:{[T.a]:v.a},packagesEnabled:e})),d.a.createElement(O.e,null,d.a.createElement(y.f,{isPending:this.state.submitting,onAction:this.props.submitForm,basis:"50%",grow:1,qaType:"save-category"},Object(E.c)(I()))))}},l()(n,"propTypes",{submitForm:m.a.func,createCategory:m.a.func,packagesEnabled:m.a.bool}),r=c))||r},ILui:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var r=a("pVnL"),n=a.n(r),c=a("QILm"),o=a.n(c),i=a("lSNA"),s=a.n(i),l=a("q1tI"),u=a.n(l),d=a("17x9"),p=a.n(d),m=a("TSYQ"),b=a.n(m),f=a("fJus"),g=a("Jje6"),h=a("7TQR"),E=a.n(h),v={VERTICAL:"vertical",HORIZONTAL:"horizontal"};class O extends l.PureComponent{render(){var e=this.props,{className:t,type:a,color:r,withMargin:c,inForm:i}=e,s=o()(e,["className","type","color","withMargin","inForm"]),l=a===v.HORIZONTAL;return u.a.createElement(g.b,n()({className:b()(E.a.self,{[E.a.horizontal]:l,[E.a.vertical]:!l,[E.a.withMargin]:c,[E.a.inForm]:i},t)},s),u.a.createElement(g.b,{className:b()(E.a.line,E.a["color-".concat(r)])}))}}s()(O,"TYPES",v),s()(O,"propTypes",{className:p.a.string,type:p.a.oneOf(Object.values(v)),color:p.a.oneOf(Object(f.f)(E.a,"color-")),withMargin:p.a.bool,inForm:p.a.bool}),s()(O,"defaultProps",{color:"gray-3",type:v.HORIZONTAL})},ITHA:function(e,t,a){"use strict";a.d(t,"e",(function(){return O})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return L})),a.d(t,"a",(function(){return _})),a.d(t,"d",(function(){return V}));var r=a("QILm"),n=a.n(r),c=a("lSNA"),o=a.n(c),i=a("q1tI"),s=a.n(i),l=a("17x9"),u=a.n(l),d=a("TSYQ"),p=a.n(d),m=a("FAYg"),b=a("sF8u"),f=a("OEHH"),g=a.n(f),h=Object(b.a)(g.a.slideChildren),E=a("l22p"),v=a.n(E);class O extends i.PureComponent{render(){var e,t=this.props,{className:a,children:r}=t,c=n()(t,["className","children"]);return!m.DISABLE_QA_TYPE&&c.qaType&&({qaType:e}=c),s.a.createElement("ul",{"data-qa":e,className:p()(v.a.self,a)},r)}}o()(O,"propTypes",{className:u.a.string,qaType:u.a.string,children:u.a.node.isRequired});var y=h(O),P=a("pVnL"),S=a.n(P),j=a("Puqe"),T=a.n(j),I=a("fJus"),C=a("jLFJ"),k=a("Jje6"),R=a("RLZt"),N=a.n(R),x=["isDisabled","isPending","isComplete","onAction"],A=e=>{var{secondaryActionClassName:t,secondaryAction:a,isActive:r,isHover:c,className:o,children:i,color:l}=e,u=n()(e,["secondaryActionClassName","secondaryAction","isActive","isHover","className","children","color"]),d=p()(N.a.self,{[N.a.hover]:c&&!u.disabled,[N.a.active]:r,[N.a.color]:l,[N.a["color-".concat(l)]]:l},o);return s.a.createElement(k.b,S()({as:"li",className:d},T()(u,x)),s.a.createElement("div",{className:N.a.label},i),a&&s.a.createElement("div",{className:p()(N.a.secondaryAction,t)},a))};A.propTypes={secondaryActionClassName:u.a.string,secondaryAction:u.a.node,className:u.a.string,disabled:u.a.bool,isActive:u.a.bool,isHover:u.a.bool,isPending:u.a.bool,isComplete:u.a.bool,onAction:u.a.func,children:u.a.node,color:u.a.oneOf(Object(I.f)(N.a,"color-"))};var L=Object(C.d)(A),M=a("Z5Oz"),w=a.n(M),D=e=>{var{children:t}=e;return s.a.createElement(k.b,{as:"li",className:w.a.self},s.a.createElement(k.b,null,t))};D.propTypes={children:u.a.node};var _=D,F=a("DoZe"),q=a.n(F),B=({children:e})=>s.a.createElement("span",{className:q.a.self},e);B.propTypes={children:u.a.node.isRequired};var V=B},Imp1:function(e,t,a){"use strict";var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("mwIZ"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("wSuE"),f=a("/MKj"),g=a("17x9"),h=a.n(g),E=a("Ty5D"),v=a("q9fD"),O=a("XOD0"),y=a("ePPS"),P=a("nbpM"),S=a("5ZU+"),j=a("eAqY"),T=a("dhJQ"),I=a("kZhr"),C=a("Jje6"),k=a("BUUB"),R=a("iA5e"),N=a("1063"),x=a("3wSE"),A=a("/Q2I"),L=a("ZO1O"),M=a("SFs4"),w=a("Qs7Y"),D=a("NFlB");function _(){var e=i()(["Delete"]);return _=function(){return e},e}function F(){var e=i()(["Close"]);return F=function(){return e},e}function q(){var e=i()(["To delete this service, you must first remove it from the below package(s):"]);return q=function(){return e},e}function B(){var e=i()(["Delete Service"]);return B=function(){return e},e}function V(){var e=i()(["Cannot Delete Service"]);return V=function(){return e},e}function G(){var e=i()(["Service couldn't be deleted, please try again later"]);return G=function(){return e},e}function U(){var e=i()(["Service deleted"]);return U=function(){return e},e}function Y(){var e=i()(["Are you sure you want to delete this service?"]);return Y=function(){return e},e}var X=Object(y.c)(Y()),z=Object(T.g)()(r=Object(f.b)((e,t)=>({service:Object(R.j)(e,t)}),{})((c=n=class extends p.PureComponent{constructor(e){super(e),l()(this,"handleInvalidOpen",e=>{e.service||Object(O.f)(N.z)}),l()(this,"handleDelete",()=>{var{service:e}=this.props;return Object(k.c)(e.id,{confirmResetMarketingCampaigns:this.displayCampaignsNote,confirmOfflineLocationProfiles:this.displayOfflineProfilesNote}).then(()=>{S.a.addGlobalSuccessToast(Object(y.c)(U())),Object(O.f)(N.z)}).catch(()=>{this.handleClose(),S.a.addErrorToast(Object(y.c)(G()))})}),l()(this,"handleClose",()=>{var{service:e}=this.props;return this.displayPackagesNote?Object(O.f)(N.z):Object(O.b)(N.cb({serviceId:e.id,mode:"edit"}))}),this.affectedPackages=d()(this.props,"location.state.affectedPackages"),this.displayPackagesNote=this.affectedPackages.length>0,this.affectedMarketingCampaigns=d()(this.props,"location.state.affectedMarketingCampaigns"),this.displayCampaignsNote=!this.displayPackagesNote&&this.affectedMarketingCampaigns>0,this.affectedLocationProfiles=d()(this.props,"location.state.affectedLocationProfiles"),this.displayOfflineProfilesNote=!this.displayPackagesNote&&this.affectedLocationProfiles.length>0,this.handleInvalidOpen(e)}UNSAFE_componentWillReceiveProps(e){this.handleInvalidOpen(e)}render(){var{isMatch:e,service:t}=this.props;return m.a.createElement(A.i,{size:"small",qaType:"delete-service-modal"},m.a.createElement(A.g,{onClose:this.handleClose,subheader:e&&X,noBottomPadding:!0},this.displayPackagesNote?Object(y.c)(V()):Object(y.c)(B())),m.a.createElement(A.c,{onlyBottomPadding:!0},!this.displayPackagesNote&&!e&&m.a.createElement(L.d,{type:"mobile modal noBottomPadding"},m.a.createElement(w.d,{qaType:"delete-service-modal-text"},X)),this.displayPackagesNote&&m.a.createElement(M.b,{icon:"light-bulb-yellow",qaType:"delete-service-warning-note",title:Object(y.c)("Service %{name} can't be deleted",{name:t.name}),description:m.a.createElement(m.a.Fragment,null,Object(y.c)(q()),m.a.createElement(C.b,{as:"ul",qaType:"packages-list"},this.affectedPackages.map((e,t)=>m.a.createElement(C.b,{as:"li",key:t},e.name))))}),this.displayCampaignsNote&&m.a.createElement(M.b,{icon:"light-bulb-yellow",qaType:"delete-service-warning-note",title:Object(y.c)("Service %{name} will be deleted",{name:t.name}),description:Object(y.c)("%{affectedMarketingCampaigns} of your Smart Campaigns will be paused",{affectedMarketingCampaigns:this.affectedMarketingCampaigns})}),this.displayOfflineProfilesNote&&m.a.createElement(D.a,{affectedLocationProfiles:this.affectedLocationProfiles})),m.a.createElement(A.e,{noPadding:!0},m.a.createElement(A.b,null,this.displayPackagesNote?m.a.createElement(x.f,{onAction:this.handleClose,qaType:"delete-service-close-button"},Object(y.c)(F())):m.a.createElement(x.g,{onAction:this.handleDelete,withPending:!0,qaType:"delete-service-confirm-button"},Object(y.c)(_())))))}},l()(n,"propTypes",{service:h.a.object,isMatch:h.a.bool}),r=c))||r)||r,H=a("pVnL"),Q=a.n(H),K=a("QILm"),Z=a.n(K),J=a("PhEd"),W=a("ANjH"),$=a("rzky"),ee=()=>Object(I.I)($.e,$.d.SERVICE_PRICING_LEVELS,$.a),te=()=>Object(I.H)($.e,$.d.SERVICE_PRICING_LEVELS),ae=(e,t)=>Object(I.K)($.e,$.d.SERVICE_PRICING_LEVELS,e,1,t),re=e=>Object(I.J)($.e,$.d.SERVICE_PRICING_LEVELS,e),ne=e=>Object(I.jb)($.e,"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.DURATION),"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.SERVICE_PRICING_NAME),"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.PRICE),"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.PRICE_TYPE),"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.SPECIAL_PRICE)),ce=a("vMAe"),oe=a("1Ggn"),ie=a("jwng"),se=a("KvEn"),le=a("4r8K");function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(){var e=i()(["Special price must be lower than retail price"]);return pe=function(){return e},e}var me={NAME:I.kb.maxLength(30),DURATION:I.kb.required($.c.DURATION),PRICE:I.kb.rangeOfNumbers($.c.PRICE,0,1e8,!0),PRICE_NOT_REQUIRED:I.kb.rangeOfNumbers($.c.PRICE,0,1e8,!1),SPECIAL_PRICE:I.kb.rangeOfNumbers($.c.SPECIAL_PRICE,0,1e8,!1)},be=(e,t,a)=>a!==oe.a.FREE&&(me.SPECIAL_PRICE(t)||(t||0===t)&&Object(le.b)(e)<=Object(le.b)(t)&&Object(y.c)(pe()));function fe(e){var{servicePricingLevels:t}=e,a=t.map(e=>{var t=e[$.d.SPECIAL_PRICE],a=e[$.d.PRICE_TYPE],r=e[$.d.PRICE],n=e[$.d.EMPLOYEE_OVERRIDES]||{},c={},o=!1,i=Object.keys(n).reduce((t,a)=>{var r=((e,t)=>{var a=t.priceType||e.priceType,r=a===oe.a.FREE,n=r?void 0:me.PRICE_NOT_REQUIRED(t.price),c=t.price||e.price,o=r?void 0:be(c,t.specialPrice,a);if(o||n)return{[$.d.SPECIAL_PRICE]:o,[$.d.PRICE]:n}})(e,n[a]);return r?(o=!0,de(de({},t),{},{[a]:r})):t},{});o&&(c[$.d.EMPLOYEE_OVERRIDES]=i);var s=a===oe.a.FREE?void 0:me.PRICE(r),l=be(r,t,a);return(s||l)&&(c[$.d.PRICE]=s,c[$.d.SPECIAL_PRICE]=l),c});return{[$.d.SERVICE_PRICING_LEVELS]:a}}var ge=a("8Z4d"),he=a.n(ge);function Ee(){var e=i()(["Price"]);return Ee=function(){return e},e}function ve(){var e=i()(["Price"]);return ve=function(){return e},e}function Oe(){var e=i()(["Special price"]);return Oe=function(){return e},e}function ye(){var e=i()(["Price type"]);return ye=function(){return e},e}function Pe(){var e=i()(["Duration"]);return Pe=function(){return e},e}function Se(){var e=i()(["Edit"]);return Se=function(){return e},e}var je=({formValues:e,splId:t,employees:a,mode:r,groupId:n,serviceId:c})=>{var o=e[$.d.SERVICE_PRICING_LEVELS][t],i=d()(fe(e),"servicePricingLevels[".concat(t,"].employeeOverrides"),{});return a.map(e=>{var a,s="p:".concat(e.id),l=d()(o,"employeeOverrides[".concat(s,"]")),u=Object.values(i[s]||{}),p=u.length>0,{price:b=o.price,priceType:f=o.priceType,specialPrice:g}=l||o,{duration:h}=o,E=Object(ie.l)(h,"m"),v="lightgray";l&&(v="blue",a="blue"),p&&(v="red",a="red");var O=N.J({pricingLevelId:t,mode:r,serviceId:c,groupId:n,employeeId:e.id});return m.a.createElement("div",null,m.a.createElement(J.Card,{rounded:!0,color:v,borderColor:v,noShadow:!0,withSections:!0,withBorder:!!a},m.a.createElement(J.CardSection,{className:he.a.cardHeader},m.a.createElement(J.UserPreview,{firstName:e.firstName,lastName:e.lastName,url:e.avatar&&e.avatar.thumbUrl}),m.a.createElement(J.Link,{linkTo:O},Object(y.c)(Se()))),m.a.createElement(J.CardSection,{className:he.a.mobileServicePricingCards},m.a.createElement(J.Text,{type:"fresha-h5"},Object(y.c)(Pe())),m.a.createElement(J.Text,{type:"fresha-paragraph"},E),m.a.createElement(J.Text,{type:"fresha-h5"},Object(y.c)(ye())),m.a.createElement(J.Text,{type:"fresha-paragraph"},oe.c[f]),m.a.createElement(J.Text,{type:"fresha-h5"},g?Object(y.c)(Oe()):Object(y.c)(ve())),Number.isNaN(Number(g||b))?m.a.createElement(J.Text,{type:"fresha-paragraph"},"-"):m.a.createElement(se.a,{isReshedulEnabled:!0,price:g||b,type:"fresha-caption",bold:!0}),g&&!Number.isNaN(Number(b))&&m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Text,{type:"fresha-h5"},Object(y.c)(Ee())),m.a.createElement(se.a,{isReshedulEnabled:!0,price:b,type:"fresha-caption",bold:!0,strikethrough:!0})))),p&&m.a.createElement(J.Text,{className:he.a.errorMessage,type:"fresha-caption",color:"red200"},u))})},Te=a("N1om"),Ie=a.n(Te),Ce=a("pKoe");function ke(){var e=i()(["Set price by staff"]);return ke=function(){return e},e}function Re(){var e=i()(["e.g. Long hair"]);return Re=function(){return e},e}function Ne(){var e=i()(["Default pricing options"]);return Ne=function(){return e},e}var xe=({formValues:e,splId:t,employees:a,currencySymbol:r,defaultValues:n})=>m.a.createElement(m.a.Fragment,null,m.a.createElement(J.CardSection,null,m.a.createElement(J.Form.SectionHeader,{xpos:"single",title:Object(y.c)(Ne()),titleType:"fresha-h3"}),m.a.createElement("div",{className:he.a.defaultsSection},m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.SERVICE_PRICING_NAME),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.DURATION),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.PRICE_TYPE),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.PRICE),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100",optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)")},$.c.SPECIAL_PRICE),m.a.createElement(J.ReduxForm.TextField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.SERVICE_PRICING_NAME),optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)"),placeholder:Object(y.c)(Re()),xpos:"single",ypos:"last"}),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.DURATION),normalize:Number,xpos:"single",ypos:"last"},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e/60},t))),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.PRICE_TYPE),xpos:"single",ypos:"last"},oe.b.map(e=>m.a.createElement("option",{key:e,value:e},oe.c[e]))),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.PRICE),placeholder:"0.00",currencySymbol:r,disabled:n[$.d.PRICE_TYPE]===oe.a.FREE,xpos:"single",ypos:"last"}),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.SPECIAL_PRICE),optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)"),placeholder:"0.00",currencySymbol:r,disabled:n[$.d.PRICE_TYPE]===oe.a.FREE,allowEmpty:!0,xpos:"single",ypos:"last"}))),m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.Form.SectionHeader,{xpos:"single",title:Object(y.c)(ke()),titleType:"fresha-h3"}),m.a.createElement(J.Card,{rounded:!0,padding:"horizontal-16",color:"lightgray",noShadow:!0},m.a.createElement("div",{className:he.a.labelsRow},m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.PRICE_TYPE),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.PRICE),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100",optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)")},$.c.SPECIAL_PRICE)),m.a.createElement("div",{className:he.a.employeeRow},a.map(({id:a,firstName:c,title:o,lastName:i,avatar:s})=>{var l=Object(ce.d)(e,t,a);return m.a.createElement(m.a.Fragment,{key:a},m.a.createElement(J.UserPreview,{firstName:c,lastName:i,url:s&&s.thumbUrl,title:o}),m.a.createElement("div",null),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.EMPLOYEE_OVERRIDES,"[p:").concat(a,"].").concat($.d.PRICE_TYPE),xpos:"single",ypos:"last",required:!0,qaType:Ie()("".concat(c,"-").concat(i,"-price-type"))},m.a.createElement("option",{value:"",selected:!0},Object(y.c)("%{pricingOption} (default)",{pricingOption:n.priceTypeText})),oe.b.map(e=>m.a.createElement("option",{key:e,value:e},oe.c[e]))),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.EMPLOYEE_OVERRIDES,"[p:").concat(a,"].").concat($.d.PRICE),placeholder:n.price,currencySymbol:r,allowEmpty:!0,disabled:l===oe.a.FREE,xpos:"single",ypos:"last",qaType:Ie()("".concat(c,"-").concat(i,"-price"))}),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"].").concat($.d.EMPLOYEE_OVERRIDES,"[p:").concat(a,"].").concat($.d.SPECIAL_PRICE),placeholder:n.specialPrice,currencySymbol:r,allowEmpty:!0,disabled:l===oe.a.FREE,xpos:"single",ypos:"last",qaType:Ie()("".concat(c,"-").concat(i,"-special-price"))}))})))));xe.propTypes={formValues:h.a.object,splId:h.a.string,employees:h.a.array,currencySymbol:h.a.string,defaultValues:h.a.object};var Ae=xe;function Le(){var e=i()(["Reset overrides to defaults"]);return Le=function(){return e},e}function Me(){var e=i()(["Close"]);return Me=function(){return e},e}function we(){var e=i()(["Reset all overrides to defaults"]);return we=function(){return e},e}function De(){var e=i()(["Advanced pricing options"]);return De=function(){return e},e}var _e=e=>{var{formValues:t,splId:a,employees:r,currencySymbol:n,isMobile:c}=e,o=Z()(e,["formValues","splId","employees","currencySymbol","isMobile"]),i=Object(ce.c)(t,a);return c?m.a.createElement(je,Q()({defaultValues:i,formValues:t,splId:a,employees:r},o)):m.a.createElement(Ae,Q()({defaultValues:i,formValues:t,splId:a,employees:r,currencySymbol:n},o))};_e.propTypes={formValues:h.a.object,splId:h.a.string,employees:h.a.array,currencySymbol:h.a.string,isMobile:h.a.bool};var Fe=Object(I.r)({formName:$.e,name:"".concat($.d.SERVICE_PRICING_LEVELS),size:"extra-large",header:Object(y.c)(De()),content:m.a.createElement(_e,null),cacheFieldArray:!0,contentWithSections:!0});function qe(e){return m.a.createElement(Fe,Q()({},e,{validate:(t,a,r={})=>!!((e={},t,a)=>{var r;return a?0===Object.keys((null===(r=e[t])||void 0===r?void 0:r[$.d.EMPLOYEE_OVERRIDES])||{}).length:0===Object.keys(e[t]||{}).length})(r.servicePricingLevels,e.splId,e.isMobile)||(e.touchAllFieldsInForm(e.splId),!1),forceMobile:e.isMobile,hideCloseIcon:e.isMobile,redesignedModal:!0,links:m.a.createElement(J.Link,{href:"#",onAction:e.resetSplOverrides,qaType:"reset-all-overrides-button"},Object(y.c)(we())),headerRightContent:m.a.createElement(J.DropdownMenuIcon,{icon:J.DropdownMenuIcon.ICON.OPTIONS,iconSize:16,buttonColor:"lightGray200",variant:"button",align:"right",closeActionText:Object(y.c)(Me())},m.a.createElement(J.DropdownAction,{onAction:e.resetSplOverrides},Object(y.c)(Le())))}))}qe.propTypes={resetSplOverrides:h.a.func,touchAllFieldsInForm:h.a.func,splId:h.a.string,isMobile:h.a.bool};var Be,Ve,Ge,Ue=Object(W.d)(Object(f.b)((e,t)=>{var a=P.a.getEmployeeList(e).filter(e=>e.providesServices);return{splId:Object(R.n)(t),serviceId:Object(R.m)(t),mode:Object(R.e)(t),groupId:Object(R.d)(t),employees:a,currencySymbol:P.a.getCurrencySymbol(e)}},(e,t)=>({touchAllFieldsInForm:t=>e(ne(t)),resetSplOverrides:()=>e(Object(I.L)($.e,"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(Object(R.n)(t),"].").concat($.d.EMPLOYEE_OVERRIDES),null))})),E.f,Object(T.g)("isMobile"))(qe),Ye=a("Xqy3"),Xe=a("eq57"),ze=a("4kuM"),He=a.n(ze);function Qe(){var e=i()(["Delete"]);return Qe=function(){return e},e}function Ke(){var e=i()(["Cancel"]);return Ke=function(){return e},e}function Ze(){var e=i()(["Delete"]);return Ze=function(){return e},e}function Je(){var e=i()(["Cancel"]);return Je=function(){return e},e}function We(){var e=i()(["To delete this service, you must first remove it from the below package(s):"]);return We=function(){return e},e}function $e(){var e=i()(["Are you sure you want to delete this service? This action cannot be undone."]);return $e=function(){return e},e}function et(){var e=i()(["Service couldn't be deleted, please try again later"]);return et=function(){return e},e}function tt(){var e=i()(["Service deleted"]);return tt=function(){return e},e}function at(){var e=i()(["Delete the service"]);return at=function(){return e},e}var rt,nt,ct,ot=Object(y.c)(at()),it=Object(T.g)()(Be=Object(f.b)((e,t)=>({service:Object(R.j)(e,t)}),{})((Ge=Ve=class extends p.PureComponent{constructor(e){super(e),l()(this,"handleInvalidOpen",e=>{e.service||Object(O.f)(N.z)}),l()(this,"handleDelete",()=>{var{service:e}=this.props;return Object(k.c)(e.id,{confirmResetMarketingCampaigns:this.displayCampaignNote,confirmOfflineLocationProfiles:this.displayOfflineProfilesNote}).then(()=>{S.a.addGlobalSuccessToast(Object(y.c)(tt())),Object(O.f)(N.z)}).catch(()=>{this.handleClose(),S.a.addErrorToast(Object(y.c)(et()))})}),l()(this,"handleClose",()=>{var{service:e}=this.props;return this.displayPackagesNote?Object(O.f)(N.z):Object(O.b)(N.cb({serviceId:e.id,mode:"edit"}))}),l()(this,"renderContent",()=>{var{service:e}=this.props;return m.a.createElement(m.a.Fragment,null,!this.displayPackagesNote&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.Text,{qaType:"delete-service-modal-text",type:"fresha-paragraph"},Object(y.c)($e()))),this.displayPackagesNote&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{qaType:"delete-service-warning-note",title:Object(y.c)("Service %{name} can't be deleted",{name:e.name}),description:m.a.createElement(m.a.Fragment,null,Object(y.c)(We()),m.a.createElement("ul",{"data-qa":"packages-list"},this.affectedPackages.map((e,t)=>m.a.createElement("li",{key:t},e.name))))})),this.displayCampaignNote&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{qaType:"delete-service-warning-note",title:Object(y.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:this.affectedMarketingCampaigns})})),this.displayOfflineProfilesNote&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(D.a,{affectedLocationProfiles:this.affectedLocationProfiles})))}),this.affectedPackages=d()(this.props,"location.state.affectedPackages"),this.displayPackagesNote=this.affectedPackages.length>0,this.affectedMarketingCampaigns=d()(this.props,"location.state.affectedMarketingCampaigns"),this.displayCampaignNote=!this.displayPackagesNote&&this.affectedMarketingCampaigns>0,this.affectedLocationProfiles=d()(this.props,"location.state.affectedLocationProfiles"),this.displayOfflineProfilesNote=!this.displayPackagesNote&&this.affectedLocationProfiles.length>0,this.handleInvalidOpen(e)}UNSAFE_componentWillReceiveProps(e){this.handleInvalidOpen(e)}render(){var{isMatch:e}=this.props;return e?m.a.createElement(J.ModalFullScreen,{color:"white","data-qa":"delete-service-modal"},m.a.createElement(J.ModalFullScreenMobileHeader,{center:!0,onClose:this.handleClose,title:ot}),m.a.createElement(J.FullScreenModalContent,{mobileLayout:!0},this.renderContent()),m.a.createElement(J.ModalFullScreenMobileFooter,{buttons:[m.a.createElement(J.Button,{variant:"secondary",onAction:this.handleClose,qaType:"delete-service-close-button"},Object(y.c)(Je())),m.a.createElement(J.Button,{qaType:"delete-service-confirm-button",onAction:this.handleDelete,variant:"danger"},Object(y.c)(Ze()))]})):m.a.createElement(A.d,{fullHeight:!0,qaType:"delete-service-modal"},m.a.createElement(J.ModalCard,{"data-qa":"delete-service-modal",title:ot,rounded:!0,className:He.a.modalWide,onClose:this.handleClose,size:"small",withSections:!0,buttons:[m.a.createElement(J.Button,{variant:"secondary",onAction:this.handleClose,qaType:"delete-service-close-button"},Object(y.c)(Ke())),m.a.createElement(J.Button,{qaType:"delete-service-confirm-button",onAction:this.handleDelete,variant:"danger"},Object(y.c)(Qe()))]},this.renderContent()))}},l()(Ve,"propTypes",{service:h.a.object,isMatch:h.a.bool}),Be=Ge))||Be)||Be,st=a("XQjB"),lt=a("DDyp");function ut(){var e=i()(["Save"]);return ut=function(){return e},e}function dt(){var e=i()(["Cancel"]);return dt=function(){return e},e}function pt(){var e=i()(["Update Service"]);return pt=function(){return e},e}function mt(){var e=i()(["Update Package"]);return mt=function(){return e},e}function bt(){var e=i()(["Update online appointments and remove fees for cancellations and no shows"]);return bt=function(){return e},e}function ft(){var e=i()(["Update upcoming appointments and show the current duration and price"]);return ft=function(){return e},e}function gt(){var e=i()(["This change may affect existing packages"]);return gt=function(){return e},e}function ht(){var e=i()(["To delete pricing from this service, you must first remove it from the below package(s):"]);return ht=function(){return e},e}function Et(){var e=i()(["Package couldn't be updated, please try again later"]);return Et=function(){return e},e}function vt(){var e=i()(["Service couldn't be updated, please try again later"]);return vt=function(){return e},e}var Ot,yt,Pt,St=Object(T.g)()(rt=Object(f.b)((e,t)=>{var a=d()(Object(R.i)(t),"type");return{resource:a===Ye.a.PACKAGE?Object(R.f)(e,t):Object(R.j)(e,t),updateRequest:d()(Object(R.i)(t),"updateRequest"),type:a}})((ct=nt=class extends p.PureComponent{constructor(e){super(e),l()(this,"state",{updateFutureBookings:!0,updatePolicies:!0}),l()(this,"handleClose",()=>Object(O.f)(N.z)),l()(this,"goBack",()=>{var{resource:e,type:t}=this.props;Object(O.b)(t===Ye.a.PACKAGE?N.U({packageId:e.id,mode:"edit"}):N.cb({serviceId:e.id,mode:"edit"}))}),l()(this,"handleUpdateFutureBookinsChange",()=>{!0===this.state.updateFutureBookings?this.setState({updateFutureBookings:!1,updatePolicies:!1}):this.setState({updateFutureBookings:!0})}),l()(this,"handleUpdatePoliciesChange",()=>{this.setState(({updatePolicies:e})=>({updatePolicies:!e}))}),l()(this,"sendRequest",()=>{var{updateRequest:e,type:t}=this.props,a=t===Ye.a.SERVICE;return e.data.attributes["confirm-reset-marketing-campaigns"]=!0,e.data.attributes["confirm-offline-location-profiles"]=!0,a&&(e.data.attributes["update-future-bookings"]=this.state.updateFutureBookings,e.data.attributes["update-policies"]=this.state.updatePolicies,e.data.attributes["confirm-update-packages"]=!0),(a?k.h:lt.c)(e.data.id,e).catch(()=>{S.a.addGlobalErrorToast(a?Object(y.c)(vt()):Object(y.c)(Et()))})}),l()(this,"renderContent",()=>{var{resource:e}=this.props,{updatePolicies:t,updateFutureBookings:a}=this.state,{futureBookingsNumber:r,policiesNumber:n,marketingCampaignsNumber:c,affectedLocationProfiles:o,packagesUsingServicePricings:i,isRemovingUsedServices:s,packagesCount:l}=this;return m.a.createElement(m.a.Fragment,null,s&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{qaType:"delete-pricing-warning-note",title:Object(y.c)("Service %{name} can't be updated",{name:e.name}),description:m.a.createElement(m.a.Fragment,null,Object(y.c)(ht()),m.a.createElement("ul",{"data-qa":"packages-list"},i.map((e,t)=>m.a.createElement("li",{key:t},e))))})),c>0&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{qaType:"delete-service-warning-note",title:Object(y.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:c})})),r>0&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{qaType:"update-service-upcoming-appointment-note",title:Object(y.g)("This service is booked in %{futureBookingsNumber} upcoming appointment.","This service is booked in %{futureBookingsNumber} upcoming appointments.",r,{futureBookingsNumber:r})})),n>0&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{title:Object(y.g)("This service is booked in %{policiesNumber} online upcoming appointment","This service is booked in %{policiesNumber} online upcoming appointments",n,{policiesNumber:n})})),o&&o.length>0&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(D.a,{affectedLocationProfiles:o})),l>0&&m.a.createElement(J.CardSection,{noBorder:!0},m.a.createElement(J.MediaCardNote,{title:Object(y.c)(gt())})),(r>0||n>0)&&m.a.createElement(J.CardSection,{noBorder:!0},r>0&&m.a.createElement(J.Form.BooleanField,{checked:a,qaType:"checkbox-update-upcomming-appointments",onChange:this.handleUpdateFutureBookinsChange,label:Object(y.c)(ft()),xpos:"single",ypos:"last"}),n>0&&m.a.createElement(J.Form.BooleanField,{checked:t,onChange:this.handleUpdatePoliciesChange,label:Object(y.c)(bt()),disabled:!1===a,xpos:"single",ypos:"last"})))});var t=d()(Object(R.i)(this.props),"errors",[]);(!this.props.updateRequest||t.length<1)&&this.goBack(),this.packagesUsingServicePricings=[],t.forEach(({code:e,meta:t})=>{e===Ye.f.MARKETING_RESET?this.marketingCampaignsNumber=t["affected-marketing-campaigns-count"]:e===Ye.f.FUTURE_BOOKINGS?(this.futureBookingsNumber=t["future-bookings-count"],this.policiesNumber=t["policies-count"]):e===Ye.f.LOCATION_PROFILE?this.affectedLocationProfiles=Object(st.b)(t["affected-location-profiles"]):e===Ye.f.SERVICE_PRICING_IN_USE?this.packagesUsingServicePricings.push(t.name):e===Ye.f.UPDATE_PACKAGE&&(this.packagesCount=t["packages-count"])}),this.isRemovingUsedServices=this.packagesUsingServicePricings.length>0}render(){var{isMatch:e,type:t}=this.props,{isRemovingUsedServices:a}=this,r=t===Ye.a.PACKAGE?Object(y.c)(mt()):Object(y.c)(pt()),n=a?this.handleClose:this.goBack,c=[m.a.createElement(J.Button,{variant:"secondary",qaType:"close-service-button",onAction:this.handleClose},Object(y.c)(dt())),!a&&m.a.createElement(J.Button,{onAction:this.sendRequest,qaType:"update-service-button",variant:"primary"},Object(y.c)(ut()))];return e?m.a.createElement(J.ModalFullScreen,{color:"white","data-qa":"delete-service-modal"},m.a.createElement(J.ModalFullScreenMobileHeader,{center:!0,onClose:n,title:r}),m.a.createElement(J.FullScreenModalContent,{mobileLayout:!0},this.renderContent()),m.a.createElement(J.ModalFullScreenMobileFooter,{buttons:c})):m.a.createElement(A.d,{fullHeight:!0,qaType:"delete-service-modal"},m.a.createElement(J.ModalCard,{"data-qa":"delete-service-modal-text",title:r,rounded:!0,className:He.a.modalWide,onClose:n,size:"small",withSections:!0,buttons:c},this.renderContent()))}},l()(nt,"propTypes",{updateRequest:h.a.object,resource:h.a.object,isMatch:h.a.bool,type:h.a.oneOf(Object.values(Ye.a))}),rt=ct))||rt)||rt,jt=a("pOeg"),Tt=a.n(jt);function It(){var e=i()(["Price type"]);return It=function(){return e},e}function Ct(){var e=i()(["Duration"]);return Ct=function(){return e},e}function kt(){var e=i()(["Retail price"]);return kt=function(){return e},e}function Rt(){var e=i()(["Special price"]);return Rt=function(){return e},e}function Nt(){var e=i()(["e.g. Long hair"]);return Nt=function(){return e},e}function xt(){var e=i()(["Pricing name"]);return xt=function(){return e},e}function At(){var e=i()(["Duration"]);return At=function(){return e},e}var Lt,Mt,wt,Dt=I.kb.maxLength(30),_t=I.kb.required(Object(y.c)(At())),Ft=Object(I.R)($.e),qt=Object(f.b)((e,t)=>{var a=t.priceType||d()(Ft(e,$.d.SERVICE_PRICING_LEVELS),[t.index,$.d.PRICE_TYPE]),r=Object(R.l)(e),n=Object(ce.c)(r,t.index);return{currencySymbol:P.a.getCurrencySymbol(e),priceType:a,defaultValues:n}},{})((Pt=yt=class extends p.PureComponent{renderFields(e,t){var{currencySymbol:a,priceType:r,defaultValues:n}=this.props,c="".concat(e,".").concat($.d.SERVICE_PRICING_NAME),o=t?m.a.createElement(J.ReduxForm.TextField,{key:c,name:c,label:Object(y.c)(xt()),optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)"),placeholder:Object(y.c)(Nt()),noEditError:!0,allowEmpty:!t,validate:Dt,xpos:"single",ypos:"last"}):null,i="".concat(e,".").concat($.d.SPECIAL_PRICE),s=m.a.createElement(J.ReduxForm.AmountField,{key:i,name:i,label:Object(y.c)(Rt()),optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)"),placeholder:n.specialPrice||"0.00",allowEmpty:!0,noEditError:!0,currencySymbol:a,xpos:"single",ypos:"last"});return r===oe.a.FREE?o:m.a.createElement(m.a.Fragment,null,m.a.createElement(J.ReduxForm.AmountField,{name:"".concat(e,".").concat($.d.PRICE),label:Object(y.c)(kt()),optionalLabel:r===oe.a.STARTS_AT?Object(y.i)('Service form price price field - part of label, e.g. "Price (from)"',"(from)"):void 0,placeholder:n.price||"0.00",allowEmpty:!t,noEditError:!0,currencySymbol:a,xpos:"single",ypos:"last"}),s,o)}render(){var{index:e,employeeId:t,defaultValues:a}=this.props,r=!t,n=r?"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"]"):"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(e,"].").concat($.d.EMPLOYEE_OVERRIDES,"[p:").concat(t,"]");return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:r&&Tt.a.topPart},r&&m.a.createElement(J.ReduxForm.SelectField,{name:"".concat(n,".").concat($.d.DURATION),label:Object(y.c)(Ct()),parse:Number,validate:_t,xpos:"single",ypos:"last"},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e/60},t))),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat(n,".").concat($.d.PRICE_TYPE),label:Object(y.c)(It()),xpos:"single",ypos:"last",required:!r},!r&&m.a.createElement("option",{value:"",selected:!0},Object(y.c)("%{pricingOption} (default)",{pricingOption:a.priceTypeText})),oe.b.map(e=>m.a.createElement("option",{key:e,value:e},oe.c[e])))),this.renderFields(n,r))}},l()(yt,"propTypes",{currencySymbol:h.a.string,defaultValues:h.a.object,employeeId:h.a.string,index:h.a.number,priceType:h.a.oneOf(Object.values(oe.a))}),Ot=Pt))||Ot;function Bt(){var e=i()(["Save"]);return Bt=function(){return e},e}function Vt(){var e=i()(["Set price by staff"]);return Vt=function(){return e},e}var Gt,Ut,Yt,Xt=Object(f.b)((e,t)=>{var a=Object(R.l)(e),r=Object(R.n)(t),n=Object(R.b)(t);return{servicePricingLevel:a.servicePricingLevels[r],name:a.servicePricingLevels[r].name||a.name,formSyncErrors:Object(R.k)(e).servicePricingLevels,pricingLevelId:Object(R.n)(t),isPricePerStaffEnabled:P.a.isPricePerStaffEnabled(e),employeeId:n,formValues:a,employee:P.a.getEmployee(e,n)}},{cancelPricingLevelEdition:ae})((wt=Mt=class extends p.PureComponent{constructor(e){super(e),l()(this,"goBack",()=>{Object(O.b)(O.a.location.pathname.split("price")[0])}),l()(this,"savePricingLevel",()=>{var{formSyncErrors:e,pricingLevelId:t,employeeId:a}=this.props;0===Object.keys(d()(e,[t,$.d.EMPLOYEE_OVERRIDES,"p:".concat(a)],{})).length&&this.saveChanges()}),l()(this,"saveChanges",()=>{this.setState({saveChanges:!0},this.goBack)});var{servicePricingLevel:t}=e;this.state={saveChanges:!1,pricingLevelData:t}}componentWillUnmount(){var{pricingLevelId:e,cancelPricingLevelEdition:t}=this.props,{saveChanges:a,pricingLevelData:r}=this.state;!1===a&&r&&t(e,r)}render(){var{pricingLevelId:e,employeeId:t,name:a,employee:{firstName:r,lastName:n,avatar:c,title:o},formValues:i}=this.props,s=Object(ce.d)(i,e,t);return m.a.createElement(J.ModalFullScreen,{color:"white"},m.a.createElement(J.ModalFullScreenMobileHeader,{center:!0,onClose:this.goBack,title:Object(y.c)(Vt()),subtitle:a}),m.a.createElement(J.FullScreenModalContent,{mobileLayout:!0},m.a.createElement(J.Card,{padding:"small",color:"lightgray",rounded:4,noShadow:!0},m.a.createElement(J.UserPreview,{firstName:r,lastName:n,url:c&&c.thumbUrl,title:o})),m.a.createElement(qt,{isMatch:!0,index:e,pricingLevelId:e,employeeId:t,priceType:s})),m.a.createElement(J.ModalFullScreenMobileFooter,{buttons:[m.a.createElement(J.Button,{qaType:"save-spl",onAction:this.savePricingLevel,variant:"primary"},Object(y.c)(Bt()))]}))}},l()(Mt,"propTypes",{cancelPricingLevelEdition:h.a.func,employeeId:h.a.string,employee:h.a.object,formSyncErrors:h.a.arrayOf(h.a.object),formValues:h.a.object,name:h.a.string,pricingLevelId:h.a.string,servicePricingLevel:h.a.object}),Lt=wt))||Lt,zt=a("MoLQ"),Ht=a("Vows"),Qt=a("6kH+"),Kt=a("o20C"),Zt=a("vN+2"),Jt=a.n(Zt),Wt=a("88uv"),$t=a("4Ogw"),ea=a("9hcw"),ta=a("b+f9"),aa=a("UoiS"),ra=a("i6OX"),na=a("uZ2f");function ca(){var e=i()(["Search by treatment type name"]);return ca=function(){return e},e}function oa(){var e=i()(["Select Treatment Type"]);return oa=function(){return e},e}var ia,sa,la,ua,da,pa=Object(T.g)()(Gt=Object(f.b)(e=>({categories:P.a.getCategoryList(e),subcategories:P.a.getSubCategoryList(e)}),{})((Yt=Ut=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"state",{contentRef:null}),l()(this,"setRef",e=>{!e||this.state.contentRef&&this.state.contentRef===e||this.setState({contentRef:e})}),l()(this,"handleSuccess",e=>{var{onSuccess:t}=this.props;t&&t(e),this.goBack()}),l()(this,"goBack",()=>{Object(O.b)(O.a.location.pathname.split("subcategory")[0])})}render(){var{subcategories:e,categories:t}=this.props,{contentRef:a}=this.state;return m.a.createElement(A.i,null,m.a.createElement(A.g,{onClose:this.goBack,noBottomPadding:!0},Object(y.c)(oa())),m.a.createElement(A.c,{selfRef:this.setRef,onlyBottomPadding:!0},a&&m.a.createElement(I.D,{name:"searchValue",placeholder:Object(y.c)(ca()),onSuccess:this.handleSuccess,emptyPlaceholder:m.a.createElement(ta.a,{icon:"no-results-found",text:"No treatments type found"}),forceMobile:!0,scrollComponent:a},t.map(t=>m.a.createElement(aa.a,{text:t.name,key:t.name,forceMobile:!0},e.filter(e=>e.category===t.id).map(e=>m.a.createElement(aa.b,{value:e.id,text:e.name,key:e.name,forceMobile:!0})))))))}},l()(Ut,"propTypes",{subcategories:h.a.shape(h.a.arrayOf(Wt.a.propTypes)),categories:h.a.shape(h.a.arrayOf($t.a.propTypes)),onSuccess:h.a.func}),Gt=Yt))||Gt)||Gt,ma=a("ZtuD"),ba=a.n(ma);function fa(){var e=i()(["Select Treatment Type"]);return fa=function(){return e},e}function ga(){var e=i()(["Choose the most relevant type, for\n  internal reference and not currently visible to clients."]);return ga=function(){return e},e}function ha(){var e=i()(["Treatment type"]);return ha=function(){return e},e}function Ea(){var e=i()(["Service name"]);return Ea=function(){return e},e}var va,Oa,ya,Pa=Object(y.c)(Ea()),Sa=Object(y.c)(ha()),ja=[I.kb.maxLength(255),I.kb.required(Pa)],Ta=I.kb.required(Sa),Ia={name:$.d.SUBCATEGORY,label:Sa,hint:Object(y.c)(ga()),validate:Ta,placeholder:Object(y.c)(fa()),inputQaType:"treatment-type"},Ca=(ia=Object(T.g)(),sa=Object(f.b)((e,t)=>{var a=Object(R.l)(e);return{mode:Object(R.e)(t),serviceId:Object(R.m)(t),groupId:Object(R.d)(t),categories:P.a.getCategoryList(e),subcategories:P.a.getSubCategoryList(e),subcategoryId:a?a.subcategory:null}},{}),Object(E.f)(la=ia(la=sa((da=ua=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"selectSubcategory",()=>{var{mode:e,serviceId:t,groupId:a}=this.props;Object(O.c)(N.fb({mode:e,serviceId:t,groupId:a}))}),l()(this,"handleSelectSuccess",e=>{var{change:t}=this.props;t($.d.SUBCATEGORY,e)})}render(){var{isMatch:e,subcategories:t,subcategoryId:a,categories:r}=this.props,n=t.find(e=>e.id===a),c=Object(ea.e)(),o=!(!e&&!c),i=m.a.createElement(na.s,{className:ba.a.field,name:$.d.NAME,label:Pa,noEditError:!0,grow:1,validate:ja,qaType:"service-name-input"}),s=o?m.a.createElement(C.a,{onAction:this.selectSubcategory},m.a.createElement(na.s,Q()({readOnly:!0},Ia,{input:{value:n&&n.name,onFocus:Jt.a,onChange:Jt.a,onBlur:Jt.a,onDragStart:Jt.a,onDrop:Jt.a},className:ba.a.field,grow:1,suffix:m.a.createElement(ra.b,{name:"arrow-down-cropped",size:"small",color:"gray-7"}),suffixClassName:ba.a.selectSuffix,inlineSuffix:!0,validate:Ta,qaType:"searchable-select-mobile"}))):m.a.createElement(I.D,Q()({},Ia,{className:ba.a.field,emptyPlaceholder:m.a.createElement(ta.a,{icon:"no-results-found",text:"No treatments type found"})}),r.map(e=>m.a.createElement(aa.a,{text:e.name,key:e.name},t.filter(t=>t.category===e.id).map(e=>m.a.createElement(aa.b,{value:e.id,text:e.name,key:e.name})))));return m.a.createElement(C.b,{className:ba.a.self},m.a.createElement(L.d,{type:e?"form":"plain noPadding"},i,s),m.a.createElement(E.b,{path:N.F,render:()=>m.a.createElement(pa,{onSuccess:this.handleSelectSuccess})}))}},l()(ua,"propTypes",{isMatch:h.a.bool,subcategories:h.a.arrayOf(h.a.shape(Wt.a.propTypes)),categories:h.a.arrayOf(h.a.shape($t.a.propTypes)),subcategoryId:h.a.string,mode:h.a.string,serviceId:h.a.string,groupId:h.a.string,change:h.a.func}),la=da))||la)||la)||la),ka=a("O6VU"),Ra=a.n(ka);function Na(){var e=i()(["Price type"]);return Na=function(){return e},e}function xa(){var e=i()(["Duration"]);return xa=function(){return e},e}function Aa(){var e=i()(["0.00"]);return Aa=function(){return e},e}function La(){var e=i()(["Retail price"]);return La=function(){return e},e}function Ma(){var e=i()(["Retail price (from)"]);return Ma=function(){return e},e}function wa(){var e=i()(["0.00"]);return wa=function(){return e},e}function Da(){var e=i()(["Special price (optional)"]);return Da=function(){return e},e}function _a(){var e=i()(["e.g. Long hair"]);return _a=function(){return e},e}function Fa(){var e=i()(["Pricing name (optional)"]);return Fa=function(){return e},e}function qa(){var e=i()(["Special price"]);return qa=function(){return e},e}function Ba(){var e=i()(["Retail price"]);return Ba=function(){return e},e}function Va(){var e=i()(["Duration"]);return Va=function(){return e},e}var Ga,Ua,Ya,Xa=I.kb.maxLength(30),za=I.kb.required(Object(y.c)(Va())),Ha=I.kb.rangeOfNumbers(Object(y.c)(Ba()),0,1e8,!0),Qa=I.kb.rangeOfNumbers(Object(y.c)(qa()),0,1e8,!1),Ka=Object(I.R)($.e),Za=Object(f.b)((e,t)=>{var a=d()(Ka(e,$.d.SERVICE_PRICING_LEVELS),[t.index,$.d.PRICE_TYPE]);return{currencySymbol:P.a.getCurrencySymbol(e),priceType:a}},{})((ya=Oa=class extends p.PureComponent{renderFields(){var{currencySymbol:e,isMatch:t,index:a,priceType:r}=this.props,n="".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(a,"].").concat($.d.SERVICE_PRICING_NAME),c=m.a.createElement(na.s,{key:n,name:n,label:Object(y.c)(Fa()),placeholder:Object(y.c)(_a()),noEditError:!0,validate:Xa,basis:t?"100%":"40%",grow:1,className:Ra.a.flex}),o="".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(a,"].").concat($.d.SPECIAL_PRICE),i=m.a.createElement(na.a,{key:o,name:o,label:Object(y.c)(Da()),placeholder:Object(y.c)(wa()),allowEmpty:!0,noEditError:!0,currencySymbol:e,validate:Qa,basis:t?"100%":"40%",grow:1,className:Ra.a.flex});return r===oe.a.FREE?c:m.a.createElement(m.a.Fragment,null,m.a.createElement(C.b,{flex:t?"column":"row"},m.a.createElement(na.a,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(a,"].").concat($.d.PRICE),label:r===oe.a.STARTS_AT?Object(y.c)(Ma()):Object(y.c)(La()),placeholder:Object(y.c)(Aa()),noEditError:!0,currencySymbol:e,validate:Ha,basis:t?"100%":"40%",grow:1,className:Ra.a.flex}),i),c)}render(){var e=this.props,{currencySymbol:t,isMatch:a,index:r,priceType:n}=e,c=Z()(e,["currencySymbol","isMatch","index","priceType"]);return m.a.createElement(C.b,Q()({flex:"column"},c),m.a.createElement(C.b,{flex:a?"column":"row"},m.a.createElement(na.r,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(r,"].").concat($.d.DURATION),label:Object(y.c)(xa()),invalidValueLabel:"",parse:Number,validate:za,basis:a?"100%":"40%",grow:1,className:Ra.a.flex},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e/60},t))),m.a.createElement(na.r,{name:"".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(r,"].").concat($.d.PRICE_TYPE),label:Object(y.c)(Na()),invalidValueLabel:"",basis:a?"100%":"40%",grow:1,className:Ra.a.flex},oe.b.map(e=>m.a.createElement("option",{key:e,value:e},oe.c[e])))),this.renderFields())}},l()(Oa,"propTypes",{currencySymbol:h.a.string,index:h.a.number,isMatch:h.a.bool,priceType:h.a.oneOf(Object.values(oe.a))}),va=ya))||va,Ja=a("TSYQ"),Wa=a.n(Ja),$a=a("7Dqk"),er=a.n($a);function tr(){var e=i()(["Save"]);return tr=function(){return e},e}function ar(){var e=i()(["Remove Pricing Option"]);return ar=function(){return e},e}function rr(){var e=i()(["New pricing option"]);return rr=function(){return e},e}function nr(){var e=i()(["Edit pricing option"]);return nr=function(){return e},e}var cr=Object(f.b)((e,t)=>({servicePricingLevels:Object(R.l)(e).servicePricingLevels,formSyncErrors:Object(R.k)(e).servicePricingLevels,pricingLevelId:d()(t,"match.params.pricingLevelId")}),{pushPricingLevel:ee,popPricingLevel:te,cancelPricingLevelEdition:ae,removePricingLevel:re,touchAllFieldsInForm:ne})((Ya=Ua=class extends p.PureComponent{constructor(e){super(e),l()(this,"goBack",()=>{Object(O.b)(O.a.location.pathname.split("price")[0])}),l()(this,"savePricingLevel",()=>{var{servicePricingLevels:e,formSyncErrors:t,pricingLevelId:a,touchAllFieldsInForm:r}=this.props,n=a||e.length-1;0===Object.keys(t[n]).length?this.saveChanges():r(n)}),l()(this,"saveChanges",()=>{this.setState({saveChanges:!0},this.goBack)}),l()(this,"removePricingLevel",()=>{var{removePricingLevel:e,pricingLevelId:t}=this.props;e(t),this.saveChanges()});var{servicePricingLevels:t,pricingLevelId:a}=e,r={saveChanges:!1};void 0!==a&&(r.pricingLevelData=t[a]),this.state=r}componentDidMount(){var{pushPricingLevel:e,pricingLevelId:t}=this.props;void 0===t&&e()}componentWillUnmount(){var{servicePricingLevels:e,pricingLevelId:t,cancelPricingLevelEdition:a,popPricingLevel:r}=this.props,{saveChanges:n,pricingLevelData:c}=this.state;!1===n&&(c?a(t,c):e.length>1&&r())}render(){var{servicePricingLevels:e,pricingLevelId:t}=this.props,a=void 0!==t;return m.a.createElement(A.i,null,m.a.createElement(A.g,{onClose:this.goBack},a?Object(y.c)(nr()):Object(y.c)(rr())),m.a.createElement(A.c,{onlyBottomPadding:!0},m.a.createElement(L.d,{type:Wa()("form",{plain:!a}),shrink:0},m.a.createElement(Za,{isMatch:!0,index:t||e.length-1})),a&&m.a.createElement(Ht.w,{onAction:this.removePricingLevel,className:er.a.removeButton},Object(y.c)(ar()))),m.a.createElement(A.e,{noPadding:!0},m.a.createElement(A.b,null,m.a.createElement(x.f,{onAction:this.savePricingLevel,qaType:"save-spl"},Object(y.c)(tr())))))}},l()(Ua,"propTypes",{pushPricingLevel:h.a.func,popPricingLevel:h.a.func,cancelPricingLevelEdition:h.a.func,removePricingLevel:h.a.func,touchAllFieldsInForm:h.a.func,servicePricingLevels:h.a.object,formSyncErrors:h.a.arrayOf(h.a.object),pricingLevelId:h.a.string}),Ga=Ya))||Ga,or=a("ewVM");class ir extends p.PureComponent{render(){var{servicePricingName:e,duration:t,price:a,priceType:r,specialPrice:n,onAction:c}=this.props,o=Object(ie.l)(t,"m");return m.a.createElement(or.a,{description:e?o:void 0,retailPrice:n,nonDiscountedPrice:a,priceType:r,name:e||o,onAction:c})}}l()(ir,"propTypes",{servicePricingName:h.a.string,duration:h.a.number,price:h.a.number,priceType:h.a.oneOf(Object.values(oe.a)),specialPrice:h.a.number,onAction:h.a.func});var sr,lr,ur,dr,pr=a("1N+g"),mr=a.n(pr);function br(){var e=i()(["Add another pricing option"]);return br=function(){return e},e}function fr(){var e=i()(["Add another pricing option"]);return fr=function(){return e},e}function gr(){var e=i()(["Prices"]);return gr=function(){return e},e}var hr,Er,vr,Or=(sr=Object(f.b)((e,t)=>{var a=Object(R.l)(e),r=Object(R.k)(e);return{mode:Object(R.e)(t),serviceId:Object(R.m)(t),servicePricingLevels:a?a.servicePricingLevels:[],formErrors:r,isReshedulEnabled:P.a.isReshedulEnabled(e)}},{pushPricingLevel:ee,removePricingLevel:re,touchAllFieldsInForm:ne}),Object(E.f)(lr=sr((dr=ur=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"addPricingLevel",()=>{var{servicePricingLevels:e,formErrors:t,touchAllFieldsInForm:a,mode:r,serviceId:n}=this.props;1===e.length&&Object.keys(t.servicePricingLevels[0]).length>0?a(0):Object(O.c)(N.W({mode:r,serviceId:n}))}),l()(this,"renderMobilePricingLevels",({fields:e})=>{var{mode:t,serviceId:a}=this.props,r=e.map((r,n,c)=>{var o=e.get(n);if(1===c.length)return m.a.createElement(L.d,{type:"form noMargin"},m.a.createElement(Za,{isMatch:!0,index:n}));return m.a.createElement(ir,{duration:o[$.d.DURATION],servicePricingName:o[$.d.SERVICE_PRICING_NAME],price:Number.parseFloat(o[$.d.PRICE]),priceType:o[$.d.PRICE_TYPE],specialPrice:Number.parseFloat(o[$.d.SPECIAL_PRICE]),onAction:()=>{Object(O.c)(N.W({pricingLevelId:n,mode:t,serviceId:a}))}})});return m.a.createElement(C.b,null,r)}),l()(this,"renderPricingLevels",({fields:e})=>{var t=e.map((e,t,a)=>m.a.createElement(L.d,{qaType:e,type:"form gray",className:mr.a.pricingLevelCard,key:e},m.a.createElement(Za,{index:t}),a.length>1&&m.a.createElement(x.b,{name:"delete",qaType:"spl-delete-".concat(this.props.servicePricingLevels[t].id),className:mr.a.deleteIcon,onAction:()=>{this.props.removePricingLevel(t)}})));return m.a.createElement(C.b,null,t)})}renderMobile(){return m.a.createElement(C.b,{className:mr.a.self},m.a.createElement(Qt.b,{label:Object(y.c)(gr())}),m.a.createElement(I.o,{name:$.d.SERVICE_PRICING_LEVELS,component:this.renderMobilePricingLevels}),m.a.createElement(Ht.b,{onAction:this.addPricingLevel,qaType:"add-another-pricing-option"},Object(y.c)(fr())),m.a.createElement(E.b,{path:N.t,component:cr}))}renderDesktop(){var{isReshedulEnabled:e}=this.props;return m.a.createElement(C.b,{className:mr.a.self},m.a.createElement(I.o,{name:$.d.SERVICE_PRICING_LEVELS,component:this.renderPricingLevels}),m.a.createElement(x.n,{qaType:"add-another-pricing-option",className:mr.a.addLink,onAction:this.props.pushPricingLevel},m.a.createElement(ra.b,{name:"plus",size:e?"medium":"standard",marginRight:8}),Object(y.c)(br())))}render(){var{isMatch:e}=this.props;return e?this.renderMobile():this.renderDesktop()}},l()(ur,"propTypes",{isMatch:h.a.bool,isReshedulEnabled:h.a.bool,formErrors:h.a.object,servicePricingLevels:h.a.arrayOf(h.a.shape({id:h.a.string})),touchAllFieldsInForm:h.a.func,pushPricingLevel:h.a.func,removePricingLevel:h.a.func,mode:h.a.string,serviceId:h.a.string}),lr=dr))||lr)||lr),yr=a("tPh7");function Pr(){var e=i()(["Select All"]);return Pr=function(){return e},e}function Sr(){var e=i()(["Select staff who perform this service."]);return Sr=function(){return e},e}function jr(){var e=i()(["Select staff who perform this service."]);return jr=function(){return e},e}var Tr,Ir,Cr,kr=Object(T.g)()(hr=Object(f.b)(e=>({isReshedulEnabled:P.a.isReshedulEnabled(e),employeeValues:P.a.getEmployeeList(e).filter(e=>e.providesServices).map(e=>({name:e.name,value:e.id}))}))((vr=Er=class extends p.PureComponent{render(){var{employeeValues:e,isMatch:t,isReshedulEnabled:a}=this.props;return m.a.createElement(m.a.Fragment,null,!t&&m.a.createElement(yr.a,{desktopPadding:!0,forceShow:!0},a?m.a.createElement(J.Text,{type:"fresha-caption",color:"gray50"},Object(y.c)(jr())):Object(y.c)(Sr())),m.a.createElement(na.c,{name:$.d.EMPLOYEES,values:[{values:e,label:Object(y.c)(Pr())}],noMargin:!0}))}},l()(Er,"propTypes",{employeeValues:h.a.arrayOf(h.a.object),isMatch:h.a.bool,isReshedulEnabled:h.a.bool}),hr=vr))||hr)||hr,Rr=a("1MhA"),Nr=a.n(Rr);function xr(){var e=i()(["When enabled, a combination of staff and resource will be needed to book the service"]);return xr=function(){return e},e}function Ar(){var e=i()(["Resource required"]);return Ar=function(){return e},e}function Lr(){var e=i()(["Assign resources required to perform this service."]);return Lr=function(){return e},e}var Mr,wr,Dr,_r,Fr,qr=Object(T.g)()(Tr=Object(f.b)(e=>{var t=Object(R.l)(e)[$.b.ROOMS],a=P.a.getExistingLocationList(e),r=P.a.getRoomLocationDict(e),n=Object.entries(r).filter(e=>e[1].length>0).map(([e,t])=>({label:a.find(t=>t.id===e).name,values:t.map(e=>({name:e.name,value:e.id}))}));return{roomRequired:t[$.d.ROOM_REQUIRED],roomsValues:n,reshedulEnabled:P.a.isReshedulEnabled(e)}},{})((Cr=Ir=class extends p.PureComponent{render(){var e=this.props,{roomRequired:t,isMatch:a,roomsValues:r,reshedulEnabled:n}=e,c=Z()(e,["roomRequired","isMatch","roomsValues","reshedulEnabled"]);return m.a.createElement(C.b,Q()({className:Nr.a.self},c),!a&&m.a.createElement(yr.a,{desktopPadding:!0,forceShow:!0},Object(y.c)(Lr())),m.a.createElement(L.d,{type:Wa()("form ".concat(n?"noPadding":""),{plain:!a}),shrink:0},m.a.createElement(na.b,{name:$.d.ROOM_REQUIRED,asSwitchMobile:!0,label:Object(y.c)(Ar()),hint:Object(y.c)(xr())}),t&&m.a.createElement(C.b,{className:Nr.a.moreFields},m.a.createElement(na.c,{name:$.d.ROOMS,values:r,disabled:!t,disableSelectAll:!0}))))}},l()(Ir,"propTypes",{roomRequired:h.a.bool,isMatch:h.a.bool,reshedulEnabled:h.a.bool,roomsValues:h.a.arrayOf(h.a.object)}),Tr=Cr))||Tr)||Tr,Br=a("1EZC"),Vr=a("Tl70"),Gr=a("v2zP"),Ur=a.n(Gr);function Yr(){var e=i()(["Calculate staff commissions when this service is sold."]);return Yr=function(){return e},e}function Xr(){var e=i()(["Enable commission"]);return Xr=function(){return e},e}function zr(){var e=i()(["Commission"]);return zr=function(){return e},e}function Hr(){var e=i()(["Voucher expiry period"]);return Hr=function(){return e},e}function Qr(){var e=i()(["Enable voucher sales"]);return Qr=function(){return e},e}function Kr(){var e=i()(["Voucher"]);return Kr=function(){return e},e}function Zr(){var e=i()(["Custom setting"]);return Zr=function(){return e},e}function Jr(){var e=i()(["Default setting"]);return Jr=function(){return e},e}function Wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function $r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function en(){var e=i()(["Change"]);return en=function(){return e},e}function tn(){var e=i()(["Change"]);return tn=function(){return e},e}function an(){var e=i()(["Tax (added to price)"]);return an=function(){return e},e}function rn(){var e=i()(["Tax (included in price)"]);return rn=function(){return e},e}function nn(){var e=i()(["Tax (added to price)"]);return nn=function(){return e},e}function cn(){var e=i()(["Tax (included in price)"]);return cn=function(){return e},e}function on(){var e=i()(["Custom setting"]);return on=function(){return e},e}function sn(){var e=i()(["Default setting"]);return sn=function(){return e},e}function ln(){var e=i()(["Change"]);return ln=function(){return e},e}function un(){var e=i()(["No tax"]);return un=function(){return e},e}function dn(){var e=i()(["Tax (added to price)"]);return dn=function(){return e},e}function pn(){var e=i()(["Tax (included in price)"]);return pn=function(){return e},e}function mn(){var e=i()(["Set tax rate for this service"]);return mn=function(){return e},e}function bn(){var e=i()(["Set tax rate for this service"]);return bn=function(){return e},e}function fn(){var e=i()(["Set tax rate for this service"]);return fn=function(){return e},e}function gn(){var e=i()(["Tax"]);return gn=function(){return e},e}function hn(){var e=i()(["Duration"]);return hn=function(){return e},e}function En(){var e=i()(["Blocked time after"]);return En=function(){return e},e}function vn(){var e=i()(["Processing time after"]);return vn=function(){return e},e}function On(){var e=i()(["No extra time"]);return On=function(){return e},e}function yn(){var e=i()(["Extra time type"]);return yn=function(){return e},e}function Pn(){var e=i()(["Extra time"]);return Pn=function(){return e},e}function Sn(){var e=i()(["Blocktime will build-in time in between appointments e.g 10mins to tidy up or to take a break. Processing time is used to allow formulas to develop, meaning you are free to take other bookings during this time."]);return Sn=function(){return e},e}var jn,Tn,In,Cn,kn=(Mr=Object(T.g)(),wr=Object(f.b)((e,t)=>{var a=Object(R.l)(e)[$.b.SETTINGS];return{multipleTaxes:Object(R.l)(e)[$.b.TAXES][j.a],mode:Object(R.e)(t),serviceId:Object(R.m)(t),extraTimeSelected:!!a[$.d.EXTRA_TIME_TYPE],pricesIncludeTax:P.a.getProviderPricesIncludeTax(e),taxRates:P.a.getTaxRatesList(e),locations:P.a.getExistingLocationList(e),voucherEnabled:a[$.d.VOUCHER_ENABLED],voucherExpirationPeriod:P.a.getProviderVoucherExpirationPeriod(e),reshedulEnabled:P.a.isReshedulEnabled(e)}},{}),Object(E.f)(Dr=Mr(Dr=wr((Fr=_r=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"openSelectTaxModal",()=>{var e={mode:this.props.mode,serviceId:this.props.serviceId};Object(O.c)(N.bb(e))})}render(){var e,t=this.props,{extraTimeSelected:a,isMatch:r,pricesIncludeTax:n,taxRates:c,multipleTaxes:o=[],voucherEnabled:i,voucherExpirationPeriod:s,locations:l,history:u,location:d,match:p,reshedulEnabled:b}=t,f=Z()(t,["extraTimeSelected","isMatch","pricesIncludeTax","taxRates","multipleTaxes","voucherEnabled","voucherExpirationPeriod","locations","history","location","match","reshedulEnabled"]),g=l[0].defaultServiceTaxRate,h=Object(y.c)(Sn()),E=null===(e=Ye.h.find(e=>e.value===s))||void 0===e?void 0:e.label;return m.a.createElement(C.b,Q()({className:Ur.a.self},f),m.a.createElement(Qt.b,{label:Object(y.c)(Pn())}),m.a.createElement(L.d,{className:Ur.a.extraTimeCard,type:Wa()("form ".concat(b?"noPadding":""),{plain:!r}),shrink:0},m.a.createElement(C.b,{flex:r?"column":"row"},m.a.createElement(na.r,{name:$.d.EXTRA_TIME_TYPE,label:Object(y.c)(yn()),hint:r?h:void 0,tooltip:r?void 0:h,grow:1,hideInvalidLabel:!0,basis:r?void 0:"50%",className:Ur.a.flex},m.a.createElement("option",{value:""},Object(y.c)(On())),m.a.createElement("option",{value:"processing"},Object(y.c)(vn())),m.a.createElement("option",{value:"blocking"},Object(y.c)(En()))),(!r||a)&&m.a.createElement(na.r,{name:$.d.EXTRA_TIME,label:Object(y.c)(hn()),grow:1,disabled:!a,hideInvalidLabel:!0,parse:Number,basis:r?void 0:"50%",className:Ur.a.flex},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e},t))))),m.a.createElement(Qt.b,{label:Object(y.c)(gn()),sublabel:Object(y.c)(fn())}),m.a.createElement(L.d,{type:Wa()("form ".concat(b?"noPadding":""),{plain:!r}),shrink:0,marginTop:0,className:Ur.a.taxes},!r&&(b?m.a.createElement(J.Text,{className:Ur.a.taxesText,type:"fresha-caption",color:"gray50"},Object(y.c)(bn())):m.a.createElement(w.d,{className:Ur.a.taxesText,type:"body-2"},Object(y.c)(mn()))),1===l.length?m.a.createElement(na.r,{name:$.d.TAX_RATE,label:n?Object(y.c)(pn()):Object(y.c)(dn()),grow:1,hideInvalidLabel:!0},m.a.createElement("option",{value:""},Object(y.c)(un())),m.a.createElement("option",{key:"use-default",value:v.a},Object(y.c)("Default: %{taxName}",{taxName:Object(Br.b)(g)})),c.map(e=>m.a.createElement("option",{key:e.id,value:e.id},Object(Br.b)(e)))):m.a.createElement(C.a,{onAction:this.openSelectTaxModal},b?m.a.createElement(J.Form.StaticField,{suffix:Object(y.c)(ln()),value:o.every(({taxRate:e})=>e===v.a)?Object(y.c)(sn()):Object(y.c)(on()),label:n?Object(y.c)(cn()):Object(y.c)(nn())}):m.a.createElement(na.s,{readOnly:!0,name:$.d.TAX_RATE,label:n?Object(y.c)(rn()):Object(y.c)(an()),grow:1,className:Ur.a.taxOpenField,inlineSuffix:!0,suffix:b?m.a.createElement(J.Text,{type:"fresha-paragraph-input",className:Ur.a.changeTaxText},Object(y.c)(tn())):m.a.createElement(w.d,{type:"body-2",className:Ur.a.changeTaxText},Object(y.c)(en())),input:$r($r({},Vr.b),{},{name:$.d.TAX_RATE,value:o.every(({taxRate:e})=>e===v.a)?Object(y.c)(Jr()):Object(y.c)(Zr())})}))),m.a.createElement(Qt.b,{label:Object(y.c)(Kr())}),m.a.createElement(L.d,{type:Wa()("form ".concat(b?"noPadding":""),{plain:!r}),className:Ur.a.voucherCard,shrink:0},m.a.createElement(na.b,{name:$.d.VOUCHER_ENABLED,asSwitchMobile:!0,label:Object(y.c)(Qr())}),(!r||i)&&m.a.createElement(na.r,{name:$.d.VOUCHER_EXPIRATION_PERIOD,label:Object(y.c)(Hr()),grow:1,hideInvalidLabel:!0,disabled:!i},E&&m.a.createElement("option",{value:Ye.g},Object(y.c)("Default (%{defaultOption})",{defaultOption:E})),Ye.h.map(e=>m.a.createElement("option",{key:e.value,value:e.value},e.label)))),m.a.createElement(Qt.b,{label:Object(y.c)(zr())}),m.a.createElement(L.d,{type:Wa()("form ".concat(b?"noPadding":""),{plain:!r}),className:Ur.a.commisionCard,shrink:0,marginTop:0},m.a.createElement(na.b,{name:$.d.COMMISSION_ENABLED,asSwitchMobile:!0,label:Object(y.c)(Xr()),hint:Object(y.c)(Yr())})))}},l()(_r,"propTypes",{mode:h.a.string,serviceId:h.a.string,extraTimeSelected:h.a.bool,isMatch:h.a.bool,reshedulEnabled:h.a.bool,pricesIncludeTax:h.a.bool,taxRates:h.a.arrayOf(h.a.object),multipleTaxes:h.a.arrayOf(h.a.object),locations:h.a.arrayOf(h.a.object).isRequired,voucherEnabled:h.a.bool,voucherExpirationPeriod:h.a.string,history:h.a.object,location:h.a.object,match:h.a.object}),Dr=Fr))||Dr)||Dr)||Dr),Rn=a("gnVr"),Nn=a.n(Rn);function xn(){var e=i()(["Settings"]);return xn=function(){return e},e}function An(){var e=i()(["Custom"]);return An=function(){return e},e}function Ln(){var e=i()(["Default"]);return Ln=function(){return e},e}function Mn(){var e=i()(["Online Booking"]);return Mn=function(){return e},e}function wn(){var e=i()(["Disabled"]);return wn=function(){return e},e}function Dn(){var e=i()(["Enabled"]);return Dn=function(){return e},e}function _n(){var e=i()(["Resources"]);return _n=function(){return e},e}function Fn(){var e=i()(["Not required"]);return Fn=function(){return e},e}function qn(){var e=i()(["Staff"]);return qn=function(){return e},e}function Bn(){var e=i()(["No staff assigned"]);return Bn=function(){return e},e}function Vn(){var e=i()(["Other Options"]);return Vn=function(){return e},e}function Gn(){var e=i()(["Save"]);return Gn=function(){return e},e}function Un(){var e=i()(["Delete"]);return Un=function(){return e},e}function Yn(){var e=i()(["Settings"]);return Yn=function(){return e},e}function Xn(){var e=i()(["At least one resource must be selected"]);return Xn=function(){return e},e}function zn(){var e=i()(["Assign resources required to perform this service."]);return zn=function(){return e},e}function Hn(){var e=i()(["Resources"]);return Hn=function(){return e},e}function Qn(){var e=i()(["At least one staff member must be selected."]);return Qn=function(){return e},e}function Kn(){var e=i()(["Select staff who perform this service."]);return Kn=function(){return e},e}function Zn(){var e=i()(["Staff"]);return Zn=function(){return e},e}function Jn(){var e=i()(["Allow clients to book this service online, switch off to hide this service from your online bookings menu."]);return Jn=function(){return e},e}function Wn(){var e=i()(["Online booking"]);return Wn=function(){return e},e}var $n,ec,tc,ac,rc=Object(I.r)({formName:$.e,name:$.b.ONLINE_BOOKING,partialPath:N.l,header:Object(y.c)(Wn()),subheader:Object(y.c)(Jn()),content:m.a.createElement(Kt.a,{formName:$.e})}),nc=Object(I.r)({formName:$.e,name:$.b.STAFF,partialPath:N.D,header:Object(y.c)(Zn()),subheader:Object(y.c)(Kn()),content:m.a.createElement(kr,null),mapStateToValidator:{employeesProvidingService:R.c},validate:(e,{employeesProvidingService:t})=>!(t.length>0&&0===e[$.b.STAFF][$.d.EMPLOYEES].length)||(S.a.addErrorToast(Object(y.c)(Qn())),!1)}),cc=Object(I.r)({formName:$.e,name:$.b.ROOMS,partialPath:N.v,header:Object(y.c)(Hn()),subheader:Object(y.c)(zn()),content:m.a.createElement(qr,null),mapStateToValidator:{employeesProvidingService:R.c},validate:(e,{employeesProvidingService:t})=>!(t.length>0&&0===e[$.b.ROOMS][$.d.ROOMS].length)||(S.a.addErrorToast(Object(y.c)(Xn())),!1)}),oc=Object(I.r)({formName:$.e,name:$.b.SETTINGS,partialPath:N.B,header:Object(y.c)(Yn()),content:m.a.createElement(kn,null),noBottomPadding:!0}),ic=(jn=Object(f.b)((e,t)=>{var a=Object(R.l)(e),r=a[$.b.SETTINGS],n=a[$.b.TAXES];return{mode:Object(R.e)(t),serviceId:Object(R.m)(t),onlineBookingEnabled:!!a&&a[$.b.ONLINE_BOOKING][$.d.ONLINE_BOOKING_ENABLED],selectedEmployeesNumber:a?a[$.b.STAFF][$.d.EMPLOYEES].length:0,roomRequired:!!a&&a[$.b.ROOMS][$.d.ROOM_REQUIRED],selectedRoomsNumber:a?a[$.b.ROOMS][$.d.ROOMS].length:0,settingsSetToDefault:!r[$.d.EXTRA_TIME_TYPE]&&r[$.d.TAX_RATE]===v.a&&r[$.d.VOUCHER_ENABLED]&&"default"===r[$.d.VOUCHER_EXPIRATION_PERIOD]&&r[$.d.COMMISSION_ENABLED]&&n[j.a].every(({taxRate:e})=>e===v.a)}}),Object(E.f)(Tn=jn((Cn=In=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"getStaffModalLink",()=>this.getModalLink(N.D)),l()(this,"getOnlineBookingLink",()=>this.getModalLink(N.l)),l()(this,"getResourcesLink",()=>this.getModalLink(N.v)),l()(this,"getSettingsLink",()=>this.getModalLink(N.B)),l()(this,"getModalLink",e=>{var t={mode:this.props.mode,serviceId:this.props.serviceId};switch(e){case N.D:return N.eb(t);case N.l:return N.R(t);case N.v:return N.X(t);case N.B:return N.db(t);default:return null}})}render(){var e=this.props,{isMatch:t,submit:a,mode:r,submitting:n,deleteService:c,onlineBookingEnabled:o,selectedEmployeesNumber:i,roomRequired:s,selectedRoomsNumber:l,showResourcesSection:u,showStaffSection:d,salesSetToDefault:p,settingsSetToDefault:b,change:f}=e,g=Z()(e,["isMatch","submit","mode","submitting","deleteService","onlineBookingEnabled","selectedEmployeesNumber","roomRequired","selectedRoomsNumber","showResourcesSection","showStaffSection","salesSetToDefault","settingsSetToDefault","change"]);return m.a.createElement(zt.a,Q()({footer:m.a.createElement(C.b,{flex:"row"},r===Ye.j.EDIT&&m.a.createElement(x.g,{className:Nn.a.deleteButton,grow:1,onAction:c,disabled:n,qaType:"delete-service-button"},Object(y.c)(Un())),m.a.createElement(x.f,{grow:1,isPending:n,onAction:a,qaType:"save-service-button"},Object(y.c)(Gn())))},g),m.a.createElement(Ca,{change:f}),m.a.createElement(Or,{isMatch:t}),m.a.createElement(Qt.b,{label:Object(y.c)(Vn())}),d&&m.a.createElement(Ht.x,{linkTo:this.getStaffModalLink,leftLabel:i?Object(y.c)("%{selectedEmployeesNumber} staff assigned",{selectedEmployeesNumber:i}):Object(y.c)(Bn())},Object(y.c)(qn())),u&&m.a.createElement(Ht.x,{linkTo:this.getResourcesLink,leftLabel:s?Object(y.c)("%{selectedRoomsNumber} resources assigned",{selectedRoomsNumber:l}):Object(y.c)(Fn())},Object(y.c)(_n())),m.a.createElement(Ht.x,{linkTo:this.getOnlineBookingLink,leftLabel:o?Object(y.c)(Dn()):Object(y.c)(wn())},Object(y.c)(Mn())),m.a.createElement(Ht.x,{leftLabel:b?Object(y.c)(Ln()):Object(y.c)(An()),linkTo:this.getSettingsLink},Object(y.c)(xn())),m.a.createElement(E.b,{path:N.m,component:rc}),m.a.createElement(E.b,{path:N.E,component:nc}),m.a.createElement(E.b,{path:N.w,component:cc}),m.a.createElement(E.b,{path:N.C,component:oc}))}},l()(In,"propTypes",{isMatch:h.a.bool,onlineBookingEnabled:h.a.bool,selectedEmployeesNumber:h.a.number,mode:h.a.string,serviceId:h.a.string,roomRequired:h.a.bool,selectedRoomsNumber:h.a.bool,showResourcesSection:h.a.bool,showStaffSection:h.a.bool,submit:h.a.func,change:h.a.func,submitting:h.a.bool,deleteService:h.a.func,salesSetToDefault:h.a.bool,settingsSetToDefault:h.a.bool}),Tn=Cn))||Tn)||Tn),sc=a("9AV2"),lc=a("QqEi"),uc=a("J+Tt"),dc=a.n(uc);function pc(){var e=i()(["Save"]);return pc=function(){return e},e}function mc(){var e=i()(["Save"]);return mc=function(){return e},e}function bc(){var e=i()(["Cancel"]);return bc=function(){return e},e}function fc(){var e=i()(["Cancel"]);return fc=function(){return e},e}function gc(){var e=i()(["Delete"]);return gc=function(){return e},e}function hc(){var e=i()(["Delete"]);return hc=function(){return e},e}function Ec(){var e=i()(["Settings"]);return Ec=function(){return e},e}function vc(){var e=i()(["Online booking"]);return vc=function(){return e},e}function Oc(){var e=i()(["Resources"]);return Oc=function(){return e},e}function yc(){var e=i()(["Staff"]);return yc=function(){return e},e}var Pc,Sc,jc,Tc,Ic=($n=Object(f.b)((e,t)=>({mode:Object(R.e)(t),reshedulEnabled:P.a.isReshedulEnabled(e)})),Object(E.f)(ec=$n((ac=tc=class extends p.PureComponent{render(){var e=this.props,{isMatch:t,mode:a,headerOnAction:r,submit:n,change:c,submitting:o,deleteService:i,showResourcesSection:s,showStaffSection:l,reshedulEnabled:u}=e,d=Z()(e,["isMatch","mode","headerOnAction","submit","change","submitting","deleteService","showResourcesSection","showStaffSection","reshedulEnabled"]),p=m.a.createElement(C.b,{paddingBottom:32},m.a.createElement(Ca,{change:c}),m.a.createElement(Or,{isMatch:t})),b=m.a.createElement(lc.b,{paddingBottom:32},l&&m.a.createElement(lc.a,{name:Object(y.c)(yc())},m.a.createElement(I.s,{name:$.b.STAFF},m.a.createElement(kr,null))),s&&m.a.createElement(lc.a,{name:Object(y.c)(Oc())},m.a.createElement(I.s,{name:$.b.ROOMS},m.a.createElement(qr,null))),m.a.createElement(lc.a,{name:Object(y.c)(vc())},m.a.createElement(I.s,{name:$.b.ONLINE_BOOKING},m.a.createElement(Kt.a,{formName:$.e}))),m.a.createElement(lc.a,{name:Object(y.c)(Ec())},m.a.createElement(I.s,{name:$.b.SETTINGS},m.a.createElement(kn,null)))),f=m.a.createElement(C.b,{flex:"row",grow:1,justifyContent:"space-between"},a===Ye.j.EDIT&&(u?m.a.createElement(J.Button,{variant:"danger",onAction:i,disabled:o,qaType:"delete-service-button",className:dc.a.button},Object(y.c)(hc())):m.a.createElement(x.g,{onAction:i,disabled:o,qaType:"delete-service-button"},Object(y.c)(gc()))),m.a.createElement(C.b,{flex:"row",grow:1}),u?m.a.createElement(J.Button,{variant:"secondary",onAction:r,className:Wa()(dc.a.cancelButton,dc.a.button)},Object(y.c)(fc())):m.a.createElement(x.a,{onAction:r,className:dc.a.cancelButton},Object(y.c)(bc())),u?m.a.createElement(J.Button,{variant:"primary",qaType:"save-service-button",isPending:o,onAction:n,className:dc.a.button},Object(y.c)(mc())):m.a.createElement(x.f,{qaType:"save-service-button",isPending:o,onAction:n},Object(y.c)(pc())));return m.a.createElement(sc.a,Q()({leftPanel:p,rightPanel:b,footer:f,headerOnAction:r},d))}},l()(tc,"propTypes",{isMatch:h.a.bool,mode:h.a.string,headerOnAction:h.a.func,submit:h.a.func,change:h.a.func,deleteService:h.a.func,showResourcesSection:h.a.bool,showStaffSection:h.a.bool,submitting:h.a.bool,reshedulEnabled:h.a.bool}),ec=ac))||ec)||ec),Cc=a("DpsG"),kc=a("Xz+p"),Rc=a("Du07");function Nc(){var e=i()(["Service available for"]);return Nc=function(){return e},e}function xc(){var e=i()(["Add a short description"]);return xc=function(){return e},e}function Ac(){var e=i()(["Edit"]);return Ac=function(){return e},e}function Lc(){var e=i()(["No service category selected"]);return Lc=function(){return e},e}function Mc(){var e=i()(["Service category"]);return Mc=function(){return e},e}function wc(){var e=i()(["Add a service name and choose the treatment type."]);return wc=function(){return e},e}function Dc(){var e=i()(["Basic info"]);return Dc=function(){return e},e}function _c(){var e=i()(["Select Treatment Type"]);return _c=function(){return e},e}function Fc(){var e=i()(["Choose the most relevant treatment type. This won't be visible to your clients."]);return Fc=function(){return e},e}function qc(){var e=i()(["Service category"]);return qc=function(){return e},e}function Bc(){var e=i()(["Service description"]);return Bc=function(){return e},e}function Vc(){var e=i()(["Treatment type"]);return Vc=function(){return e},e}function Gc(){var e=i()(["Service name"]);return Gc=function(){return e},e}var Uc=Object(y.c)(Gc()),Yc=Object(y.c)(Vc()),Xc=Object(y.c)(Bc()),zc=[I.kb.maxLength(255),I.kb.required(Uc)],Hc=I.kb.required(Yc),Qc=I.kb.maxLength(1e3),Kc=I.kb.required(Object(y.c)(qc())),Zc={name:$.d.SUBCATEGORY,label:Yc,hint:Object(y.c)(Fc()),validate:Hc,placeholder:Object(y.c)(_c()),inputQaType:"treatment-type"},Jc=(Pc=Object(f.b)(e=>{var t=Object(R.l)(e),a=t[$.d.CATEGORY];return{categories:P.a.getCategoryList(e),subcategories:P.a.getSubCategoryList(e),offerCatalogCategories:P.a.getOfferCatalogCategoryList(e),subcategoryId:t?t.subcategory:null,category:a}},{}),Object(E.f)(Sc=Pc((Tc=jc=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"getCategoryModalUrl",()=>{var e={mode:Object(R.e)(this.props),packageId:Object(R.h)(this.props),groupId:Object(R.d)(this.props)};return N.ab(e)}),l()(this,"handleSelectSuccess",e=>{var{change:t}=this.props;t($.d.SUBCATEGORY,e)}),l()(this,"handleCategoryChange",e=>{var{offerCatalogCategories:t}=this.props,a=t.find(t=>t.id===e);this.props.change($.d.CATEGORY,{id:a.id,name:a.name})}),l()(this,"renderCategoryModal",()=>m.a.createElement(Rc.a,{onCategorySelection:this.handleCategoryChange})),l()(this,"renderTreatmentType",()=>{var{isMatch:e,subcategories:t,subcategoryId:a,categories:r,openSelectSubcategoryModal:n}=this.props,c=t.find(e=>e.id===a),o=Object(ea.e)(),i=!(!e&&!o);return i?m.a.createElement(C.a,{onAction:n},m.a.createElement(na.s,Q()({readOnly:!0},Zc,{input:{value:c&&c.name,onFocus:Jt.a,onChange:Jt.a,onBlur:Jt.a,onDragStart:Jt.a,onDrop:Jt.a},className:ba.a.field,grow:1,xpos:"single",suffix:m.a.createElement(ra.b,{name:"arrow-down-cropped",size:"small",color:"gray-7"}),inlineSuffix:!0,validate:Hc,qaType:"searchable-select-mobile"}))):m.a.createElement(I.D,Q()({},Zc,{className:ba.a.field,isReshedulEnabled:!0,isMobile:i,emptyPlaceholder:m.a.createElement(J.Placeholder,{variant:"small",iconColor:"original",icon:"shedul/image-64-placeholder-search",name:Object(y.i)("service setup","No treatments type found")}),xpos:"single"}),r.map(e=>m.a.createElement(aa.a,{isMobile:i,reshedul:!0,text:e.name,key:e.name},t.filter(t=>t.category===e.id).map(e=>m.a.createElement(aa.b,{isMobile:i,reshedul:!0,value:e.id,text:e.name,key:e.name})))))})}render(){var{isMatch:e}=this.props;return m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Card,{rounded:!e,noShadow:e,withSections:!0,padding:e?"small":"large"},!e&&m.a.createElement(J.CardHeader,{title:Object(y.c)(Dc()),caption:Object(y.c)(wc())}),m.a.createElement(J.CardSection,null,m.a.createElement(Cc.a,null,m.a.createElement(J.ReduxForm.TextField,{name:$.d.NAME,label:Uc,"data-qa":"service-name-input",validate:zc,xpos:"single"}),this.renderTreatmentType(),m.a.createElement(J.ReduxForm.StaticField,{xpos:"single",name:$.d.CATEGORY,label:Object(y.c)(Mc()),placeholder:Object(y.c)(Lc()),suffix:m.a.createElement(J.Link,{qaType:"open-offer-item-category-modal",linkTo:this.getCategoryModalUrl()},Object(y.c)(Ac())),validate:Kc}),m.a.createElement(I.s,{name:$.b.ONLINE_BOOKING},m.a.createElement(J.ReduxForm.TextField,{label:Xc,name:$.d.DESCRIPTION,placeholder:Object(y.c)(xc()),validate:Qc,maxLength:1e3,multiline:!0,rows:4,xpos:"single"}),m.a.createElement(J.ReduxForm.SelectField,{label:Object(y.c)(Nc()),name:$.d.GENDER,xpos:"single",ypos:"last"},Object.values(kc.c).map(e=>m.a.createElement("option",{key:e,value:e},Ye.i[e]))))))),m.a.createElement(E.b,{path:N.F,render:()=>m.a.createElement(pa,{onSuccess:this.handleSelectSuccess})}),m.a.createElement(E.b,{path:N.y,render:this.renderCategoryModal}))}},l()(jc,"propTypes",{isMatch:h.a.bool,subcategories:h.a.arrayOf(h.a.shape(Wt.a.propTypes)),categories:h.a.arrayOf(h.a.shape($t.a.propTypes)),subcategoryId:h.a.string,mode:h.a.string,serviceId:h.a.string,groupId:h.a.string,change:h.a.func,openSelectSubcategoryModal:h.a.func,match:h.a.object,category:h.a.object,offerCatalogCategories:h.a.array}),Sc=Tc))||Sc)||Sc);function Wc(){var e=i()(["Enable online bookings"]);return Wc=function(){return e},e}function $c(){var e=i()(["Enable online bookings, choose who the service is available for and add a short description."]);return $c=function(){return e},e}function eo(){var e=i()(["Online booking"]);return eo=function(){return e},e}var to=({isMatch:e})=>m.a.createElement(J.Card,{rounded:!e,noShadow:e,withSections:!0,padding:e?"small":"large"},m.a.createElement(J.CardHeader,{title:Object(y.c)(eo()),caption:Object(y.c)($c()),noSeparator:e}),m.a.createElement(J.CardSection,null,m.a.createElement(I.s,{name:$.b.ONLINE_BOOKING},m.a.createElement(Cc.a,null,m.a.createElement(J.ReduxForm.BooleanField,{name:$.d.ONLINE_BOOKING_ENABLED,label:Object(y.c)(Wc()),widgetType:"switch",xpos:"single",ypos:"last"})))));to.propTypes={isMatch:g.PropTypes.bool};var ao,ro,no,co,oo=to,io=a("LpzX"),so=a("JzhV"),lo=a.n(so);function uo(){var e=i()(["Add pricing option"]);return uo=function(){return e},e}function po(){var e=i()(["Add the pricing options and duration of the service."]);return po=function(){return e},e}function mo(){var e=i()(["Pricing and Duration"]);return mo=function(){return e},e}function bo(){var e=i()(["Duration"]);return bo=function(){return e},e}function fo(){var e=i()(["Blocked time after"]);return fo=function(){return e},e}function go(){var e=i()(["Processing time after"]);return go=function(){return e},e}function ho(){var e=i()(["Extra time type"]);return ho=function(){return e},e}function Eo(){var e=i()(["Enable extra time"]);return Eo=function(){return e},e}function vo(){var e=i()(["Enable extra time after the service."]);return vo=function(){return e},e}function Oo(){var e=i()(["Extra time"]);return Oo=function(){return e},e}function yo(){var e=i()(["Blocktime will build-in time in between appointments e.g 10mins to tidy up or to take a break. Processing time is used to allow formulas to develop, meaning you are free to take other bookings during this time."]);return yo=function(){return e},e}function Po(){var e=i()(["Close"]);return Po=function(){return e},e}function So(){var e=i()(["Delete pricing option"]);return So=function(){return e},e}function jo(){var e=i()(["Edit pricing option"]);return jo=function(){return e},e}function To(){var e=i()(["Advanced pricing options"]);return To=function(){return e},e}function Io(){var e=i()(["Add pricing option"]);return Io=function(){return e},e}function Co(){var e=i()(["Edit"]);return Co=function(){return e},e}function ko(){var e=i()(["Advanced pricing options"]);return ko=function(){return e},e}function Ro(){var e=i()(["e.g. Long hair"]);return Ro=function(){return e},e}var No=[],xo=e=>Object.values(e).filter(e=>e.price||e.priceType||e.specialPrice).length,Ao=(ao=Object(f.b)(e=>{var t=Object(R.l)(e),a=Object(R.k)(e),r=!1,n=!1;return t&&(r=!!t[$.b.SETTINGS][$.d.EXTRA_TIME_TYPE],n=t[$.b.SETTINGS][$.d.EXTRA_TIME_ENABLED]),{currencySymbol:P.a.getCurrencySymbol(e),servicePricingLevels:t?t.servicePricingLevels:No,extraTimeSelected:r,extraTimeEnabled:n,formErrors:a,isPricePerStaffEnabled:P.a.isPricePerStaffEnabled(e)}},{removePricingLevel:re,pushPricingLevel:ee,touchAllFieldsInForm:ne}),Object(E.f)(ro=ao((co=no=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"openAdvancedPricingModal",e=>{var t=Object(R.m)(this.props),a=Object(R.e)(this.props),r=Object(R.d)(this.props);Object(O.c)(N.I({pricingLevelId:e,mode:a,serviceId:t,groupId:r}))}),l()(this,"renderDesktopCard",({field:e,index:t,splFieldName:a,priceType:r,onClose:n})=>{var{currencySymbol:c,isPricePerStaffEnabled:o}=this.props;return m.a.createElement(J.Card,{key:e,padding:"horizontal-16",rounded:!0,color:"lightgray",noShadow:!0,onClose:n,className:r===oe.a.FREE&&lo.a.hideSections,closeQaType:"spl-delete-".concat(this.props.servicePricingLevels[t].id)},m.a.createElement(J.Text,{type:"fresha-h3",color:"gray100"},Object(y.c)("Pricing option %{pricingLevelNumber}",{pricingLevelNumber:t+1})),m.a.createElement("div",{className:lo.a.fields},m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.DURATION),m.a.createElement(J.Form.Label,{type:"fresha-h5",color:"gray100"},$.c.PRICE_TYPE),m.a.createElement(J.Form.Label,{className:Wa()(lo.a.hideable),type:"fresha-h5",color:"gray100",optionalLabel:r===oe.a.STARTS_AT?Object(y.i)('Service form price price field - part of label, e.g. "Price (from)"',"(from)"):void 0},$.c.PRICE),m.a.createElement(J.Form.Label,{className:Wa()(lo.a.hideable),type:"fresha-h5",color:"gray100",optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)")},$.c.SPECIAL_PRICE),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat(a,".").concat($.d.DURATION),className:lo.a.formInput,validate:me.DURATION,normalize:Number,xpos:"single",ypos:"last"},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e/60},t))),m.a.createElement(J.ReduxForm.SelectField,{name:"".concat(a,".").concat($.d.PRICE_TYPE),className:lo.a.formInput,xpos:"single",ypos:"last"},oe.b.map(e=>m.a.createElement("option",{key:e,value:e},oe.c[e]))),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat(a,".").concat($.d.PRICE),className:Wa()(lo.a.formInput,lo.a.hideable),placeholder:"0.00",currencySymbol:c,noEditError:!0,validate:r===oe.a.FREE?void 0:me.PRICE,xpos:"single",ypos:"last"}),m.a.createElement(J.ReduxForm.AmountField,{name:"".concat(a,".").concat($.d.SPECIAL_PRICE),className:Wa()(lo.a.formInput,lo.a.hideable),placeholder:"0.00",currencySymbol:c,noEditError:!0,allowEmpty:!0,validate:r===oe.a.FREE?void 0:me.SPECIAL_PRICE,xpos:"single",ypos:"last"}),m.a.createElement(J.ReduxForm.TextField,{name:"".concat(a,".").concat($.d.SERVICE_PRICING_NAME),className:Wa()(lo.a.formInput,lo.a.pricingName),label:$.c.SERVICE_PRICING_NAME,optionalLabel:Object(y.i)('Service form special price field - part of label, e.g. "Special price (optional)"',"(optional)"),noEditError:!0,validate:me.NAME,placeholder:Object(y.c)(Ro()),xpos:"single",ypos:"last"}),o&&m.a.createElement("div",{className:lo.a.advancedPricingOptions},m.a.createElement(J.Link,{onAction:()=>this.openAdvancedPricingModal(t),qaType:"advanced-pricing-options"},Object(y.c)(ko())))))}),l()(this,"renderDestkopCardWithOverrides",({field:e,index:t,fieldsArray:a,overridesCount:r})=>{var n=a.get(t),{duration:c,priceType:o,price:i}=n,s=n.specialPrice||"-",l=n.name||"-",u=Object(ie.l)(c,"m");return m.a.createElement(J.Card,{key:e,padding:"horizontal-16",rounded:!0,color:"lightgray",noShadow:!0,actionElement:m.a.createElement(J.Link,{onAction:()=>this.openAdvancedPricingModal(t),qaType:"edit-advanced-pricing-options"},Object(y.c)(Co()))},m.a.createElement(J.Text,{type:"fresha-h3",color:"gray100"},Object(y.c)("Pricing option %{pricingLevelNumber}",{pricingLevelNumber:t+1})),m.a.createElement(J.Text,{type:"fresha-paragraph",color:"gray50",qaType:"advanced-pricing-selection-label"},Object(y.c)("%{advancedPricingOptionsCount} Advanced pricing option set.",{advancedPricingOptionsCount:r})),m.a.createElement("div",{className:lo.a.overridenValues},m.a.createElement(J.Text,{type:"fresha-h5"},$.c.DURATION),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.PRICE_TYPE),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.PRICE),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.SPECIAL_PRICE),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.SERVICE_PRICING_NAME),m.a.createElement(J.Text,{type:"fresha-paragraph"},u),m.a.createElement(J.Text,{type:"fresha-paragraph"},oe.c[o]),m.a.createElement(se.a,{isReshedulEnabled:!0,price:i,type:"fresha-caption",bold:!0}),"-"!==s?m.a.createElement(se.a,{isReshedulEnabled:!0,price:s,type:"fresha-caption",bold:!0}):m.a.createElement(J.Text,{type:"fresha-paragraph"},"-"),m.a.createElement(J.Text,{type:"fresha-paragraph"},l)))}),l()(this,"renderDesktopPricingLevels",({fields:e})=>e.map((e,t,a)=>{var r="".concat($.d.SERVICE_PRICING_LEVELS,"[").concat(t,"]"),{priceType:n,employeeOverrides:c}=a.get(t),o=a.length>1?()=>this.props.removePricingLevel(t):void 0,i=c?xo(c):0;return i>0?this.renderDestkopCardWithOverrides({field:e,index:t,fieldsArray:a,overridesCount:i}):this.renderDesktopCard({field:e,index:t,splFieldName:r,priceType:n,onClose:o})})),l()(this,"renderMobilePricingLevels",({fields:e})=>{var{isMatch:t,isPricePerStaffEnabled:a}=this.props,r=m.a.createElement(J.RowButton,{className:lo.a.addPricing,padding:"small",noBorder:!0,leftLabel:m.a.createElement(J.Text,{qaType:"add-another-pricing-option",type:"fresha-paragraph",color:"blue200"},Object(y.c)(Io())),onAction:this.addPricingLevel,suffix:m.a.createElement(J.Icon,{name:"plus-circled",size:24,buttonColor:"blue200",variant:"button"})});return 1===e.length?m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Card,{noShadow:!0,padding:"horizontal-16",className:Wa()(lo.a.fields,lo.a.formFields)},m.a.createElement(qt,{index:0})),t&&m.a.createElement(m.a.Fragment,null,a&&m.a.createElement(J.RowButton,{padding:"small",leftLabel:m.a.createElement(J.Text,{qaType:"advanced-pricing-options",type:"fresha-paragraph",color:"blue200"},Object(y.c)(To())),onAction:()=>this.openAdvancedPricingModal(0)}),r)):m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:Wa()(lo.a.fields,lo.a.cards)},e.map((e,t,a)=>{var{price:r,specialPrice:n,priceType:c,name:o,duration:i,employeeOverrides:s}=a.get(t),{price:l,oldPrice:u}=Object(io.a)(Number(r),Number(n),c),d=Object(ie.l)(i,"m"),p=s&&xo(s),b=m.a.createElement(m.a.Fragment,null,m.a.createElement(J.DropdownAction,{onAction:()=>this.props.openPriceModal(t)},Object(y.c)(jo())),m.a.createElement(J.DropdownAction,{danger:!0,onAction:()=>this.props.removePricingLevel(t),qaType:"delete-spl"},Object(y.c)(So()))),f=m.a.createElement(J.DropdownMenuIcon,{icon:J.DropdownMenuIcon.ICON.OPTIONS,iconSize:16,buttonColor:"lightGray200",variant:"button","data-qa":"service-variant-options",align:"right",closeActionText:Object(y.c)(Po())},b);return m.a.createElement(J.Card,{key:e,rounded:!0,color:"lightgray",noShadow:!0,withSections:!0,actionElement:f},m.a.createElement(J.CardHeader,{title:m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Text,{type:"fresha-h4",weight:"bold",color:"gray100"},Object(y.c)("Pricing option %{index}",{index:t+1})),p>0&&m.a.createElement(J.Text,{type:"fresha-paragraph",color:"gray50"},Object(y.c)("%{advancedPricingOptionsCount} Advanced pricing option set.",{advancedPricingOptionsCount:p})))}),m.a.createElement(J.CardSection,{className:lo.a.mobileServicePricingCards},m.a.createElement(J.Text,{type:"fresha-h5"},$.c.DURATION),m.a.createElement(J.Text,{type:"fresha-paragraph"},d),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.PRICE_TYPE),m.a.createElement(J.Text,{type:"fresha-paragraph"},oe.c[c]),m.a.createElement(J.Text,{type:"fresha-h5"},u?$.c.SPECIAL_PRICE:$.c.PRICE),m.a.createElement(se.a,{isReshedulEnabled:!0,price:l,type:"fresha-caption",bold:!0}),u&&m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Text,{type:"fresha-h5"},$.c.PRICE),m.a.createElement(se.a,{isReshedulEnabled:!0,price:u,type:"fresha-caption",bold:!0,strikethrough:!0})),m.a.createElement(J.Text,{type:"fresha-h5"},$.c.SERVICE_PRICING_NAME),m.a.createElement(J.Text,{type:"fresha-paragraph"},o||"-")))})),r)}),l()(this,"renderExtraTimeOptions",()=>{var{extraTimeSelected:e,extraTimeEnabled:t,isMatch:a}=this.props,r=Object(y.c)(yo());return m.a.createElement(m.a.Fragment,null,m.a.createElement(J.Text,{color:"gray100",type:"fresha-h3"},Object(y.c)(Oo())),m.a.createElement(J.Text,{color:"gray100",type:"field-helper-text",className:lo.a.subheader},Object(y.c)(vo())),m.a.createElement(Cc.a,null,m.a.createElement(I.s,{name:$.b.SETTINGS,className:Wa()(lo.a.extraTimeOptions,t&&lo.a.extraTimeEnabled)},m.a.createElement(J.ReduxForm.BooleanField,{name:$.d.EXTRA_TIME_ENABLED,label:Object(y.c)(Eo()),className:lo.a.extraTimeToggle,widgetType:"switch",xpos:"single",ypos:"last"}),t&&[m.a.createElement(J.ReduxForm.SelectField,{name:$.d.EXTRA_TIME_TYPE,label:m.a.createElement(na.k,{tooltip:!a&&r},Object(y.c)(ho())),helperText:a?r:void 0,className:lo.a.extraTimeType,xpos:"single",ypos:"last"},m.a.createElement("option",{value:"processing"},Object(y.c)(go())),m.a.createElement("option",{value:"blocking"},Object(y.c)(fo()))),m.a.createElement(J.ReduxForm.SelectField,{name:$.d.EXTRA_TIME,label:Object(y.c)(bo()),className:lo.a.extraTime,disabled:!e,hideInvalidLabel:!0,parse:Number,xpos:"single",ypos:"last"},Ce.a.map(({value:e,text:t})=>m.a.createElement("option",{key:e,value:e},t)))])))}),l()(this,"addPricingLevel",()=>{var{servicePricingLevels:e,formErrors:t,touchAllFieldsInForm:a}=this.props;1===e.length&&Object.keys(t.servicePricingLevels[0]||{}).length>0?a(0):this.props.openPriceModal()})}render(){var{isMatch:e}=this.props;return m.a.createElement(J.Card,{rounded:!e,noShadow:e,withSections:!0,padding:e?"small":"large",className:lo.a.self},m.a.createElement(J.CardHeader,{title:Object(y.c)(mo()),caption:Object(y.c)(po()),noSeparator:e}),m.a.createElement(J.CardSection,{noPadding:e},m.a.createElement("div",{className:lo.a.pricingOptions},m.a.createElement(I.o,{name:$.d.SERVICE_PRICING_LEVELS,component:e?this.renderMobilePricingLevels:this.renderDesktopPricingLevels,rerenderOnEveryChange:!0})),!e&&m.a.createElement(J.Link,{className:lo.a.addPricing,onAction:this.props.pushPricingLevel,icon:"plus-circled",qaType:"add-another-pricing-option"},Object(y.c)(uo()))),m.a.createElement(J.CardSection,null,this.renderExtraTimeOptions()))}},l()(no,"propTypes",{currencySymbol:h.a.string,extraTimeSelected:h.a.bool,isMatch:h.a.bool,removePricingLevel:h.a.func,pushPricingLevel:h.a.func,touchAllFieldsInForm:h.a.func,extraTimeEnabled:h.a.bool,formErrors:h.a.object,openPriceModal:h.a.func,servicePricingLevels:h.a.arrayOf(h.a.shape({id:h.a.string})),isPricePerStaffEnabled:h.a.bool}),ro=co))||ro)||ro),Lo=a("HIda"),Mo=a("BDlT"),wo=a.n(Mo);function Do(){var e=i()(["Enable staff commission"]);return Do=function(){return e},e}function _o(){var e=i()(["Calculate staff commission when the service is sold."]);return _o=function(){return e},e}function Fo(){var e=i()(["Staff commission"]);return Fo=function(){return e},e}function qo(){var e=i()(["See all staff"]);return qo=function(){return e},e}function Bo(){var e=i()(["See less"]);return Bo=function(){return e},e}function Vo(){var e=i()(["Select All"]);return Vo=function(){return e},e}function Go(){var e=i()(["Assign staff to the service and manage staff commission"]);return Go=function(){return e},e}function Uo(){var e=i()(["Staff"]);return Uo=function(){return e},e}var Yo=e=>m.a.createElement(J.UserPreview,{firstName:e.firstName,lastName:e.lastName,url:e.avatar&&e.avatar.thumbUrl}),Xo=Object(W.d)(Object(T.g)(),Object(f.b)(e=>({employees:Object(R.c)(e)}))),zo=({employees:e,isMatch:t})=>{var[a,r]=Object(p.useState)(!1),n=e.map(e=>({name:e.name,value:e.id,data:e}));return m.a.createElement(J.Card,{rounded:!t,noShadow:t,withSections:!0,padding:t?"small":"large",className:""},m.a.createElement(J.CardHeader,{title:Object(y.c)(Uo()),caption:Object(y.c)(Go()),noSeparator:t}),m.a.createElement(J.CardSection,{className:Wa()(wo.a.staffList,{[wo.a["list-4"]]:n.length>6,[wo.a["list-6"]]:n.length>8})},m.a.createElement(Lo.a,{name:$.b.STAFF},m.a.createElement(J.ReduxForm.CheckBoxFieldArrayField,{verticalGap:t?"small":"xsmall",name:$.d.EMPLOYEES,values:[{values:n,label:Object(y.c)(Vo())}],valign:"center",noMargin:!0,noPadding:!0,noIndent:!0,noBorder:!0,columns:2,checkboxComponent:Yo,groupClassName:!a&&wo.a.checkboxes,className:wo.a.checkboxList})),m.a.createElement(J.Link,{onAction:()=>r(!a),className:wo.a.showMoreBtn},a?Object(y.c)(Bo()):Object(y.c)(qo()))),m.a.createElement(J.CardSection,null,m.a.createElement(Cc.a,null,m.a.createElement(J.Form.SectionHeader,{titleType:"fresha-h3",title:Object(y.c)(Fo()),subtitle:Object(y.c)(_o())}),m.a.createElement(Lo.a,{name:$.b.SETTINGS},m.a.createElement(J.ReduxForm.BooleanField,{name:$.d.COMMISSION_ENABLED,label:Object(y.c)(Do()),widgetType:"switch",xpos:"single",ypos:"last"})))))};zo.propTypes={employees:h.a.arrayOf(h.a.object),isMatch:h.a.bool};var Ho,Qo,Ko,Zo,Jo=Xo(zo);function Wo(){var e=i()(["Voucher expiry period"]);return Wo=function(){return e},e}function $o(){var e=i()(["Enable voucher sales"]);return $o=function(){return e},e}function ei(){var e=i()(["Voucher sales"]);return ei=function(){return e},e}function ti(){var e=i()(["Edit"]);return ti=function(){return e},e}function ai(){var e=i()(["Tax"]);return ai=function(){return e},e}function ri(){var e=i()(["No tax"]);return ri=function(){return e},e}function ni(){var e=i()(["Tax"]);return ni=function(){return e},e}function ci(){var e=i()(["Set the tax rate"]);return ci=function(){return e},e}function oi(){var e=i()(["Sales settings"]);return oi=function(){return e},e}function ii(){var e=i()(["Custom setting"]);return ii=function(){return e},e}function si(){var e=i()(["Default setting"]);return si=function(){return e},e}var li,ui,di,pi=(Ho=Object(f.b)((e,t)=>{var a=Object(R.l)(e)[$.b.SETTINGS];return{multipleTaxes:Object(R.l)(e)[$.b.TAXES][j.a],mode:Object(R.e)(t),serviceId:Object(R.m)(t),locations:P.a.getExistingLocationList(e),extraTimeSelected:!!a[$.d.EXTRA_TIME_TYPE],pricesIncludeTax:P.a.getProviderPricesIncludeTax(e),voucherEnabled:a[$.d.VOUCHER_ENABLED],voucherExpirationPeriod:P.a.getProviderVoucherExpirationPeriod(e),taxRates:P.a.getTaxRatesList(e)}},{}),Object(E.f)(Qo=Ho((Zo=Ko=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"openSelectTaxModal",()=>{var e={mode:this.props.mode,serviceId:this.props.serviceId};Object(O.c)(N.bb(e))})}render(){var e,{isMatch:t,multipleTaxes:a=[],voucherEnabled:r,voucherExpirationPeriod:n,pricesIncludeTax:c,locations:o,taxRates:i}=this.props,s=a.every(({taxRate:e})=>e===v.a)?Object(y.c)(si()):Object(y.c)(ii()),l=o[0].defaultServiceTaxRate,u=null===(e=Ye.h.find(e=>e.value===n))||void 0===e?void 0:e.label;return m.a.createElement(Lo.a,{name:$.b.SETTINGS},m.a.createElement(J.Card,{rounded:!t,noShadow:t,withSections:!0,padding:t?"small":"large"},m.a.createElement(J.CardHeader,{title:Object(y.c)(oi()),noSeparator:t}),m.a.createElement(J.CardSection,null,m.a.createElement(J.Form.SectionHeader,{titleType:"fresha-h3",title:Object(y.c)(ci())}),m.a.createElement(Cc.a,null,1===o.length?m.a.createElement(J.ReduxForm.SelectField,{name:$.d.TAX_RATE,xpos:"single",ypos:"last",label:Object(y.c)(ni()),optionalLabel:c?Object(y.i)('Tax field - part of label, e.g. "Tax(Included in price)"',"(Included in price)"):Object(y.i)('Tax field - part of label, e.g. "Tax(Added to price)"',"(Added to price)"),hideInvalidLabel:!0},m.a.createElement("option",{value:""},Object(y.c)(ri())),m.a.createElement("option",{key:"use-default",value:v.a},Object(y.c)("Default: %{taxName}",{taxName:Object(Br.b)(l)})),i.map(e=>m.a.createElement("option",{key:e.id,value:e.id},Object(Br.b)(e)))):m.a.createElement(J.Form.StaticField,{xpos:"single",ypos:"last",label:Object(y.c)(ai()),optionalLabel:c?Object(y.i)('Tax field - part of label, e.g. "Tax(Included in price)"',"(Included in price)"):Object(y.i)('Tax field - part of label, e.g. "Tax(Added to price)"',"(Added to price)"),value:s,suffix:m.a.createElement(J.Link,{onAction:this.openSelectTaxModal},Object(y.c)(ti()))}))),m.a.createElement(J.CardSection,null,m.a.createElement(J.Form.SectionHeader,{titleType:"fresha-h3",title:Object(y.c)(ei())}),m.a.createElement(Cc.a,null,m.a.createElement(J.ReduxForm.BooleanField,{name:$.d.VOUCHER_ENABLED,label:Object(y.c)($o()),widgetType:"switch",xpos:"single",ypos:!r&&"last"}),r&&m.a.createElement(J.ReduxForm.SelectField,{name:$.d.VOUCHER_EXPIRATION_PERIOD,label:Object(y.c)(Wo()),hideInvalidLabel:!0,disabled:!r,xpos:"single",ypos:r&&"last"},u&&m.a.createElement("option",{value:Ye.g},Object(y.c)("Default (%{defaultOption})",{defaultOption:u})),Ye.h.map(e=>m.a.createElement("option",{key:e.value,value:e.value},e.label)))))))}},l()(Ko,"propTypes",{mode:h.a.string,serviceId:h.a.string,isMatch:h.a.bool,multipleTaxes:h.a.arrayOf(h.a.object),voucherEnabled:h.a.bool,voucherExpirationPeriod:h.a.string,pricesIncludeTax:h.a.bool,locations:h.a.arrayOf(h.a.opbject),taxRates:h.a.arrayOf(h.a.object)}),Qo=Zo))||Qo)||Qo);function mi(){var e=i()(["Save"]);return mi=function(){return e},e}function bi(){var e=i()(["Cancel"]);return bi=function(){return e},e}function fi(){var e=i()(["Delete"]);return fi=function(){return e},e}function gi(){var e=i()(["Advanced pricing options"]);return gi=function(){return e},e}function hi(){var e=i()(["Add a pricing option"]);return hi=function(){return e},e}function Ei(){var e=i()(["Edit a pricing option"]);return Ei=function(){return e},e}var vi,Oi,yi,Pi=Object(f.b)((e,t)=>({servicePricingLevels:Object(R.l)(e).servicePricingLevels,formSyncErrors:Object(R.k)(e).servicePricingLevels,pricingLevelId:Object(R.n)(t),isPricePerStaffEnabled:P.a.isPricePerStaffEnabled(e)}),{pushPricingLevel:ee,popPricingLevel:te,cancelPricingLevelEdition:ae,removePricingLevel:re,touchAllFieldsInForm:ne})((di=ui=class extends p.PureComponent{constructor(e){super(e),l()(this,"openAdvancedPricingModal",e=>{var t=Object(R.m)(this.props),a=Object(R.e)(this.props),r=Object(R.d)(this.props);Object(O.c)(N.I({pricingLevelId:e,mode:a,serviceId:t,groupId:r}))}),l()(this,"goBack",()=>{Object(O.b)(O.a.location.pathname.split("price")[0])}),l()(this,"savePricingLevel",()=>{var{servicePricingLevels:e,formSyncErrors:t,pricingLevelId:a,touchAllFieldsInForm:r}=this.props,n=a||e.length-1;0===Object.keys(t[n]).length?this.saveChanges():r(n)}),l()(this,"saveChanges",()=>{this.setState({saveChanges:!0},this.goBack)}),l()(this,"removePricingLevel",()=>{var{removePricingLevel:e,pricingLevelId:t}=this.props;e(t),this.saveChanges()});var{servicePricingLevels:t,pricingLevelId:a}=e,r={saveChanges:!1};void 0!==a&&(r.pricingLevelData=t[a]),this.state=r}componentDidMount(){var{pushPricingLevel:e,pricingLevelId:t}=this.props;void 0===t&&e()}componentWillUnmount(){var{servicePricingLevels:e,pricingLevelId:t,cancelPricingLevelEdition:a,popPricingLevel:r}=this.props;if(!(void 0!==t)||1!==e.length){var{saveChanges:n,pricingLevelData:c}=this.state;!1===n&&(c?a(t,c):e.length>1&&r())}}render(){var{servicePricingLevels:e,pricingLevelId:t,isPricePerStaffEnabled:a}=this.props,r=void 0!==t,n=r?Object(y.c)(Ei()):Object(y.c)(hi()),c=t||e.length-1;return r&&1===e.length?null:m.a.createElement(J.ModalFullScreen,{color:"white"},m.a.createElement(J.ModalFullScreenMobileHeader,{center:!0,onClose:this.goBack,title:n}),m.a.createElement(J.FullScreenModalContent,{mobileLayout:!0},m.a.createElement(qt,{isMatch:!0,index:c}),a&&m.a.createElement(J.Link,{onAction:()=>this.openAdvancedPricingModal(c),qaType:"advanced-pricing-options"},Object(y.c)(gi()))),m.a.createElement(J.ModalFullScreenMobileFooter,{buttons:[r?m.a.createElement(J.Button,{variant:"secondary",onAction:this.removePricingLevel,color:"red200"},Object(y.c)(fi())):m.a.createElement(J.Button,{qaType:"cancel-spl",variant:"secondary",onAction:this.goBack},Object(y.c)(bi())),m.a.createElement(J.Button,{qaType:"save-spl",onAction:this.savePricingLevel,variant:"primary"},Object(y.c)(mi()))]}))}},l()(ui,"propTypes",{pushPricingLevel:h.a.func,popPricingLevel:h.a.func,cancelPricingLevelEdition:h.a.func,removePricingLevel:h.a.func,touchAllFieldsInForm:h.a.func,servicePricingLevels:h.a.object,formSyncErrors:h.a.arrayOf(h.a.object),pricingLevelId:h.a.string,isPricePerStaffEnabled:h.a.bool}),li=di))||li,Si=a("Kz7R"),ji=a.n(Si);function Ti(){var e=i()(["When enabled, a combination of staff and resource will be needed to book the service"]);return Ti=function(){return e},e}function Ii(){var e=i()(["Resource required"]);return Ii=function(){return e},e}function Ci(){var e=i()(["Enable resources required for the service."]);return Ci=function(){return e},e}function ki(){var e=i()(["Resources"]);return ki=function(){return e},e}var Ri,Ni,xi,Ai=Object(f.b)(e=>{var t=Object(R.l)(e)[$.b.ROOMS],a=P.a.getExistingLocationList(e),r=P.a.getRoomLocationDict(e),n=Object.entries(r).filter(e=>e[1].length>0).map(([e,t])=>({label:a.find(t=>t.id===e).name,values:t.map(e=>({name:e.name,value:e.id}))}));return{roomRequired:t[$.d.ROOM_REQUIRED],roomsValues:n}},{})((yi=Oi=class extends p.PureComponent{render(){var{roomRequired:e,roomsValues:t,isMatch:a}=this.props;return m.a.createElement(Lo.a,{name:$.b.ROOMS},m.a.createElement(J.Card,{rounded:!a,withSections:!0,padding:a?"small":"large"},m.a.createElement(J.CardHeader,{title:Object(y.c)(ki()),caption:Object(y.c)(Ci()),noSeparator:a}),m.a.createElement(J.CardSection,null,m.a.createElement(Cc.a,null,m.a.createElement(J.ReduxForm.BooleanField,{name:$.d.ROOM_REQUIRED,asSwitchMobile:!0,label:Object(y.c)(Ii()),helperText:Object(y.c)(Ti()),widgetType:"switch",xpos:"single",ypos:"last"}),e&&m.a.createElement(J.ReduxForm.CheckBoxFieldArrayField,{name:$.d.ROOMS,className:ji.a.checkboxList,verticalGap:"xsmall",values:t,columns:a?1:2,hideSelectAllCheckbox:!0,noMargin:!0,noPadding:!0,noIndent:!0,noBorder:!0,hideCount:!0})))))}},l()(Oi,"propTypes",{roomRequired:h.a.bool,isMatch:h.a.bool,roomsValues:h.a.arrayOf(h.a.object)}),vi=yi))||vi;function Li(){var e=i()(["Edit single service"]);return Li=function(){return e},e}function Mi(){var e=i()(["Add a new single service"]);return Mi=function(){return e},e}var wi,Di,_i,Fi,qi,Bi,Vi=Object(T.g)()(Ri=Object(E.f)((xi=Ni=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"openPriceModal",e=>{var t=Object(R.e)(this.props),a=Object(R.m)(this.props);Object(O.c)(N.W({pricingLevelId:e,mode:t,serviceId:a}))}),l()(this,"openSelectSubcategoryModal",()=>{var e=Object(R.e)(this.props),t=Object(R.m)(this.props);Object(O.c)(N.fb({mode:e,serviceId:t}))})}render(){var{headerOnAction:e,submit:t,isMatch:a,deleteService:r,showResourcesSection:n,change:c,submitting:o}=this.props,i=Object(R.e)(this.props),s=i===Ye.j.ADD?Object(y.c)(Mi()):Object(y.c)(Li());return m.a.createElement(m.a.Fragment,null,m.a.createElement(Cc.b,{isSaving:o,title:s,onClose:e,onDelete:i!==Ye.j.ADD&&r,onSave:t,qaDataView:"service"},m.a.createElement(Jc,{isMatch:a,openSelectSubcategoryModal:this.openSelectSubcategoryModal,change:c}),m.a.createElement(oo,{isMatch:a}),m.a.createElement(Jo,{isMatch:a}),m.a.createElement(Ao,{isMatch:a,openPriceModal:this.openPriceModal}),n&&m.a.createElement(Ai,{isMatch:a}),m.a.createElement(pi,{isMatch:a})),a&&m.a.createElement(E.b,{path:N.t,component:Pi}))}},l()(Ni,"propTypes",{submit:h.a.func,headerOnAction:h.a.func,isMatch:h.a.bool,submitting:h.a.bool,deleteService:h.a.func,showResourcesSection:h.a.bool,change:h.a.func}),Ri=xi))||Ri)||Ri;function Gi(){var e=i()(["Edit Service"]);return Gi=function(){return e},e}function Ui(){var e=i()(["New Service"]);return Ui=function(){return e},e}function Yi(){var e=i()(["Tax added to prices"]);return Yi=function(){return e},e}function Xi(){var e=i()(["Tax included in prices"]);return Xi=function(){return e},e}function zi(){var e=i()(["Change Tax"]);return zi=function(){return e},e}function Hi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Qi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ki(e,t,a){var r=Object(R.m)(t),n=Object(R.e)(t),c=n===Ye.j.EDIT,o=P.a.getEmployeeList(e).filter(e=>e.providesServices),i=c&&r?P.a.getServiceFormObject(e,r):{},s=Object(R.d)(t),l=null;if(s){var{id:u,name:d}=P.a.getOfferCatalogCategory(e,s);l={id:u,name:d}}var p={[$.d.NAME]:null,[$.d.CATEGORY]:l,[$.d.SUBCATEGORY]:null,[$.d.SERVICE_PRICING_LEVELS]:[$.a],[$.d.ONLINE_BOOKING_ENABLED]:!0,[$.d.DESCRIPTION]:null,[$.d.GENDER]:"everyone",[$.d.EMPLOYEES]:o.map(e=>e.id),[$.d.ROOM_REQUIRED]:!1,[$.d.ROOMS]:[],[$.d.VOUCHER_ENABLED]:!0,[$.d.VOUCHER_EXPIRATION_PERIOD]:"default",[$.d.COMMISSION_ENABLED]:!0,[$.d.EXTRA_TIME_TYPE]:a?"processing":null,[$.d.TAX_RATE]:v.a,[$.d.EXTRA_TIME]:900,[j.a]:Object(j.c)(e)},m=(...e)=>e.reduce((e,t)=>(e[t]=c?i[t]:p[t],e),{}),{[$.d.EXTRA_TIME_TYPE]:b}=m($.d.EXTRA_TIME_TYPE);return Qi(Qi({[$.d.MODE]:n,[$.d.SERVICE_ID]:r},m($.d.NAME,$.d.CATEGORY,$.d.SUBCATEGORY,$.d.SERVICE_PRICING_LEVELS)),{},{[$.b.ONLINE_BOOKING]:m($.d.ONLINE_BOOKING_ENABLED,$.d.DESCRIPTION,$.d.GENDER),[$.b.STAFF]:m($.d.EMPLOYEES),[$.b.ROOMS]:m($.d.ROOM_REQUIRED,$.d.ROOMS),[$.b.SETTINGS]:Qi(Qi(Qi({extraTimeType:a?b||p[$.d.EXTRA_TIME_TYPE]:b},m($.d.TAX_RATE,$.d.VOUCHER_ENABLED,$.d.VOUCHER_EXPIRATION_PERIOD,$.d.COMMISSION_ENABLED)),a&&{[$.d.EXTRA_TIME_ENABLED]:!!i[$.d.EXTRA_TIME_TYPE]}),{},{[$.d.EXTRA_TIME]:i[$.d.EXTRA_TIME]||p[$.d.EXTRA_TIME]}),[$.b.TAXES]:m(j.a)})}var Zi=(wi=Object(T.g)(),Di=Object(f.b)((e,t)=>{var a=Object(R.m)(t),r=Object(R.e)(t),n=Object(R.d)(t),c=P.a.getEmployeeList(e).filter(e=>e.providesServices),o=P.a.isServicesRevampEnabled(e);return{mode:r,serviceId:a,groupId:n,showResourcesSection:P.a.getRoomList(e).length>0,showStaffSection:c.length>0,employees:c,currencySymbol:P.a.getCurrencySymbol(e),pricesIncludeTax:P.a.getProviderPricesIncludeTax(e),initialValues:Ki(e,t,o),isServicesRevampEnabled:o,isPricePerfStaffEnabled:P.a.isPricePerStaffEnabled(e)}},{onSubmit:k.g}),_i=Object(I.q)({form:$.e,validate:fe}),Object(E.f)(Fi=wi(Fi=Di(Fi=_i((Bi=qi=class extends p.PureComponent{constructor(e){super(e),l()(this,"renderTaxModal",()=>{var{isServicesRevampEnabled:e}=this.props,t=this.changeTaxModal;return m.a.createElement(t,{redesignedModal:e})}),l()(this,"goBack",()=>{Object(O.c)(N.z)}),l()(this,"deleteService",()=>{var{mode:e,serviceId:t,groupId:a}=this.props;S.a.verifyServiceDelete(t).then(r=>{var n=d()(r,"body.meta.affectedMarketingCampaignsCount",0),c=d()(r,"body.meta.affectedLocationProfiles",[]),o=d()(r,"body.meta.affectedPackages",[]);Object(O.c)(N.O({mode:e,serviceId:t,groupId:a}),{affectedMarketingCampaigns:n,affectedLocationProfiles:c,affectedPackages:o})})}),this.setChangeTaxModal(e)}UNSAFE_componentWillReceiveProps(e){e.pricesIncludeTax!==this.props.pricesIncludeTax&&this.setChangeTaxModal(e)}setChangeTaxModal(e){this.changeTaxModal=Object(I.r)({formName:$.e,name:$.b.TAXES,partialPath:N.g,header:Object(y.c)(zi()),subheader:e.pricesIncludeTax?Object(y.c)(Xi()):Object(y.c)(Yi()),size:"small",content:m.a.createElement(j.b,{type:"service"})})}render(){var{isMatch:e,mode:t,showResourcesSection:a,showStaffSection:r,submit:n,submitting:c,change:o,isServicesRevampEnabled:i,isPricePerfStaffEnabled:s}=this.props,l={headerOnAction:this.goBack,header:t===Ye.j.ADD?Object(y.c)(Ui()):Object(y.c)(Gi()),isMatch:e,showResourcesSection:a,showStaffSection:r,submit:n,change:o,submitting:c,deleteService:this.deleteService},u=i?Vi:e?ic:Ic,d=i?it:z,p=i?St:Xe.a;return m.a.createElement(C.b,null,m.a.createElement(u,l),m.a.createElement(E.b,{path:N.g,render:this.renderTaxModal}),m.a.createElement(E.b,{path:N.H,component:p}),m.a.createElement(E.b,{path:N.j,component:d}),m.a.createElement(E.b,{path:N.f,component:Ue}),s&&m.a.createElement(E.b,{path:N.e,component:Xt}))}},l()(qi,"propTypes",{isMatch:h.a.bool.isRequired,pricesIncludeTax:h.a.bool,className:h.a.string,children:h.a.node,mode:h.a.string,serviceId:h.a.string,groupId:h.a.string,showResourcesSection:h.a.bool,showStaffSection:h.a.bool,submit:h.a.func,change:h.a.func,submitting:h.a.bool,isServicesRevampEnabled:h.a.bool,isPricePerfStaffEnabled:h.a.bool}),Fi=Bi))||Fi)||Fi)||Fi)||Fi);t.a=Object(b.hot)(Zi)},"JA/O":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var r=a("VkAN"),n=a.n(r),c=a("lSNA"),o=a.n(c),i=a("q1tI"),s=a.n(i),l=a("17x9"),u=a.n(l),d=a("ePPS"),p=a("8TPp"),m=a("+hsN"),b=a("9wjN"),f=a("XOD0"),g=a("+Gzo"),h=a("bsa7");function E(){var e=n()(["Notifications"]);return E=function(){return e},e}class v extends i.PureComponent{constructor(...e){super(...e),o()(this,"goBackIfNotMobile",()=>{Object(b.f)()||Object(f.b)(g.z)})}componentDidMount(){this.goBackIfNotMobile()}componentDidUpdate(){this.goBackIfNotMobile()}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.d,{title:Object(d.c)(E()),withoutBorder:!0,mobileRightContent:s.a.createElement(p.a,{icon:"settings",linkTo:m.E})}),s.a.createElement(h.a,null))}}o()(v,"propTypes",{location:u.a.shape({pathname:u.a.string})})},KHTd:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return R}));var r,n,c,o=a("pVnL"),i=a.n(o),s=a("VkAN"),l=a.n(s),u=a("lSNA"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("/MKj"),f=a("17x9"),g=a.n(f),h=a("ePPS"),E=a("5ZU+"),v=a("nbpM"),O=a("XOD0"),y=a("q9fD"),P=a("UtX9"),S=a("Xqy3"),j=a("iA5e"),T=a("1063"),I=a("Imp1");function C(){var e=l()(["New Service"]);return C=function(){return e},e}function k(){var e=l()(["Edit Service"]);return k=function(){return e},e}var R=Object(b.b)((e,t)=>{var a=Object(j.m)(t);return{editMode:Object(j.e)(t)===S.j.EDIT,serviceId:Object(j.m)(t),service:v.a.getService(e,a),isServicesRevampEnabled:v.a.isServicesRevampEnabled(e)}})((c=n=class extends p.PureComponent{constructor(...t){super(...t),d()(this,"state",{loading:!0,error:!1}),d()(this,"handleRetry",()=>{e.location.reload(!0)}),d()(this,"goBack",()=>{Object(O.c)(T.z)})}componentDidMount(){this.fetchData()}fetchData(){var{editMode:e,serviceId:t}=this.props;E.a.bulk([E.a.readEmployeeList,E.a.readRoomList,E.a.readCategoryList,E.a.readTaxRateList,E.a.readLocationList,...e?[[E.a.readItemLocationTaxRatesList,{itemId:t,itemType:y.b.SERVICE}],[E.a.readService,t]]:[]]).then(()=>{if(e){var{service:t}=this.props;t&&!t.deletedAt||Object(O.b)(T.z)}this.setState({loading:!1,error:!1})}).catch(e=>{this.setState({loading:!1,error:e})})}render(){var{serviceId:e,isServicesRevampEnabled:t}=this.props,{loading:a,error:r}=this.state;if(r&&t)throw r;if(a||r){var n=t?{}:{header:e?Object(h.c)(k()):Object(h.c)(C()),headerSecondaryAction:this.goBack,onClose:this.handleRetry};return m.a.createElement(P.a,i()({},n,{type:"white"}))}return m.a.createElement(I.a,null)}},d()(n,"propTypes",{editMode:g.a.bool,serviceId:g.a.string,service:g.a.object,location:g.a.shape({search:g.a.string}),isServicesRevampEnabled:g.a.bool}),r=c))||r}).call(this,a("yLpj"))},NFlB:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("PhEd"),f=a("/MKj"),g=a("nbpM"),h=a("5o92"),E=a("ePPS"),v=a("SFs4"),O=a("3wSE");function y(){var e=i()(["Online booking will be disabled for"]);return y=function(){return e},e}function P(){var e=i()(["Online booking will be disabled for"]);return P=function(){return e},e}var S=Object(f.b)(e=>({isServicesRevampEnabled:g.a.isServicesRevampEnabled(e)}))((c=n=class extends u.PureComponent{render(){var{affectedLocationProfiles:e,isServicesRevampEnabled:t}=this.props;return t?d.a.createElement(b.MediaCardNote,{title:d.a.createElement(d.a.Fragment,null,Object(E.c)(P())," ",e.map(({locationName:t,locationUrl:a},r)=>d.a.createElement(d.a.Fragment,null,d.a.createElement(O.n,{linkTo:Object(h.a)(a,!0),key:a},t),r!==e.length-1&&", ")))}):d.a.createElement(v.b,{icon:"light-bulb-yellow",title:d.a.createElement(d.a.Fragment,null,Object(E.c)(y())," ",e.map(({locationName:t,locationUrl:a},r)=>d.a.createElement(d.a.Fragment,null,d.a.createElement(O.n,{linkTo:Object(h.a)(a,!0),key:a},t),r!==e.length-1&&", ")))})}},l()(n,"propTypes",{affectedLocationProfiles:m.a.array,isServicesRevampEnabled:m.a.bool}),r=c))||r},Nsgx:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var r=a("17x9"),n=a.n(r),c={id:n.a.string,name:n.a.string},o={id:n.a.string,color:n.a.string,name:n.a.string,items:n.a.arrayOf(n.a.shape(c))}},PRhU:function(e,t,a){"use strict";a.d(t,"a",(function(){return re}));var r=a("VkAN"),n=a.n(r),c=a("lSNA"),o=a.n(c),i=a("q1tI"),s=a.n(i),l=a("/MKj"),u=a("17x9"),d=a.n(u),p=a("ngQI"),m=a("5ZU+"),b=a("XOD0"),f=a("Uvni"),g=a("nbpM"),h=a("ePPS"),E=a("Jje6"),v=a("3wSE"),O=a("TSDZ"),y=a("MoLQ"),P=a("i6OX"),S=a("pVnL"),j=a.n(S),T=a("TSYQ"),I=a.n(T),C=a("Xqy3"),k=a("cuY2"),R=a.n(k),N=a("Qs7Y"),x=a("Yvnt"),A=a("Nsgx"),L=a("Gi43"),M=a.n(L);class w extends i.PureComponent{render(){var{color:e,idx:t,menuItem:a}=this.props;return s.a.createElement(p.b,{draggableId:"".concat(C.d.MENU_ITEM).concat(a.id),index:t,type:C.e.MENU_ITEM},(t,r)=>s.a.createElement(E.b,{className:M.a.self},s.a.createElement(E.b,j()({flex:"row",className:I()(M.a.wrapper,{[M.a.dragged]:r.isDragging}),selfRef:t.innerRef},t.draggableProps,t.dragHandleProps),s.a.createElement(x.a,{color:e,className:M.a.colorBar}),s.a.createElement(E.b,{flex:"row",className:M.a.textContainer},s.a.createElement(N.d,{type:"item-name",className:M.a.name},a.name),s.a.createElement(P.b,{name:"drag",size:"standard",color:"black"})))))}}o()(w,"propTypes",{color:d.a.string,idx:d.a.number,menuItem:d.a.shape(A.b)});class D extends i.PureComponent{render(){return s.a.createElement(E.b,null,this.props.items.map((e,t)=>s.a.createElement(w,{menuItem:e,color:this.props.color,key:e.id,idx:t})))}}o()(D,"propTypes",{color:d.a.string,items:d.a.arrayOf(d.a.shape(A.b))});var _=a("kB9z"),F=a.n(_);class q extends i.PureComponent{render(){var{category:e}=this.props,t=e.items&&e.items.length>0;return s.a.createElement(p.c,{droppableId:e.id,type:C.e.MENU_ITEM},(a,r)=>s.a.createElement(E.b,j()({className:I()(F.a.itemsContainer,{[F.a.noItems]:!t,[F.a.draggedOver]:r.isDraggingOver}),selfRef:a.innerRef},a.droppableProps),s.a.createElement(D,{items:e.items,color:e.color}),a.placeholder))}}o()(q,"propTypes",{category:d.a.shape(A.a)});class B extends i.PureComponent{render(){var{hideItems:e,idx:t,category:a}=this.props;return s.a.createElement(E.b,{className:F.a.self},s.a.createElement(p.b,{draggableId:"".concat(C.d.CATEGORY).concat(a.id),index:t,type:C.e.CATEGORY},(t,r)=>s.a.createElement(E.b,j()({className:I()(F.a.wrapper,{[F.a.dragged]:r.isDragging}),selfRef:t.innerRef},t.draggableProps,t.dragHandleProps),s.a.createElement(E.b,{flex:"row",className:F.a.categoryContainer},s.a.createElement(x.a,{color:a.color,className:F.a.colorBar}),s.a.createElement(N.d,{type:"group-title",className:F.a.name},a.name),s.a.createElement(P.b,{name:"drag",size:"standard",color:"black"})),s.a.createElement(R.a,{duration:500,height:e?0:"auto"},s.a.createElement(q,{category:a})))))}}o()(B,"propTypes",{hideItems:d.a.bool,idx:d.a.number,category:d.a.shape(A.a)});class V extends i.PureComponent{render(){var{hideItems:e,itemList:t}=this.props;return s.a.createElement(E.b,null,t.map((t,a)=>s.a.createElement(B,{hideItems:e,category:t,key:t.id,idx:a})))}}o()(V,"propTypes",{hideItems:d.a.bool,itemList:d.a.arrayOf(d.a.shape(A.a))});class G extends i.PureComponent{render(){var{hideItems:e,itemList:t}=this.props;return s.a.createElement(E.b,{className:F.a.listContainer},s.a.createElement(p.c,{droppableId:"category-list",type:C.e.CATEGORY},a=>s.a.createElement(E.b,j()({className:I()(F.a.list,{[F.a.hideItems]:e}),selfRef:a.innerRef},a.droppableProps),s.a.createElement(V,{hideItems:e,itemList:t}),a.placeholder)))}}o()(G,"propTypes",{hideItems:d.a.bool,itemList:d.a.arrayOf(d.a.shape(A.a))});var U,Y,X,z=a("1063"),H=a("BUUB"),Q=a("mU7L"),K=a("WXyV"),Z=a.n(K);function J(){var e=n()(["Save"]);return J=function(){return e},e}function W(){var e=n()(["Group View"]);return W=function(){return e},e}function $(){var e=n()(["Full View"]);return $=function(){return e},e}function ee(){var e=n()(["Change View"]);return ee=function(){return e},e}function te(){var e=n()(["Manage Services Order"]);return te=function(){return e},e}function ae(){var e=n()(["An error has occurred, please try again later"]);return ae=function(){return e},e}var re=Object(l.b)(e=>({offerCatalogMenu:g.a.getOfferCatalogMenu(e)}))((X=Y=class extends i.PureComponent{constructor(e){var t;super(e),o()(this,"submitCatalogOrder",()=>Object(H.a)(this.state.itemsOrder).then(()=>{this.closeModal()}).catch(()=>{m.a.addErrorToast(Object(h.c)(ae()))})),o()(this,"handleDragEnd",e=>{var{itemsOrder:t}=this.state,a=Object(Q.a)(e,t);a&&this.setState({itemsOrder:a})}),o()(this,"handleFullView",()=>{this.setState({collapsed:!1})}),o()(this,"handleCollapsedView",()=>{this.setState({collapsed:!0})}),o()(this,"closeModal",()=>{Object(b.b)(z.z)}),this.state={itemsOrder:(t=e.offerCatalogMenu,t.map(e=>({id:e.id,color:e.appointmentColor,name:e.name,items:e.items.map(e=>({id:e.id,name:e.name}))}))),collapsed:!1}}appendCheckmark(e){return this.state.collapsed===e&&s.a.createElement(E.b,{flex:"row",marginLeft:8},s.a.createElement(P.b,{name:"check-solid",color:"gray-6",size:"tiny"}))}render(){var{collapsed:e,itemsOrder:t}=this.state;return s.a.createElement(y.a,{contentClassName:Z.a.self,header:Object(h.c)(te()),headerOnAction:this.closeModal,footer:s.a.createElement(E.b,{flex:"row"},s.a.createElement(O.g,{basis:"50%",marginRight:16,label:Object(h.c)(ee())},s.a.createElement(O.c,{onAction:this.handleFullView},Object(h.c)($()),this.appendCheckmark(!1)),s.a.createElement(O.c,{onAction:this.handleCollapsedView},Object(h.c)(W()),this.appendCheckmark(!0))),s.a.createElement(v.f,{basis:"50%",withPending:!0,onAction:this.submitCatalogOrder},Object(h.c)(J()))),withoutAnimation:!0},s.a.createElement(p.a,{onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},s.a.createElement(G,{hideItems:e,itemList:t})))}},o()(Y,"propTypes",{offerCatalogMenu:d.a.arrayOf(d.a.shape(f.a.propTypes))}),U=X))||U},TtEy:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var r,n,c,o=a("pVnL"),i=a.n(o),s=a("QILm"),l=a.n(s),u=a("lSNA"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("17x9"),f=a.n(b),g=a("TSYQ"),h=a.n(g),E=a("PhEd"),v=a("/MKj"),O=a("Jje6"),y=a("I+E4"),P=a("L8xJ"),S=a("aAma"),j=a("3wSE"),T=a("/Q2I"),I=a("dhJQ"),C=a("XOuL"),k=a("nbpM"),R=a("Kl+5"),N=a.n(R),x=Object(I.g)()(r=Object(v.b)(e=>({isReshedulEnabled:k.a.isReshedulEnabled(e)}))((c=n=class extends p.PureComponent{render(){var e=this.props,{title:t,textAbove:a,children:r,backLink:n,backAction:c,closeLink:o,closeAction:s,isMatch:u,withEntryAnimation:d,loading:p,standardModalColors:b,footer:f,scrollableContainerRef:g,shouldCoverModalPortal:v,containerSize:I,isReshedulEnabled:k,containerType:R,className:x,footerClassName:A}=e,L=l()(e,["title","textAbove","children","backLink","backAction","closeLink","closeAction","isMatch","withEntryAnimation","loading","standardModalColors","footer","scrollableContainerRef","shouldCoverModalPortal","containerSize","isReshedulEnabled","containerType","className","footerClassName"]),M=c?{onAction:c}:{linkTo:n},w=s?{onAction:s}:{linkTo:o},D=m.a.createElement(y.a,i()({flex:"column"},L,{className:h()(N.a.self,{[N.a.shouldCoverModalPortal]:v,[N.a.standardModalColors]:b},x)}),m.a.createElement(P.b,{selfRef:g},m.a.createElement(O.b,{flex:"row",justifyContent:"space-between",className:N.a.header},m.a.createElement(j.l,i()({qaSuffix:"back",className:h()({[N.a.hidden]:!n&&!c}),name:"fresha-arrow-left",size:"big"},M)),m.a.createElement(j.l,i()({qaSuffix:"close",name:"fresha-close"},w,{size:"standard"}))),m.a.createElement(S.b,{className:N.a.container,flex:"column",shrink:0,type:R},a&&(k?m.a.createElement(E.Text,{type:"fresha-caption",qaType:"above-title-text",className:N.a.textAbove,color:"gray100"},a):m.a.createElement(O.b,{qaType:"above-title-text",className:N.a.textAbove},a)),k?m.a.createElement(E.Text,{qaType:"fullscreen-view-title",type:"fresha-temporary-28",className:N.a.title,color:"gray100"},t):m.a.createElement(O.b,{qaType:"fullscreen-view-title",className:N.a.title},t),p?m.a.createElement(C.a,{static:!0}):r)),f&&m.a.createElement(O.b,{className:h()(N.a.footer,A),flex:"row",shrink:0,justifyContent:"flex-end"},f));return u&&d?m.a.createElement(T.d,null,D):D}},d()(n,"propTypes",{title:f.a.string,textAbove:f.a.string,backLink:f.a.string,backAction:f.a.func,closeLink:f.a.string,closeAction:f.a.func,isMatch:f.a.bool,withEntryAnimation:f.a.bool,children:f.a.node,loading:f.a.bool,standardModalColors:f.a.bool,shouldCoverModalPortal:f.a.bool,footer:f.a.node,scrollableContainerRef:f.a.func,containerSize:f.a.oneOf(Object.values({LARGE:"large",MEDIUM:"medium"})),className:f.a.string,footerClassName:f.a.string,containerType:f.a.string,isReshedulEnabled:f.a.bool}),r=c))||r)||r},UtX9:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var r,n,c,o=a("pVnL"),i=a.n(o),s=a("VkAN"),l=a.n(s),u=a("QILm"),d=a.n(u),p=a("lSNA"),m=a.n(p),b=a("q1tI"),f=a.n(b),g=a("17x9"),h=a.n(g),E=a("TSYQ"),v=a.n(E),O=a("ePPS"),y=a("XOD0"),P=a("gwpz"),S=a("uopA"),j=a("MoLQ"),T=a("Jje6"),I=a("3wSE"),C=a("dhJQ"),k=a("mqQb"),R=a.n(k);function N(){var e=l()(["Close"]);return N=function(){return e},e}function x(){var e=l()(["Your request couldnâ€™t be processed at this point. Please try again later or contact our support."]);return x=function(){return e},e}function A(){var e=l()(["Unable to load Data"]);return A=function(){return e},e}var L=Object(C.g)()((c=n=class extends b.PureComponent{render(){var e=this.props,{headerSecondaryAction:t,className:a,header:r,error:n,onClose:c,isMatch:o}=e,s=d()(e,["headerSecondaryAction","className","header","error","onClose","isMatch"]);return f.a.createElement(j.a,i()({header:o?"":r,headerOnAction:t,className:v()(R.a.self,a)},s),f.a.createElement(T.b,{flex:"row",grow:1,alignItems:"center",alignContent:"center",className:R.a.contentWrapper},n?f.a.createElement(S.a,{icon:"window-close",name:Object(O.c)(A()),text:Object(O.c)(x())},f.a.createElement(I.d,null,f.a.createElement(I.f,{onAction:c},Object(O.c)(N())))):f.a.createElement(P.a,{className:R.a.spinner})))}},m()(n,"propTypes",{className:h.a.string,header:h.a.node,headerSecondaryAction:h.a.func,error:h.a.bool,onClose:h.a.func,isMatch:h.a.bool}),m()(n,"defaultProps",{onClose:function(){Object(y.b)("/")}}),r=c))||r},Yvnt:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("lSNA"),n=a.n(r),c=a("q1tI"),o=a.n(c),i=a("17x9"),s=a.n(i),l=a("TSYQ"),u=a.n(l),d=a("IiP0"),p=a("Jje6"),m=a("myFM"),b=a.n(m);class f extends c.PureComponent{render(){var{className:e,color:t}=this.props;return o.a.createElement(p.b,{style:{backgroundColor:Object(d.e)(t)},className:u()(b.a.self,e)})}}n()(f,"propTypes",{className:s.a.string,color:s.a.string})},Z8TH:function(e,t,a){"use strict";a.d(t,"a",(function(){return B}));var r,n,c,o=a("lSNA"),i=a.n(o),s=a("q1tI"),l=a.n(s),u=a("17x9"),d=a.n(u),p=a("Ty5D"),m=a("/Q2I"),b=a("dhJQ"),f=a("1063"),g=a("VkAN"),h=a.n(g),E=a("ePPS"),v=a("TtEy"),O=a("mdQd"),y=a("iA5e"),P=a("vMAe");function S(){var e=h()(["Coming soon"]);return S=function(){return e},e}function j(){var e=h()(["Pre-paid memberships or courses used over multiple visits"]);return j=function(){return e},e}function T(){var e=h()(["Plan"]);return T=function(){return e},e}function I(){var e=h()(["Coming soon"]);return I=function(){return e},e}function C(){var e=h()(["Services booked by multiple clients in scheduled sessions"]);return C=function(){return e},e}function k(){var e=h()(["Class"]);return k=function(){return e},e}function R(){var e=h()(["Services booked by one client in a single visit"]);return R=function(){return e},e}function N(){var e=h()(["Service"]);return N=function(){return e},e}function x(){var e=h()(["Add an offering to your service menu"]);return x=function(){return e},e}class A extends s.PureComponent{constructor(e){super(e),this.groupId=Object(y.d)(e)}render(){return l.a.createElement(v.a,{title:Object(E.c)(x()),textAbove:Object(P.e)(1),closeLink:f.z},l.a.createElement(O.a,{title:Object(E.c)(N()),description:Object(E.c)(R()),linkTo:f.K({groupId:this.groupId}),icon:"oi-flow-appointment",isFirst:!0}),l.a.createElement(O.a,{title:Object(E.c)(k()),description:Object(E.c)(C()),badgeText:Object(E.c)(I()),icon:"oi-flow-class-coming-soon"}),l.a.createElement(O.a,{title:Object(E.c)(T()),description:Object(E.c)(j()),badgeText:Object(E.c)(S()),icon:"oi-flow-plan-coming-soon"}))}}function L(){var e=h()(["Multiple services booked together in one appointment"]);return L=function(){return e},e}function M(){var e=h()(["Package"]);return M=function(){return e},e}function w(){var e=h()(["Services which can be booked individually"]);return w=function(){return e},e}function D(){var e=h()(["Single Service"]);return D=function(){return e},e}function _(){var e=h()(["Choose a service type"]);return _=function(){return e},e}class F extends s.PureComponent{constructor(e){super(e),this.groupId=Object(y.d)(e)}render(){return l.a.createElement(v.a,{title:Object(E.c)(_()),textAbove:Object(P.e)(2),backLink:f.d,closeLink:f.z},l.a.createElement(O.a,{title:Object(E.c)(D()),description:Object(E.c)(w()),icon:"oi-flow-service",linkTo:f.cb({groupId:this.groupId}),isFirst:!0}),l.a.createElement(O.a,{title:Object(E.c)(M()),description:Object(E.c)(L()),icon:"oi-flow-package",linkTo:f.U({groupId:this.groupId})}))}}var q=l.a.createElement(p.d,null,l.a.createElement(p.b,{path:f.d,exact:!0,component:A}),l.a.createElement(p.b,{path:f.c,exact:!0,component:F})),B=Object(b.g)()((c=n=class extends s.PureComponent{render(){var{isMatch:e}=this.props;return e?l.a.createElement(m.d,null,l.a.createElement(m.c,{fullHeight:!0},q)):q}},i()(n,"propTypes",{isMatch:d.a.bool.isRequired}),r=c))||r},"b+f9":function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var r,n,c,o=a("pVnL"),i=a.n(o),s=a("QILm"),l=a.n(s),u=a("lSNA"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("17x9"),f=a.n(b),g=a("TSYQ"),h=a.n(g),E=a("PhEd"),v=a("/MKj"),O=a("Jje6"),y=a("i6OX"),P=a("Qs7Y"),S=a("nbpM"),j=a("3C4R"),T=a.n(j),I=Object(v.b)(e=>({isReshedulEnabled:S.a.isReshedulEnabled(e)}))((c=n=class extends p.PureComponent{render(){var e=this.props,{className:t,icon:a,iconColor:r,iconSize:n,white:c,text:o,isReshedulEnabled:s}=e,u=l()(e,["className","icon","iconColor","iconSize","white","text","isReshedulEnabled"]);return m.a.createElement(O.b,i()({flex:"column",justifyContent:"center",alignItems:"center",className:h()(T.a.self,t,{[T.a.white]:c})},u),m.a.createElement(y.b,{qaType:"placeholder-icon",name:a,size:n,color:r}),s?m.a.createElement(E.Text,{qaType:"placeholder-text",className:T.a.label,type:"fresha-paragraph",color:"gray100"},o):m.a.createElement(P.d,{qaType:"placeholder-text",className:T.a.label},o))}},d()(n,"propTypes",{className:f.a.string,icon:f.a.string.isRequired,text:f.a.node,iconColor:y.b.propTypes.color,iconSize:y.b.propTypes.size,white:f.a.bool,isReshedulEnabled:f.a.bool}),d()(n,"defaultProps",{iconColor:"original",iconSize:"placeholder",white:!1}),r=c))||r},"cw/K":function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var r,n,c,o=a("lSNA"),i=a.n(o),s=a("VkAN"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("/MKj"),f=a("5ZU+"),g=a("ePPS"),h=a("nbpM"),E=a("XOD0"),v=a("3wSE"),O=a("/Q2I"),y=a("Qs7Y"),P=a("dhJQ"),S=a("Uvni"),j=a("BUUB"),T=a("1063");function I(){var e=l()(["Delete"]);return I=function(){return e},e}function C(){var e=l()(["Delete Service Group"]);return C=function(){return e},e}function k(){var e=l()(["Delete Category"]);return k=function(){return e},e}function R(){var e=l()(["Service group"]);return R=function(){return e},e}function N(){var e=l()(["Category"]);return N=function(){return e},e}function x(){var e=l()(["Are you sure you want to delete this group?"]);return x=function(){return e},e}var A=d.a.createElement(y.d,{type:"body-1"},Object(g.c)(x())),L=Object(P.g)("tablet")(r=Object(b.b)((e,{match:{params:{id:t}={}}})=>({getOfferCatalogCategory:h.a.getOfferCatalogCategory(e,t),packagesEnabled:h.a.isPackagesEnabled(e)}),{})((c=n=class extends u.PureComponent{constructor(e){super(e),i()(this,"handleDelete",()=>{var{getOfferCatalogCategory:e,packagesEnabled:t}=this.props,a=t?Object(g.c)(N()):Object(g.c)(R());return Object(j.d)(e.id).then(()=>{f.a.addGlobalSuccessToast(Object(g.c)("%{categoryName} deleted",{categoryName:a})),Object(E.f)(T.z)}).catch(()=>{f.a.addErrorToast(Object(g.c)("%{categoryName} couldn't be deleted, please try again later",{categoryName:a}))})}),i()(this,"handleCancel",()=>{Object(E.b)(T.z)}),e.getOfferCatalogCategory||Object(E.f)(T.z)}componentDidUpdate(){this.props.getOfferCatalogCategory||Object(E.f)(T.z)}render(){var{tablet:e,packagesEnabled:t}=this.props,a=t?Object(g.c)(k()):Object(g.c)(C());return d.a.createElement(O.i,{size:"small"},d.a.createElement(O.g,{onClose:this.handleCancel,subheader:e&&A,qaType:"delete-confirmation-modal"},a),d.a.createElement(O.c,{onlyBottomPadding:e},!e&&A),d.a.createElement(O.e,{noPadding:!0},d.a.createElement(O.b,null,d.a.createElement(v.g,{onAction:this.handleDelete,withPending:!0,qaType:"confirm-delete-button"},Object(g.c)(I())))))}},i()(n,"propTypes",{getOfferCatalogCategory:m.a.shape(S.a.propTypes),tablet:m.a.bool,packagesEnabled:m.a.bool}),r=c))||r)||r},eAqY:function(e,t,a){"use strict";a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return D})),a.d(t,"c",(function(){return F}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("vN+2"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("17x9"),f=a.n(b),g=a("/MKj"),h=a("PhEd"),E=a("nbpM"),v=a("LyRY"),O=a("q9fD"),y=a("ePPS"),P=a("1EZC"),S=a("Jje6"),j=a("ZO1O"),T=a("tPh7"),I=a("dhJQ"),C=a("kZhr"),k=a("OyCh"),R=a("uZ2f"),N=a("tMD5"),x=a.n(N);function A(){var e=i()(["Choose Tax Rate applicable in locations"]);return A=function(){return e},e}function L(){var e=i()(["Choose Tax Rate applicable in locations"]);return L=function(){return e},e}function M(){var e=i()(["No tax"]);return M=function(){return e},e}function w(){var e=i()(["No tax"]);return w=function(){return e},e}var D="itemLocationTaxRates",_=Object(I.g)()(r=Object(g.b)(e=>({locations:E.a.getExistingLocationList(e),taxRates:E.a.getTaxRatesList(e),isServicesRevampEnabled:E.a.isServicesRevampEnabled(e)}),{})((c=n=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"renderSelects",({fields:e})=>{var{taxRates:t,locations:a,type:r,isServicesRevampEnabled:n}=this.props,c=e.map((c,o)=>{var i=e.get(o),s=a.find(({id:e})=>e===i.location),l="service"===r?s.defaultServiceTaxRate:s.defaultProductTaxRate;return n?m.a.createElement(h.ReduxForm.SelectField,{key:c,name:"".concat(c,".taxRate"),hideInvalidLabel:!0,label:s.name,shrink:0,xpos:"single"},m.a.createElement("option",{key:"no-tax",value:""},Object(y.c)(w())),m.a.createElement("option",{key:"use-default",value:O.a},Object(y.c)("Default: %{taxName}",{taxName:Object(P.b)(l)})),t.map(e=>m.a.createElement("option",{key:e.id,value:e.id},Object(P.b)(e)))):m.a.createElement(R.r,{key:c,name:"".concat(c,".taxRate"),hideInvalidLabel:!0,label:s.name,shrink:0},m.a.createElement("option",{key:"no-tax",value:""},Object(y.c)(M())),m.a.createElement("option",{key:"use-default",value:O.a},Object(y.c)("Default: %{taxName}",{taxName:Object(P.b)(l)})),t.map(e=>m.a.createElement("option",{key:e.id,value:e.id},Object(P.b)(e))))});return m.a.createElement(S.b,null,c)})}renderContainer(e){var{isMatch:t}=this.props;return t?e:m.a.createElement(k.b,{loadMore:d.a},e)}render(){var{isServicesRevampEnabled:e}=this.props;return e?m.a.createElement(m.a.Fragment,null,m.a.createElement(h.Text,{type:"fresha-caption",className:x.a.newTitle},Object(y.c)(L())),m.a.createElement(C.o,{name:D,component:this.renderSelects})):this.renderContainer(m.a.createElement(S.b,{className:x.a.self},m.a.createElement(T.a,{forceShow:!0},Object(y.c)(A())),m.a.createElement(j.d,{type:"plain popup-form"},m.a.createElement(C.o,{name:D,component:this.renderSelects}))))}},l()(n,"propTypes",{locations:f.a.arrayOf(f.a.shape(v.a)).isRequired,taxRates:f.a.arrayOf(f.a.object).isRequired,isMatch:f.a.bool.isRequired,type:f.a.oneOf(["product","service"]),isServicesRevampEnabled:f.a.bool}),r=c))||r)||r,F=e=>E.a.getExistingLocationList(e).map(e=>({location:e.id,taxRate:O.a}))},eq57:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("mwIZ"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("/MKj"),f=a("17x9"),g=a.n(f),h=a("TSYQ"),E=a.n(h),v=a("5ZU+"),O=a("XQjB"),y=a("XOD0"),P=a("ePPS"),S=a("/Q2I"),j=a("ZO1O"),T=a("SFs4"),I=a("Jje6"),C=a("3wSE"),k=a("dhJQ"),R=a("NFlB"),N=a("N7pg"),x=a("BUUB"),A=a("DDyp"),L=a("iA5e"),M=a("1063"),w=a("Xqy3");function D(){var e=i()(["Save"]);return D=function(){return e},e}function _(){var e=i()(["Close"]);return _=function(){return e},e}function F(){var e=i()(["Update online appointments and remove fees for cancellations and no shows"]);return F=function(){return e},e}function q(){var e=i()(["Update upcoming appointments and show the current duration and price"]);return q=function(){return e},e}function B(){var e=i()(["This change may affect existing packages"]);return B=function(){return e},e}function V(){var e=i()(["To delete pricing from this service, you must first remove it from the below package(s):"]);return V=function(){return e},e}function G(){var e=i()(["Update Service"]);return G=function(){return e},e}function U(){var e=i()(["Update Package"]);return U=function(){return e},e}function Y(){var e=i()(["Package couldn't be updated, please try again later"]);return Y=function(){return e},e}function X(){var e=i()(["Service couldn't be updated, please try again later"]);return X=function(){return e},e}var z=Object(k.g)()(r=Object(b.b)((e,t)=>{var a=d()(Object(L.i)(t),"type");return{resource:a===w.a.PACKAGE?Object(L.f)(e,t):Object(L.j)(e,t),updateRequest:d()(Object(L.i)(t),"updateRequest"),type:a}})((c=n=class extends p.PureComponent{constructor(e){super(e),l()(this,"state",{updateFutureBookings:!0,updatePolicies:!0}),l()(this,"handleClose",()=>Object(y.f)(M.z)),l()(this,"goBack",()=>{var{resource:e,type:t}=this.props;Object(y.b)(t===w.a.PACKAGE?M.U({packageId:e.id,mode:"edit"}):M.cb({serviceId:e.id,mode:"edit"}))}),l()(this,"handleUpdateFutureBookinsChange",()=>{!0===this.state.updateFutureBookings?this.setState({updateFutureBookings:!1,updatePolicies:!1}):this.setState({updateFutureBookings:!0})}),l()(this,"handleUpdatePoliciesChange",()=>{this.setState(({updatePolicies:e})=>({updatePolicies:!e}))}),l()(this,"sendRequest",()=>{var{updateRequest:e,type:t}=this.props,a=t===w.a.SERVICE;return e.data.attributes["confirm-reset-marketing-campaigns"]=!0,e.data.attributes["confirm-offline-location-profiles"]=!0,a&&(e.data.attributes["update-future-bookings"]=this.state.updateFutureBookings,e.data.attributes["update-policies"]=this.state.updatePolicies,e.data.attributes["confirm-update-packages"]=!0),(a?x.h:A.c)(e.data.id,e).catch(()=>{v.a.addGlobalErrorToast(a?Object(P.c)(X()):Object(P.c)(Y()))})});var t=d()(Object(L.i)(this.props),"errors",[]);(!this.props.updateRequest||t.length<1)&&this.goBack(),this.packagesUsingServicePricings=[],t.forEach(({code:e,meta:t})=>{e===w.f.MARKETING_RESET?this.marketingCampaignsNumber=t["affected-marketing-campaigns-count"]:e===w.f.FUTURE_BOOKINGS?(this.futureBookingsNumber=t["future-bookings-count"],this.policiesNumber=t["policies-count"]):e===w.f.LOCATION_PROFILE?this.affectedLocationProfiles=Object(O.b)(t["affected-location-profiles"]):e===w.f.SERVICE_PRICING_IN_USE?this.packagesUsingServicePricings.push(t.name):e===w.f.UPDATE_PACKAGE&&(this.packagesCount=t["packages-count"])}),this.isRemovingUsedServices=this.packagesUsingServicePricings.length>0}render(){var{isMatch:e,resource:t,type:a}=this.props,{updatePolicies:r,updateFutureBookings:n}=this.state,{futureBookingsNumber:c,policiesNumber:o,marketingCampaignsNumber:i,affectedLocationProfiles:s,packagesUsingServicePricings:l,isRemovingUsedServices:u,packagesCount:d}=this;return m.a.createElement(S.i,{size:"small"},m.a.createElement(S.g,{onClose:u?this.handleClose:this.goBack},a===w.a.PACKAGE?Object(P.c)(U()):Object(P.c)(G())),m.a.createElement(S.c,{onlyBottomPadding:!0},u&&m.a.createElement(T.b,{icon:"light-bulb-yellow",qaType:"delete-pricing-warning-note",title:Object(P.c)("Service %{name} can't be updated",{name:t.name}),description:m.a.createElement(m.a.Fragment,null,Object(P.c)(V()),m.a.createElement(I.b,{as:"ul",qaType:"packages-list"},l.map((e,t)=>m.a.createElement(I.b,{as:"li",key:t},e))))}),i>0&&m.a.createElement(T.b,{icon:"light-bulb-yellow",qaType:"delete-service-warning-note",title:Object(P.c)("%{marketingCampaignsNumber} of your Smart Campaigns will be paused",{marketingCampaignsNumber:i})}),c>0&&m.a.createElement(T.b,{icon:"light-bulb-yellow",qaType:"update-service-upcoming-appointment-note",title:Object(P.g)("This service is booked in %{futureBookingsNumber} upcoming appointment.","This service is booked in %{futureBookingsNumber} upcoming appointments.",c,{futureBookingsNumber:c})}),o>0&&m.a.createElement(T.b,{icon:"light-bulb-yellow",title:Object(P.g)("This service is booked in %{policiesNumber} online upcoming appointment","This service is booked in %{policiesNumber} online upcoming appointments",o,{policiesNumber:o})}),s&&s.length>0&&m.a.createElement(R.a,{affectedLocationProfiles:s}),d>0&&m.a.createElement(T.b,{icon:"light-bulb-yellow",title:Object(P.c)(B())}),(c>0||o>0)&&m.a.createElement(j.d,{type:E()("modal plain",{noPadding:e})},c>0&&m.a.createElement(N.a,{input:{checked:n},qaType:"checkbox-update-upcomming-appointments",onChange:this.handleUpdateFutureBookinsChange,meta:{},label:Object(P.c)(q())}),o>0&&m.a.createElement(N.a,{input:{checked:r},onChange:this.handleUpdatePoliciesChange,meta:{},label:Object(P.c)(F()),disabled:!1===n}))),m.a.createElement(S.e,null,u?m.a.createElement(S.a,{qaType:"close-service-button",onAction:this.handleClose,type:C.f},Object(P.c)(_())):m.a.createElement(S.a,{qaType:"update-service-button",withPending:!0,onAction:this.sendRequest,type:C.f},Object(P.c)(D()))))}},l()(n,"propTypes",{updateRequest:g.a.object,resource:g.a.object,isMatch:g.a.bool,type:g.a.oneOf(Object.values(w.a))}),r=c))||r)||r},iA5e:function(e,t,a){"use strict";a.d(t,"e",(function(){return u})),a.d(t,"m",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"n",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"d",(function(){return f})),a.d(t,"i",(function(){return g})),a.d(t,"a",(function(){return h})),a.d(t,"l",(function(){return E})),a.d(t,"k",(function(){return v})),a.d(t,"g",(function(){return O})),a.d(t,"h",(function(){return y})),a.d(t,"f",(function(){return P})),a.d(t,"c",(function(){return S}));var r=a("mwIZ"),n=a.n(r),c=a("nbpM"),o=a("3WHN"),i=a("kZhr"),s=a("rzky"),l=a("QJc1"),u=e=>n()(e,"match.params.mode"),d=e=>n()(e,"match.params.serviceId"),p=e=>n()(e,"match.params.employeeId"),m=e=>n()(e,"match.params.pricingLevelId"),b=(e,t)=>c.a.getService(e,d(t)),f=e=>Object(o.c)(e).query.groupId,g=e=>e.location.state,h=e=>Object(o.c)(e).query.type,E=Object(i.W)(s.e),v=Object(i.V)(s.e),O=Object(i.W)(l.e),y=e=>n()(e,"match.params.packageId"),P=(e,t)=>c.a.getPackage(e,y(t)),S=e=>c.a.getEmployeeList(e).filter(e=>e.providesServices)},k8EH:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return ie}));var r,n,c,o=a("lSNA"),i=a.n(o),s=a("VkAN"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("17x9"),m=a.n(p),b=a("/MKj"),f=a("Ty5D"),g=a("ePPS"),h=a("5ZU+"),E=a("nbpM"),v=a("XOD0"),O=a("Uvni"),y=a("Jje6"),P=a("sc2q"),S=a("aAma"),j=a("3wSE"),T=a("TSDZ"),I=a("qGVk"),C=a("i6OX"),k=a("uopA"),R=a("dhJQ"),N=a("x81N"),x=a("8TPp"),A=a("L8xJ"),L=a("MDPv"),M=a("Xqy3"),w=a("BUUB"),D=a("1063"),_=a("EL3I"),F=a("H/64"),q=a("4ebE"),B=a("cw/K"),V=a("qlDR"),G=a("Lydr"),U=a.n(G),Y=a("Z8TH");function X(){var e=l()(["You do not have any services yet, create your first group to\n            start filling up your services menu"]);return X=function(){return e},e}function z(){var e=l()(["No Services Set Up"]);return z=function(){return e},e}function H(){var e=l()(["Export"]);return H=function(){return e},e}function Q(){var e=l()(["Manage Service Order"]);return Q=function(){return e},e}function K(){var e=l()(["New Service Group"]);return K=function(){return e},e}function Z(){var e=l()(["New Category"]);return Z=function(){return e},e}function J(){var e=l()(["Export couldn't be generated, try again later"]);return J=function(){return e},e}function W(){var e=l()(["Export generated"]);return W=function(){return e},e}function $(){var e=l()(["New Service"]);return $=function(){return e},e}function ee(){var e=l()(["New Service"]);return ee=function(){return e},e}function te(){var e=l()(["New Service Group"]);return te=function(){return e},e}function ae(){var e=l()(["New Category"]);return ae=function(){return e},e}function re(){var e=l()(["CSV"]);return re=function(){return e},e}function ne(){var e=l()(["Excel"]);return ne=function(){return e},e}function ce(){var e=l()(["PDF"]);return ce=function(){return e},e}var oe=[{id:N.a.PDF,format:N.a.PDF,label:Object(g.c)(ce())},{id:N.a.XLSX,format:N.a.XLSX,label:Object(g.c)(ne())},{id:N.a.CSV,format:N.a.CSV,label:Object(g.c)(re())}],ie=Object(R.g)()(r=Object(b.b)(e=>({offerCatalogMenu:E.a.getOfferCatalogMenu(e),packagesEnabled:E.a.isPackagesEnabled(e)}))((c=n=class extends u.PureComponent{constructor(t){super(t),i()(this,"state",{isExportCompleted:!1,collapsed:!1}),i()(this,"setMenuActions",()=>{var{packagesEnabled:e}=this.props;this.menuActions=[],this.menuActions.push({id:"new-category",tooltip:e?Object(g.c)(ae()):Object(g.c)(te()),onAction:this.handleNewCategory,content:d.a.createElement(C.b,{name:"new-service-group"}),qaType:"new-category"}),e?this.menuActions.push({id:"new-flow",tooltip:Object(g.c)($()),onAction:this.handleNewItem,content:d.a.createElement(C.b,{name:"new-service-fab"}),qaType:"new-item"}):this.menuActions.push({id:"new-service",tooltip:Object(g.c)(ee()),onAction:this.handleNewService,content:d.a.createElement(C.b,{name:"new-service-fab"}),qaType:"new-service"})}),i()(this,"exportConfig",{type:M.k,start:w.e,status:w.i,complete:t=>{h.a.addGlobalSuccessToast(Object(g.c)(W())),Object(L.a)(t).then(()=>{this.setState({isExportCompleted:!0}),e.setTimeout(()=>{this.setState({isExportCompleted:!1})},1e3)})},error:()=>{h.a.addGlobalErrorToast(Object(g.c)(J()))}}),i()(this,"handleNewCategory",()=>{Object(v.c)(D.a)}),i()(this,"handleNewService",()=>{Object(v.c)(D.Y({type:M.a.SERVICE}))}),i()(this,"handleNewItem",()=>{Object(v.c)(D.Q())}),i()(this,"handleCollapse",e=>{this.setState({collapsed:e})}),i()(this,"groupOptions",[{value:!1,icon:"list-extended",qaType:"list-extended-button"},{value:!0,icon:"list-collapsed",qaType:"list-collapsed-button"}]),this.setMenuActions()}render(){var{isMatch:e,offerCatalogMenu:t,packagesEnabled:a}=this.props,{collapsed:r,isExportCompleted:n}=this.state,c=a?Object(g.c)(Z()):Object(g.c)(K()),o=t.length>0;return d.a.createElement(A.b,{justifyContent:o?void 0:"center",alignItems:o?void 0:"center",className:U.a.self,color:e?void 0:"gray-2"},o?d.a.createElement(S.b,{className:U.a.container,shrink:0,noPadding:e},d.a.createElement(y.b,{flex:"row",className:U.a.topBar},!e&&d.a.createElement(P.a,{options:this.groupOptions,value:r,onChange:this.handleCollapse}),d.a.createElement(y.b,{grow:1,shrink:1}),d.a.createElement(x.b,{position:"right"},t=>t?d.a.createElement(u.Fragment,null,d.a.createElement(N.c,{config:this.exportConfig},({enqueue:e,isPending:t})=>d.a.createElement(T.f,{icon:T.f.ICON.OPTIONS,isPending:t,disabled:t,isComplete:n},oe.map(({id:t,format:a,label:r})=>d.a.createElement(T.c,{key:t,onAction:e(a)},Object(g.c)("Download %{label}",{label:r}))),d.a.createElement(T.c,{key:"manager-service-order",linkTo:D.u},Object(g.c)(Q()))))):d.a.createElement(u.Fragment,null,d.a.createElement(N.c,{config:this.exportConfig},({enqueue:t,isPending:a})=>d.a.createElement(T.g,{className:U.a.topBarButton,align:"right",label:e?d.a.createElement(C.b,{name:"export"}):Object(g.c)(H()),iconOpen:"export",iconClosed:"export",isPending:a,disabled:a,isComplete:n,qaType:"export-button"},oe.map(({id:e,format:a,label:r})=>d.a.createElement(T.c,{key:e,onAction:t(a),qaType:"".concat(r.toLowerCase(),"-button")},r)))),e&&d.a.createElement(j.a,{showIcon:!0,icon:"drag-and-drop",size:"medium",className:U.a.topBarButton,linkTo:D.u}))),d.a.createElement(I.a,{actions:this.menuActions,qaType:"services-floating-menu",className:e?void 0:U.a.topBarButton})),d.a.createElement(_.a,{offerCatalogMenu:t,mobile:e,hideItems:r})):d.a.createElement(k.a,{icon:"no-services",name:Object(g.c)(z()),text:Object(g.c)(X())},d.a.createElement(j.d,null,d.a.createElement(j.f,{linkTo:D.a,qaType:"new-category-button"},c))),d.a.createElement(f.d,null,d.a.createElement(f.b,{path:D.a,exact:!0,component:F.a}),d.a.createElement(f.b,{path:D.k,exact:!0,component:q.a}),d.a.createElement(f.b,{path:D.x,exact:!0,component:V.a}),d.a.createElement(f.b,{path:D.h,exact:!0,component:B.a}),d.a.createElement(f.b,{path:D.b,component:Y.a})))}},i()(n,"propTypes",{isMatch:m.a.bool.isRequired,offerCatalogMenu:m.a.arrayOf(m.a.shape(O.a.propTypes)),packagesEnabled:m.a.bool.isRequired}),r=c))||r)||r}).call(this,a("yLpj"))},mU7L:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("lSNA"),n=a.n(r),c=a("Xqy3");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){var{destination:a,draggableId:r,source:n,type:o}=e;if(!a)return null;if(n.droppableId===a.droppableId&&n.index===a.index)return null;switch(o){case c.e.MENU_ITEM:return function(e,t,a,r){var n,o=a.replace(c.d.MENU_ITEM,""),{droppableId:s}=t,{index:d,droppableId:p}=e;n=s===p?function(e,t,a,r){var n=r.find(e=>e.id===t),c=n.items.find(t=>t.id===e),o=n.items.filter(e=>e.id!==c.id),s=i(i({},n),{},{items:l(o,a,c)});return u(r,s)}(o,s,d,r):function(e,t,a,r,n){var c=n.find(e=>e.id===t),o=n.find(e=>e.id===a),s=c.items.find(t=>t.id===e),d=i(i({},c),{},{items:c.items.filter(e=>e.id!==s.id)}),p=i(i({},o),{},{items:l(o.items,r,s)});return u(u(n,d),p)}(o,s,p,d,r);return n}(a,n,r,t);case c.e.CATEGORY:return function(e,t,a){var r=t.replace(c.d.CATEGORY,""),{index:n}=e;return function(e,t,a){var r=a.find(t=>t.id===e);return l(a.filter(t=>t.id!==e),t,r)}(r,n,a)}(a,r,t);default:return null}}function l(e,t,a){return[...e.slice(0,t),a,...e.slice(t)]}function u(e,t){var a=e.findIndex(e=>e.id===t.id);return l(e.filter(e=>e.id!==t.id),a,t)}},mdQd:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var r,n,c,o,i,s=a("pVnL"),l=a.n(s),u=a("QILm"),d=a.n(u),p=a("lSNA"),m=a.n(p),b=a("N1om"),f=a.n(b),g=a("q1tI"),h=a.n(g),E=a("17x9"),v=a.n(E),O=a("TSYQ"),y=a.n(O),P=a("PhEd"),S=a("/MKj"),j=a("Jje6"),T=a("dhJQ"),I=a("jLFJ"),C=a("i6OX"),k=a("9hiP"),R=a("IiP0"),N=a("nbpM"),x=a("/8oc"),A=a.n(x),L=(r=Object(T.g)(),n=Object(S.b)(e=>({isReshedulEnabled:N.a.isReshedulEnabled(e)})),Object(I.b)(c=r(c=n((i=o=class extends g.PureComponent{render(){var e,t=this.props,{title:a,description:r,icon:n,color:c,badgeText:o,badgeColor:i=k.a.BLUE,hasAction:s,className:u,noArrow:p,isReshedulEnabled:m,isFirst:b}=t,g=d()(t,["title","description","icon","color","badgeText","badgeColor","hasAction","className","noArrow","isReshedulEnabled","isFirst"]);return n?e=h.a.createElement(C.b,{shrink:0,className:A.a.icon,name:n,color:"original",size:"large"}):c&&(e=h.a.createElement(j.b,{shrink:0,style:{background:Object(R.e)(c)},className:A.a.colorDot})),h.a.createElement(j.b,l()({qaType:"tile-button-".concat(f()(a)),className:y()(u,A.a.self,{[A.a.hasAction]:s,[A.a.isFirst]:b})},g),e,h.a.createElement(j.b,{className:A.a.container},h.a.createElement(j.b,{grow:1,alignItems:"center",className:A.a.content},m?h.a.createElement(P.Text,{type:"fresha-h4",className:A.a.title,color:"gray100"},a):h.a.createElement(j.b,{type:"row-button-primary",className:A.a.title,flex:"row",alignItems:"center",justifyContent:"space-between"},a),r&&(m?h.a.createElement(P.Text,{type:"fresha-caption",color:"gray50",className:A.a.description},r):h.a.createElement(j.b,{className:A.a.description},r))),h.a.createElement(k.b,{badgeText:o,badgeColor:i,className:A.a.badge}),!p&&s&&h.a.createElement(C.b,{className:A.a.arrowRight,name:"fresha-chevron-right",color:"fresha-black",size:"standard"})))}},m()(o,"propTypes",{title:v.a.string,description:v.a.string,icon:v.a.string,color:v.a.string,badgeColor:v.a.oneOf(Object.values(k.a)),badgeText:v.a.string,hasAction:v.a.bool,noArrow:v.a.bool,isReshedulEnabled:v.a.bool,isFirst:v.a.bool,className:v.a.string}),c=i))||c)||c)||c)},o20C:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var r,n,c,o=a("lSNA"),i=a.n(o),s=a("VkAN"),l=a.n(s),u=a("q1tI"),d=a.n(u),p=a("/MKj"),m=a("17x9"),b=a.n(m),f=a("TSYQ"),g=a.n(f),h=a("PhEd"),E=a("ePPS"),v=a("kZhr"),O=a("Jje6"),y=a("ZO1O"),P=a("tPh7"),S=a("dhJQ"),j=a("Xz+p"),T=a("uZ2f"),I=a("nbpM"),C=a("Xqy3");function k(){var e=l()(["Service available for"]);return k=function(){return e},e}function R(){var e=l()(["Description will be displayed on your Fresha profile"]);return R=function(){return e},e}function N(){var e=l()(["Enable online bookings"]);return N=function(){return e},e}function x(){var e=l()(["Allow clients to book this service online, switch off to hide this service from your online bookings menu."]);return x=function(){return e},e}function A(){var e=l()(["Allow clients to book this service online, switch off to hide this service from your online bookings menu."]);return A=function(){return e},e}function L(){var e=l()(["Service description"]);return L=function(){return e},e}var M=Object(E.c)(L()),w=v.kb.maxLength(1e3),D=Object(S.g)()(r=Object(p.b)((e,t)=>({onlineBookingEnabled:Object(v.W)(t.formName)(e)[C.b.ONLINE_BOOKING][C.c.ONLINE_BOOKING_ENABLED],reshedulEnabled:I.a.isReshedulEnabled(e)}),{})((c=n=class extends u.PureComponent{render(){var{onlineBookingEnabled:e,isMatch:t,reshedulEnabled:a}=this.props;return d.a.createElement(O.b,null,!t&&d.a.createElement(P.a,{desktopPadding:!a||void 0,forceShow:!0},a?d.a.createElement(h.Text,{type:"fresha-caption",color:"gray50"},Object(E.c)(A())):Object(E.c)(x())),d.a.createElement(y.d,{type:g()("form ".concat(a?"noPadding":""),{plain:!t}),shrink:0},d.a.createElement(T.b,{name:C.c.ONLINE_BOOKING_ENABLED,asSwitchMobile:!0,label:Object(E.c)(N())}),(!t||e)&&d.a.createElement(O.b,null,d.a.createElement(T.s,{name:C.c.DESCRIPTION,label:M,type:"textarea",noEditError:!0,grow:1,validate:w,disabled:!e,rows:t?4:2,multiline:!0,placeholder:t?void 0:Object(E.c)(R())}),d.a.createElement(T.r,{name:C.c.GENDER,label:Object(E.c)(k()),hideInvalidLabel:!0,grow:1,disabled:!e},Object.values(j.c).map(e=>d.a.createElement("option",{key:e,value:e},C.i[e]))))))}},i()(n,"propTypes",{onlineBookingEnabled:b.a.bool,isMatch:b.a.bool,reshedulEnabled:b.a.bool}),r=c))||r)||r},qGVk:function(e,t,a){"use strict";a.d(t,"b",(function(){return D})),a.d(t,"a",(function(){return ee}));var r=a("pVnL"),n=a.n(r),c=a("QILm"),o=a.n(c),i=a("lSNA"),s=a.n(i),l=a("lSCD"),u=a.n(l),d=a("pZt1"),p=a.n(d),m=a("q1tI"),b=a.n(m),f=a("17x9"),g=a.n(f),h=a("TSYQ"),E=a.n(h),v=a("pQ8y"),O=a("VeD8"),y=a("JqEL");class P extends m.PureComponent{constructor(e){super(e),this.state={isRendered:!1}}componentDidMount(){this.timeout=setTimeout(()=>this.setState({isRendered:!0}),this.props.delay)}componentWillUnmount(){Object(y.d)(this.timeout)}render(){return this.state.isRendered?m.Children.only(this.props.children):null}}s()(P,"propTypes",{delay:g.a.number,children:g.a.node}),s()(P,"defaultProps",{delay:500});a("uHid");var S=a("DTRD"),j=a("jXSx"),T=a("i6OX"),I=a("Jje6"),C=a("9wjN"),k=a("ww3E"),R=a("R3Cl"),N=a.n(R);class x extends m.Component{constructor(e){super(e),this.state={showTooltip:!1},this.handleActionRef=this.handleActionRef.bind(this)}UNSAFE_componentWillMount(){this.props.tooltip&&(this.timeout=setTimeout(()=>{this.setState({showTooltip:!0})},300))}componentWillUnmount(){clearTimeout(this.timeout)}handleActionRef(e){if(Object(y.h)(e)){"object"==typeof this.actionRefListener&&this.actionRefListener.remove();var{action:t}=this.props;this.actionRefListener=Object(y.a)(e,"touchstart",e=>{e.preventDefault(),"function"==typeof t&&t(e)},{passive:!1})}}render(){var e=this.props,{content:t,disabled:a,tooltip:r,expanded:c,action:i,qaType:s,buttonClassName:l,noFillIcon:u}=e,d=o()(e,["content","disabled","tooltip","expanded","action","qaType","buttonClassName","noFillIcon"]),{showTooltip:p}=this.state;return b.a.createElement(I.b,{className:E()(N.a.self,{[N.a.expanded]:c,[N.a.whiteIcon]:!u}),onClick:i,selfRef:this.handleActionRef,qaType:s},b.a.createElement(k.a,n()({disabled:a,type:"info float",className:E()(N.a.action,l),noFillIcon:u},d),t),b.a.createElement(O.a,null,c&&p?b.a.createElement(v.a,{classNames:{enter:N.a.tooltipAppear,enterActive:N.a.tooltipAppearActive,exit:N.a.tooltipLeave,exitActive:N.a.tooltipLeaveActive},timeout:200},b.a.createElement("div",{className:N.a.tooltip},r)):null))}}s()(x,"propTypes",{content:g.a.node.isRequired,disabled:g.a.bool,expanded:g.a.bool,tooltip:g.a.string,action:g.a.func,qaType:I.b.propTypes.qaType,buttonClassName:g.a.string,noFillIcon:g.a.bool});var A=a("tdHr"),L=a.n(A);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}class D extends b.a.PureComponent{constructor(...e){super(...e),s()(this,"state",{isOpen:!1,showOverlay:!1}),s()(this,"onRootActionTouchStart",()=>{this.setState({showOverlay:!0})}),s()(this,"onRootActionMouseEnter",()=>{this.props.disabled||(this.setState({showOverlay:!1}),this.showActions())}),s()(this,"hideActions",()=>{this.setState({isOpen:!1})}),s()(this,"showActions",()=>{this.setState({isOpen:!0})}),s()(this,"renderActions",()=>this.props.actions.map((e,t)=>{var a=t,{onAction:r}=e,c=o()(e,["onAction"]);return b.a.createElement(v.a,{key:a,classNames:{enter:L.a.actionEnter,enterActive:L.a.actionEnterActive,exit:L.a.actionLeave,exitActive:L.a.actionLeaveActive},timeout:{enter:250,exit:200}},b.a.createElement(x,n()({},c,{action:()=>{this.hideActions(),"function"==typeof r&&r()},expanded:!0})))}))}UNSAFE_componentWillReceiveProps(e){!this.props.disabled&&e.disabled&&this.setState({isOpen:!1,showOverlay:!1})}get isOpen(){return this.state.isOpen&&this.state.showOverlay}render(){var{rootAction:e,disabled:t,noFillRootIcon:a,floatClassName:r,transitionSelfAppear:c,transitionSelfAppearActive:i,inModal:s}=this.props,{isOpen:l}=this.state,{onAction:d}=e,m=o()(e,["onAction"]);return b.a.createElement(j.b,{stopActionEvents:!1},b.a.createElement(S.a,{show:this.isOpen,onAction:this.hideActions},b.a.createElement(P,{delay:800},b.a.createElement(O.a,{appear:!0,enter:!1,exit:!1},b.a.createElement(v.a,{classNames:{appear:c,appearActive:i},timeout:500},b.a.createElement(I.b,{className:E()(L.a.self,r,{[L.a.mobile]:Object(C.f)(),[L.a.inModal]:s}),qaType:"floating-menu-button"},b.a.createElement(O.a,{appear:!0,enter:!1},l||t?null:b.a.createElement(v.a,{classNames:{appear:L.a.rootActionEnter,appearActive:L.a.rootActionEnterActive,exit:L.a.rootActionLeave,exitActive:L.a.rootActionLeaveActive},timeout:200},b.a.createElement(x,n()({action:()=>{if(this.props.actions.length>1)this.showActions();else{var e=p()(this.props.actions);e&&u()(e.onAction)&&e.onAction()}"function"==typeof d&&d()},onMouseEnter:this.onRootActionMouseEnter,onTouchStart:this.onRootActionTouchStart,noFillIcon:a,"data-qa":"floating-root-menu-button"},m)))))))),b.a.createElement("div",{className:E()(L.a.self,L.a.open,{[L.a.mobile]:Object(C.f)(),[L.a.inModal]:s}),onMouseLeave:this.hideActions},b.a.createElement(O.a,null,l&&this.renderActions()))))}}s()(D,"defaultProps",{rootAction:{content:b.a.createElement(T.b,{name:"plus"})},transitionSelfAppear:L.a.selfAppear,transitionSelfAppearActive:L.a.selfAppearActive}),s()(D,"propTypes",{actions:g.a.arrayOf(g.a.shape(w(w({},x.propTypes),{},{content:g.a.node,onAction:g.a.func}))).isRequired,rootAction:g.a.shape(x.propTypes),disabled:g.a.bool,noFillRootIcon:g.a.bool,floatClassName:g.a.string,transitionSelfAppear:g.a.string,transitionSelfAppearActive:g.a.string,inModal:g.a.bool});var _,F,q,B=a("VkAN"),V=a.n(B),G=a("/MKj"),U=a("PhEd"),Y=a("ePPS"),X=a("dhJQ"),z=a("3wSE"),H=a("TSDZ"),Q=a("nbpM"),K=a("3+wM"),Z=a.n(K);function J(){var e=V()(["Add New"]);return J=function(){return e},e}function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=Object(X.g)()(_=Object(G.b)(e=>({isReshedulEnabled:Q.a.isReshedulEnabled(e)}))((q=F=class extends m.PureComponent{render(){var{isMatch:e,hideOnDesktop:t,hideOnMobile:a,iconOnlyOnDesktop:r,actions:n,label:c,className:o,inModal:i,isReshedulEnabled:s,buttonSize:l}=this.props;if(e&&!a)return b.a.createElement(D,{actions:n,inModal:i});if(!e&&!t){var u=n.slice();u.reverse();var d={as:U.Button,variant:"primary",size:l,iconSize:"16",iconColor:"white",wrapChildren:!0,showRipple:!1};if(u.length>1){var p=$(r?{label:null,as:z.f,showIcon:!0,icon:"plus",size:"large",className:E()(Z.a.self,Z.a.iconOnly,o),iconClassName:Z.a.iconOnlyIcon,align:"right",qaType:"floating-menu-button"}:{label:c,as:z.f,showIcon:!1,className:E()(Z.a.self,o),align:"right",qaType:"floating-menu-button"},s?d:{});return b.a.createElement(H.g,p,u.map(({id:e,onAction:t,tooltip:a,linkTo:r,qaType:n})=>b.a.createElement(H.c,{key:e,onAction:t,linkTo:r,qaType:n},a)))}if(1===n.length){var{tooltip:m,onAction:f}=n[0],g=r?{showIcon:!0,icon:"plus",size:"large",className:E()(Z.a.iconOnly,o),iconClassName:Z.a.iconOnlyIcon,onAction:f,qaType:"floating-menu-button"}:{showIcon:!1,onAction:f,className:o,qaType:"floating-menu-button"};return b.a.createElement(z.f,g,r?null:m)}return null}return null}},s()(F,"propTypes",{isMatch:g.a.bool,hideOnDesktop:g.a.bool,hideOnMobile:g.a.bool,iconOnlyOnDesktop:g.a.bool,actions:g.a.arrayOf(g.a.object),label:g.a.string,className:g.a.string,inModal:g.a.bool,isReshedulEnabled:g.a.bool,buttonSize:g.a.oneOf(["small","default","large"])}),s()(F,"defaultProps",{hideOnDesktop:!1,hideOnMobile:!1,iconOnlyOnDesktop:!1,actions:[],label:Object(Y.c)(J()),buttonSize:"default"}),_=q))||_)||_},qlDR:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var r,n,c,o=a("VkAN"),i=a.n(o),s=a("lSNA"),l=a.n(s),u=a("E+oP"),d=a.n(u),p=a("q1tI"),m=a.n(p),b=a("17x9"),f=a.n(b),g=a("/MKj"),h=a("ePPS"),E=a("nbpM"),v=a("XOD0"),O=a("IiP0"),y=a("/Q2I"),P=a("Vows"),S=a("Jje6"),j=a("Uvni"),T=a("1063"),I=a("iA5e"),C=a("Xqy3"),k=a("uclB"),R=a.n(k);function N(){var e=i()(["Select Service Group"]);return N=function(){return e},e}function x(){var e=i()(["Select Category"]);return x=function(){return e},e}function A(){Object(v.b)(T.z)}var L=Object(g.b)((e,t)=>({offerCatalogCategories:E.a.getOfferCatalogCategoryList(e),bookableType:Object(I.a)(t),packagesEnabled:E.a.isPackagesEnabled(e)}),{})((c=n=class extends p.PureComponent{constructor(e){super(e),l()(this,"handleOnAction",e=>()=>this.handleRedirect(e)),this.handleRedirects()}componentDidUpdate(){this.handleRedirects()}handleRedirect(e){var{bookableType:t,packagesEnabled:a}=this.props,r=a&&t===C.a.PACKAGE?T.U:T.cb;Object(v.f)(r({groupId:e}))}handleRedirects(){var{offerCatalogCategories:e}=this.props;d()(e)?Object(v.f)(T.z):1===e.length&&this.handleRedirect(e[0].id)}render(){var{offerCatalogCategories:e,packagesEnabled:t}=this.props,a=t?Object(h.c)(x()):Object(h.c)(N());return m.a.createElement(y.i,{fullHeight:!0},m.a.createElement(y.g,{onClose:A},a),m.a.createElement(y.c,{noPadding:!0},m.a.createElement(S.b,null,e.map(e=>m.a.createElement(P.x,{key:e.id,onAction:this.handleOnAction(e.id),prefix:m.a.createElement(S.b,{style:{background:Object(O.e)(e.appointmentColor)},className:R.a.colorDot}),forceSuffixShow:!0,"data-qa":"category-selector"},e.name)))))}},l()(n,"propTypes",{offerCatalogCategories:f.a.arrayOf(f.a.shape(j.a.propTypes)),bookableType:f.a.string,packagesEnabled:f.a.bool}),r=c))||r},rzky:function(e,t,a){"use strict";a.d(t,"e",(function(){return h})),a.d(t,"b",(function(){return E})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return O})),a.d(t,"c",(function(){return y}));var r=a("VkAN"),n=a.n(r),c=a("lSNA"),o=a.n(c),i=a("1Ggn"),s=a("ePPS"),l=a("Xqy3");function u(){var e=n()(["Pricing name"]);return u=function(){return e},e}function d(){var e=n()(["Price type"]);return d=function(){return e},e}function p(){var e=n()(["Special price"]);return p=function(){return e},e}function m(){var e=n()(["Price"]);return m=function(){return e},e}function b(){var e=n()(["Duration"]);return b=function(){return e},e}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h="serviceForm",E=g({BASIC_INFO:"basicInfo",STAFF:"staff",ROOMS:"rooms",TAXES:"taxes",SETTINGS:"settings"},l.b),v=g({COMMISSION_ENABLED:"commissionEnabled",NAME:"name",SUBCATEGORY:"subcategory",ROOM_REQUIRED:"roomRequired",ROOMS:"rooms",UPDATE_FUTURE_BOOKINGS:"updateFutureBookings",SERVICE_PRICING_LEVELS:"servicePricingLevels",DURATION:"duration",SERVICE_PRICING_NAME:"name",PRICE:"price",SPECIAL_PRICE:"specialPrice",EMPLOYEES:"employees",TAX_RATE:"taxRate",MODE:"mode",SERVICE_ID:"id",VOUCHER_ENABLED:"voucherEnabled",VOUCHER_EXPIRATION_PERIOD:"voucherExpirationPeriod",PRICE_TYPE:"priceType",EXTRA_TIME_ENABLED:"extraTimeEnabled",EMPLOYEE_OVERRIDES:"employeeOverrides"},l.c),O={[v.DURATION]:60,[v.PRICE_TYPE]:i.a.FIXED},y={DURATION:Object(s.c)(b()),PRICE:Object(s.c)(m()),SPECIAL_PRICE:Object(s.c)(p()),PRICE_TYPE:Object(s.c)(d()),SERVICE_PRICING_NAME:Object(s.c)(u())}},sc2q:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a("lSNA"),n=a.n(r),c=a("q1tI"),o=a.n(c),i=a("17x9"),s=a.n(i),l=a("Jje6"),u=a("i6OX"),d=a("pVnL"),p=a.n(d),m=a("QILm"),b=a.n(m),f=a("TSYQ"),g=a.n(f),h=a("ZO1O"),E=a("ZifB"),v=a.n(E),O=s.a.oneOfType([s.a.string,s.a.bool,s.a.number]).isRequired;class y extends c.PureComponent{constructor(...e){super(...e),n()(this,"handleAction",()=>{this.props.onChange(this.props.value)})}render(){var e=this.props,{active:t,children:a,onChange:r}=e,n=b()(e,["active","children","onChange"]);return o.a.createElement(h.a,p()({type:"plain transparent noPadding",onAction:this.handleAction,className:g()(v.a.button,{[v.a.selected]:t})},n),a)}}n()(y,"propTypes",{active:s.a.bool,children:s.a.node.isRequired,onChange:s.a.func,value:O});class P extends c.PureComponent{constructor(...e){super(...e),n()(this,"handleChange",e=>{this.props.onChange(e)})}render(){var{options:e,value:t}=this.props;return o.a.createElement(l.b,{flex:"row",className:v.a.self},e.map(e=>o.a.createElement(y,{key:e.value,onChange:this.handleChange,active:e.value===t,value:e.value,qaType:e.qaType||"button-radio-group-item"},o.a.createElement(u.b,{name:e.icon,color:"gray-7",size:"big"}))))}}n()(P,"propTypes",{options:s.a.array.isRequired,value:O,onChange:s.a.func.isRequired})},uHid:function(e,t,a){"use strict";(function(e){var t=a("lSNA"),r=a.n(t),n=a("q1tI"),c=a("17x9"),o=a.n(c);class i extends n.PureComponent{constructor(e){super(e),this.state={isRendered:!1}}componentDidMount(){this.timeout=e.requestAnimationFrame(()=>{e.requestAnimationFrame(()=>{this.setState({isRendered:!0})})})}componentWillUnmount(){e.cancelAnimationFrame(this.timeout)}render(){var e=this.state.isRendered?this.props:{};return this.props.children(e)}}r()(i,"propTypes",{children:o.a.func})}).call(this,a("yLpj"))},vMAe:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return h})),a.d(t,"e",(function(){return E})),a.d(t,"f",(function(){return v})),a.d(t,"c",(function(){return O})),a.d(t,"d",(function(){return y}));var r=a("lSNA"),n=a.n(r),c=a("mwIZ"),o=a.n(c),i=a("O9nY"),s=a.n(i),l=a("nc0P"),u=a.n(l),d=a("ePPS"),p=a("1Ggn"),m=a("rzky");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t){if(e<=0)return 0;var a=s()(u()(e).minus(t).div(e),4);return a<0?0:a}function h(e,t){return Number(u()(e).minus(s()(u()(e).times(t),2)))}function E(e){return Object(d.c)("Step %{currentStep} of %{stepsNumber}",{currentStep:e,stepsNumber:2})}function v(e){var t={};return e[m.d.PRICE_TYPE]===p.a.FIXED&&0===Number(e[m.d.PRICE])&&(t[m.d.PRICE_TYPE]=p.a.FREE),f(f({},e),t)}var O=(e,t)=>{var a=o()(e,[m.d.SERVICE_PRICING_LEVELS,t,m.d.PRICE_TYPE]),r=Number(o()(e,[m.d.SERVICE_PRICING_LEVELS,t,m.d.PRICE],0)).toFixed(2),n=Number(o()(e,[m.d.SERVICE_PRICING_LEVELS,t,m.d.SPECIAL_PRICE],0)).toFixed(2);return{priceType:a,priceTypeText:p.c[a],price:r,specialPrice:n}},y=(e,t,a)=>{var r=o()(e,[m.d.SERVICE_PRICING_LEVELS,t,m.d.PRICE_TYPE]);return o()(e,[m.d.SERVICE_PRICING_LEVELS,t,m.d.EMPLOYEE_OVERRIDES,"p:".concat(a),m.d.PRICE_TYPE])||r}},"w+XU":function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"default",(function(){return k}));var r=a("pVnL"),n=a.n(r),c=a("VkAN"),o=a.n(c),i=a("lSNA"),s=a.n(i),l=a("q1tI"),u=a.n(l),d=a("Ty5D"),p=a("5ZU+"),m=a("ePPS"),b=a("XOD0"),f=a("nbx0"),g=a("eTjC"),h=a("8TPp"),E=a("L8xJ"),v=a("/pl8"),O=a("WTJQ"),y=a("1063"),P=a("Xqy3"),S=a("PRhU"),j=a("DPKA"),T=a("k8EH"),I=a("KHTd");function C(){var e=o()(["Services"]);return C=function(){return e},e}class k extends l.PureComponent{constructor(...t){super(...t),s()(this,"state",{error:null,loading:!0}),s()(this,"handleBack",()=>{Object(b.b)(f.c,!0)}),s()(this,"handleRetry",()=>{e.location.reload(!0)})}componentDidMount(){this.loadData()}loadData(){return this.setState({error:null,loading:!0}),p.a.readOfferCatalogMenu().then(()=>{this.setState({loading:!1})}).catch(t=>{e.console.warn(t),this.setState({error:t,loading:!1})})}render(){var{error:e,loading:t}=this.state;return u.a.createElement(v.b,n()({},P.l,{withPlaceholder:!0}),u.a.createElement(O.b,{flags:"packagesEnabled"},({packagesEnabled:a})=>u.a.createElement(u.a.Fragment,null,u.a.createElement(h.d,{title:Object(m.c)(C()),mobileLeftContent:u.a.createElement(h.a,{icon:"arrow-left-cropped",onAction:this.handleBack})}),t||e?u.a.createElement(E.b,null,u.a.createElement(g.a,{error:e,retry:this.handleRetry})):u.a.createElement(d.d,null,a&&u.a.createElement(d.b,{path:y.q,component:j.a}),u.a.createElement(d.b,{path:y.A,component:I.a}),u.a.createElement(d.b,{path:y.u,exact:!0,component:S.a}),u.a.createElement(d.b,{path:y.z,component:T.a})))))}}}.call(this,a("yLpj"))},ww3E:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var r=a("lSNA"),n=a.n(r),c=a("QILm"),o=a.n(c),i=a("q1tI"),s=a.n(i),l=a("17x9"),u=a.n(l),d=a("TSYQ"),p=a.n(d),m=a("QXy2"),b=a("FAYg"),f=a("i6OX"),g=a("YeTj"),h=a.n(g);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){var{active:t,as:a,disabled:r,inGroup:c,type:l,children:u,className:d,iconClass:m,iconCollapse:g,collapse:v,qaType:O,noFillIcon:y}=e,P=o()(e,["active","as","disabled","inGroup","type","children","className","iconClass","iconCollapse","collapse","qaType","noFillIcon"]),S=l;"string"==typeof l&&(S=l.split(" ")),Array.isArray(S)||(S=[]);var j=p()(h.a.btn,h.a.btnCollapse,S.map(e=>h.a["btn-".concat(e)]),{[h.a.active]:t,[h.a.disabled]:r,[h.a.inGroup]:c,[h.a[v]]:g,[h.a.whiteIcon]:!y},d),T=u;return g&&(T=[s.a.createElement("span",{key:"1",className:p()(h.a.childrenCollapse,h.a[v])},u),s.a.createElement(f.b,{key:"2",name:g,className:p()(m,h.a.iconCollapse,h.a[v])})]),!b.DISABLE_QA_TYPE&&O&&(P["data-qa"]=O),Object(i.createElement)(a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({className:j,disabled:r},P),T)}v.defaultProps={as:"button",type:"default",collapse:"small"},v.propTypes={type:Object(m.c)(Object.keys(h.a).filter(e=>/^btn-/g.test(e)).map(e=>e.substring(4))),className:u.a.string,active:u.a.bool,as:u.a.oneOfType([u.a.string,u.a.func]),disabled:u.a.bool,inGroup:u.a.bool,children:u.a.node,iconClass:u.a.string,iconCollapse:u.a.string,collapse:u.a.oneOf(["extra-small","small","medium"]),qaType:u.a.string,noFillIcon:u.a.bool}}}]);