(window.webpackJsonp=window.webpackJsonp||[]).push([[270,3],{"+/cG":function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("/MKj"),m=a("17x9"),p=a("nbpM"),d=a("XOD0"),b=a("/Q2I"),h=a("dhJQ"),f=a("Jje6"),y=a("c0W2"),g=a("pKoe"),O=a("Xnit"),v=Object(h.g)()(n=Object(u.b)(e=>({appointmentSummary:p.a.getAppointmentSummary(e)}))((o=r=class extends s.PureComponent{constructor(...e){super(...e),c()(this,"handleClose",()=>{var{appointmentId:e}=this.props.appointmentSummary;Object(d.b)(y.l(e))})}render(){var{isMatch:e,appointmentSummary:t}=this.props,a=l.a.createElement(O.a,{appointmentSummary:t});return l.a.createElement(b.i,{size:"small"},l.a.createElement(b.g,{onClose:this.handleClose,noBottomPadding:!0,subheader:e&&a},Object(g.g)(t.policy.variant,t.policy.advanceTimeInMinutes)),l.a.createElement(b.c,{onlyBottomPadding:e},!e&&l.a.createElement(f.b,null,a)))}},c()(r,"propTypes",{appointmentSummary:m.object,isMatch:m.bool}),n=o))||n)||n},"+nox":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("pVnL"),r=a.n(n),o=a("QILm"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("TSYQ"),p=a.n(m),d=a("Jje6"),b=a("WTM4"),h=a.n(b),f=e=>{var{children:t,className:a}=e,n=i()(e,["children","className"]);return s.a.createElement(d.b,r()({className:p()(h.a.self,a)},n),t)};f.propTypes={className:u.a.string,children:u.a.node};var y=f},"/vDv":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("17x9"),m=a.n(u),p=a("/MKj"),d=a("1Ggn"),b=a("Pl0e"),h=a("1HG2"),f=Object(p.b)(e=>({total:Object(b.b)(e)}))((o=r=class extends s.PureComponent{render(){var{total:{serviceCount:e,duration:t,price:a,priceType:n}}=this.props;return 0===e?null:l.a.createElement(h.a,{duration:t,price:a,priceType:n})}},c()(r,"propTypes",{total:m.a.shape({duration:m.a.number,price:m.a.number,serviceCount:m.a.number,priceType:m.a.oneOf(Object.values(d.a))}).isRequired}),n=o))||n},"1Df8":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var n=a("q1tI"),r=a.n(n),o=a("Ty5D"),i=a("+Gzo"),c=a("c0W2"),s=a("M3Ki"),l=a("nZp4"),u=a("lSNA"),m=a.n(u),p=a("17x9"),d=a("5ZU+"),b=a("MoLQ");class h extends n.PureComponent{constructor(...e){super(...e),m()(this,"state",{redirectId:this.props.match.params.id,fetched:!1})}componentDidMount(){d.a.readAppointmentIdToPrimaryBookingId(this.props.match.params.id).then(e=>this.setState({redirectId:e.body.data.attributes.primaryBookingId,fetched:!0})).catch(()=>this.setState({fetched:!0}))}render(){var{fetched:e,redirectId:t}=this.state;return e?r.a.createElement(o.a,{to:Object(c.l)(t)}):r.a.createElement(b.a,null)}}m()(h,"propTypes",{match:Object(p.shape)({params:Object(p.shape)({id:p.string.isRequired})}).isRequired});var f=h;class y extends n.PureComponent{render(){return r.a.createElement(o.d,null,r.a.createElement(o.a,{exact:!0,from:c.j,to:i.z}),r.a.createElement(o.b,{path:c.c,component:f}),r.a.createElement(o.b,{path:c.b,component:s.a}),r.a.createElement(o.b,{path:c.a,component:s.a}),r.a.createElement(o.b,{path:c.e,component:l.a}))}}},"1HG2":function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("17x9"),m=a.n(u),p=a("PhEd"),d=a("/MKj"),b=a("ePPS"),h=a("jwng"),f=a("Jje6"),y=a("Qs7Y"),g=a("KvEn"),O=a("1Ggn"),v=a("nbpM"),E=a("pU8B"),j=a.n(E),N=Object(d.b)(e=>({isReshedulEnabled:v.a.isReshedulEnabled(e)}))((o=r=class extends s.PureComponent{render(){var{duration:e,price:t,priceType:a,isReshedulEnabled:n}=this.props,r=Object(h.l)(e);return l.a.createElement(f.b,{className:j.a.self},n?l.a.createElement(p.Text,{qaType:"appointment-total",type:"fresha-h4",color:"gray100"},Object(b.c)("Total: %{price} %{duration}",{price:l.a.createElement(g.a,{key:"price",className:j.a.price,price:t,priceType:a}),duration:r?"(".concat(r,")"):""})):l.a.createElement(y.d,{qaType:"appointment-total",type:"fresh-title-item-name"},Object(b.c)("Total: %{price} %{duration}",{price:l.a.createElement(g.a,{key:"price",className:j.a.price,price:t,priceType:a}),duration:r?"(".concat(r,")"):""})))}},c()(r,"propTypes",{duration:m.a.number,price:m.a.number,priceType:m.a.oneOf(Object.values(O.a)),isReshedulEnabled:m.a.bool}),n=o))||n},"1jQf":function(e,t,a){"use strict";a.d(t,"a",(function(){return te}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("q1tI"),m=a.n(u),p=a("17x9"),d=a.n(p),b=a("/MKj"),h=a("5ZU+"),f=a("nbpM"),y=a("XOD0"),g=a("ePPS"),O=a("Jje6"),v=a("KvEn"),E=a("dhJQ"),j=a("3wSE"),N=a("/Q2I"),S=a("ZIP/"),P=a("Pl0e"),k=a("k2UN"),w=a("kZhr"),C=a("uZ2f");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(){var e=l()(["Notify client about cancellation"]);return A=function(){return e},e}function R(){var e=l()(["No reason provided"]);return R=function(){return e},e}function M(){var e=l()(["Cancellation reason"]);return M=function(){return e},e}function D(){var e=l()(["Send a message informing the client their appointment was cancelled"]);return D=function(){return e},e}function x(){var e=l()(["Clients are always notified when charged a cancellation fee"]);return x=function(){return e},e}function q(e,t){return t?Object(g.c)(x()):e?Object(g.c)("Send a message informing %{customerName} their appointment was cancelled",{customerName:e}):Object(g.c)(D())}var L,F,B,V=Object(w.q)({form:"appointment-confirm-cancel",enableReinitialize:!0})((o=r=class extends u.PureComponent{render(){var{booking:e,cancellationReasons:t,cancellationChargePossible:a,clientNotificationsEnabled:n,customerName:r}=this.props,{futureBookingsCount:o}=e;return m.a.createElement(m.a.Fragment,null,m.a.createElement(C.r,{name:"cancellationReasonId",emptyLabelValue:null,label:Object(g.c)(M())},m.a.createElement("option",{key:"",value:""},Object(g.c)(R())),t.map(({id:e,name:t})=>m.a.createElement("option",{key:e,value:e},t))),!!o&&m.a.createElement(C.b,{name:"cancelFutureBookings",label:Object(g.c)("Also cancel %{futureBookingsCount} upcoming repeat appointments",{futureBookingsCount:o})}),n&&!!e.customer&&m.a.createElement(C.b,{name:"sendCancelNotification",label:r?Object(g.c)("Notify %{customerName} about cancellation",{customerName:r}):Object(g.c)(A()),hint:q(r,a)}))}},c()(r,"propTypes",I(I({},w.Q),{},{booking:d.a.object.isRequired,customerName:d.a.string,cancellationReasons:d.a.arrayOf(d.a.shape({id:d.a.string.isRequired,name:d.a.string.isRequired})).isRequired,cancellationChargePossible:d.a.bool,clientNotificationsEnabled:d.a.bool})),n=o))||n,H=a("Xnit"),U=a("+Gzo"),Y=a("c0W2"),Q=a("oL3f"),_=a.n(Q);function K(){var e=l()(["Cancel Appointment"]);return K=function(){return e},e}function W(){var e=l()(["Cancel appointment"]);return W=function(){return e},e}function G(){var e=l()(["Charge"]);return G=function(){return e},e}function z(){var e=l()(["Continue without charge"]);return z=function(){return e},e}function J(){var e=l()(["No charge"]);return J=function(){return e},e}function Z(){var e=l()(["Appointment cancellation failed"]);return Z=function(){return e},e}function X(){var e=l()(["Appointment cancellation successful"]);return X=function(){return e},e}var $=[Object(g.c)(X())],ee=[Object(g.c)(Z())],te=Object(E.g)()(L=Object(b.b)(e=>({appointmentSummary:f.a.getAppointmentSummary(e),cancellationReasons:f.a.getCancellationReasonList(e),tooLate:Object(P.m)(e),tooEarlyForFee:Object(P.l)(e),isFreshaPayEnabled:f.a.isFreshaPayEnabled(e),isDistributedAppointmentHistoryLogEnabled:f.a.isDistributesAppointmentHistoryLogEnabled(e),clientNotificationsEnabled:f.a.areClientNotificationsEnabledForType(e,S.d.CANCELLATION)}),{submitForm:function(){return Object(w.hb)("appointment-confirm-cancel")},readAppointmentHistory:k.g})((B=F=class extends u.PureComponent{constructor(...e){super(...e),c()(this,"formValues",null),c()(this,"handleSubmit",e=>{this.formValues=e}),c()(this,"handleAccept",()=>{this.props.submitForm();var{appointmentSummary:e,isDistributedAppointmentHistoryLogEnabled:t}=this.props,{appointmentId:a,primaryBooking:{id:n,bookingSequence:r}}=e,o=this.formValues;return k.b(a,n,r,o).then(()=>t?this.props.readAppointmentHistory(n):h.a.readBookingHistory(n)).then(()=>{h.a.addGlobalSuccessToast($),Object(y.b)(U.z)}).catch(()=>{h.a.addGlobalErrorToast(ee)})}),c()(this,"handleAcceptFee",()=>{this.props.submitForm();var{appointmentSummary:{primaryBooking:{id:e,location:t}}}=this.props;Object(y.f)(Y.m(e,t,this.formValues))}),c()(this,"handleCancel",()=>{Object(y.f)(y.a.location.pathname.replace("/confirm-cancel",""))})}componentDidMount(){h.a.readCancellationReasonList()}renderButtons(e){var{isMatch:t,appointmentSummary:{fees:{cancellationFeeGross:a}}}=this.props;return e?m.a.createElement(N.b,null,m.a.createElement(j.a,{onAction:this.handleAccept,withPending:!0,grow:1,basis:"100%",qaType:"modal-no-charge-button"},t?Object(g.c)(J()):Object(g.c)(z())),m.a.createElement(j.f,{onAction:this.handleAcceptFee,withPending:!0,grow:1,basis:"100%",qaType:"modal-charge-button"},m.a.createElement(O.b,null,Object(g.c)(G())," ",m.a.createElement(v.a,{price:a})))):m.a.createElement(N.b,null,m.a.createElement(j.f,{basis:t?"100%":"50%",shrink:1,type:j.f,onAction:this.handleAccept,withPending:!0,qaType:"cancel-appointment-button"},Object(g.c)(W())))}render(){var{appointmentSummary:e,cancellationReasons:t,isMatch:a,tooLate:n,tooEarlyForFee:r,isFreshaPayEnabled:o,clientNotificationsEnabled:i}=this.props,{policy:c,saleId:s,customer:l}=e,u=c.cancellationFeeRate&&!s&&!n&&!r&&o,p=l&&l.firstName;if(!e)return null;var d=u?m.a.createElement(O.b,{className:_.a.description},m.a.createElement(H.a,{appointmentSummary:e,cancellationOnly:!0})):null;return m.a.createElement(N.i,{size:"small",qaType:"policy-modal-cancellation"},m.a.createElement(N.g,{secondaryAction:m.a.createElement(j.e,{onAction:this.handleCancel,qaType:"close-modal-btn"}),subheader:a&&d,qaType:"modal-header-cancellation"},Object(g.c)(K())),m.a.createElement(N.c,{className:_.a.self,onlyBottomPadding:!0},!a&&d,m.a.createElement(O.b,{className:_.a.form},m.a.createElement(V,{booking:e.primaryBooking,customerName:p,cancellationReasons:t,clientNotificationsEnabled:i,cancellationChargePossible:u,onSubmit:this.handleSubmit,initialValues:{cancelFutureBookings:!1,cancellationReasonId:"",sendCancelNotification:!0}}))),m.a.createElement(N.e,{modalWindow:!0,embeddedToaster:!1,marginTop:35,noPadding:!0},this.renderButtons(u)))}},c()(F,"propTypes",{isMatch:d.a.bool,appointmentSummary:d.a.object.isRequired,cancellationReasons:d.a.arrayOf(d.a.shape({name:d.a.string.isRequired})),submitForm:d.a.func.isRequired,readAppointmentHistory:d.a.func,tooLate:d.a.bool,tooEarlyForFee:d.a.bool,isFreshaPayEnabled:d.a.bool,isDistributedAppointmentHistoryLogEnabled:d.a.bool,clientNotificationsEnabled:d.a.bool}),c()(F,"defaultProps",{cancellationReasons:[]}),L=B))||L)||L},"4flP":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("lSNA"),r=a.n(n),o=a("G4qV"),i=a("nbpM"),c=a("gvXR");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=Object(o.a)(e=>i.a.getServicePricingLevelRoomDict(e),(e,t)=>i.a.getLocationRoomDict(e)[t],(e,t)=>Object.entries(e).reduce((e,[a,n])=>(null!=n&&(e[a]=t.reduce((e,t,a)=>{var r=n.includes(t.id);return e.rooms.push(l(l({},t),{},{available:r,name:r?t.name:"".concat(c.h," ").concat(t.name)})),(0===a||!e.defaultAvailable&&r)&&(e.defaultRoomId=t.id,e.defaultAvailable=r),e},{rooms:[],defaultRoomId:null})),e),{}))},"5XOi":function(e,t,a){"use strict";a.d(t,"a",(function(){return G}));var n,r,o,i,c,s,l=a("pVnL"),u=a.n(l),m=a("QILm"),p=a.n(m),d=a("lSNA"),b=a.n(d),h=a("mwIZ"),f=a.n(h),y=a("q1tI"),g=a.n(y),O=a("17x9"),v=a.n(O),E=a("TSYQ"),j=a.n(E),N=a("Jje6"),S=a("TSDZ"),P=a("i6OX"),k=a("JraT"),w=a("AQgK"),C=a("/pl8"),T=a("g5rd"),I=a("NgSR"),A=a("VkAN"),R=a.n(A),M=a("PhEd"),D=a("/MKj"),x=a("ePPS"),q=a("Qs7Y"),L=a("dhJQ"),F=a("jLFJ"),B=a("nbpM"),V=a("3WHN"),H=a("vxZb"),U=a.n(H);function Y(){var e=R()(["Walk-In"]);return Y=function(){return e},e}function Q(){var e=R()(["Walk-In"]);return Q=function(){return e},e}var _=(n=Object(L.g)(),r=Object(F.f)(["isHover","isActive"]),o=Object(D.b)((e,{customer:t})=>({isReshedulEnabled:B.a.isReshedulEnabled(e),customerOnlineProfileOverride:Object(V.a)(e,t)})),n(i=Object(F.d)(i=r(i=o((s=c=class extends y.PureComponent{render(){var e=this.props,{className:t,customer:a,customerOnlineProfileOverride:n,children:r,isMatch:o,isActive:i,isHover:c,avatarSize:s,isReshedulEnabled:l}=e,m=p()(e,["className","customer","customerOnlineProfileOverride","children","isMatch","isActive","isHover","avatarSize","isReshedulEnabled"]),{name:d,contactNumber:b,email:h}=n;return g.a.createElement(N.b,u()({className:j()(U.a.self,{[U.a.active]:i,[U.a.hover]:c},t),qaType:"customer-item"},m),g.a.createElement(T.a,{className:U.a.customerAvatar,size:s,customerId:f()(a,"id")}),g.a.createElement(N.b,{className:U.a.customerDetails,flex:"column",grow:1},l?g.a.createElement(M.Text,{type:"fresha-h4",color:"gray100",qaType:"customer-name"},a?a.name:Object(x.c)(Q()),d&&" *"):g.a.createElement(q.d,{type:"item-name",className:U.a.customerName,qaType:"customer-name"},a?a.name:Object(x.c)(Y()),d&&" *"),a&&(l?g.a.createElement(M.Text,{type:"fresha-caption",color:"gray50",qaType:"customer-contact-number-email"},a.contactNumber,b&&" *",a.email&&", ",a.email,h&&" *"):g.a.createElement(q.d,{type:o?"form-label":"body-2",qaType:"customer-contact-number-email"},a.contactNumber,b&&" *",a.email&&", ",a.email,h&&" *"))),r)}},b()(c,"propTypes",{className:v.a.string,customer:I.a,customerOnlineProfileOverride:v.a.shape({name:v.a.bool,contactNumber:v.a.bool,email:v.a.bool}),children:v.a.node,isMatch:v.a.bool,isActive:v.a.bool,isHover:v.a.bool,avatarSize:T.e.propTypes.size,isReshedulEnabled:v.a.bool}),b()(c,"defaultProps",{avatarSize:T.e.SIZE.DEFAULT}),i=s))||i)||i)||i)||i),K=a("jT/X"),W=a.n(K);class G extends y.PureComponent{constructor(...e){super(...e),b()(this,"dropdown",void 0),b()(this,"dropdownRef",e=>{this.dropdown=e}),b()(this,"toggleDropdown",()=>{this.dropdown.toggleMenu()}),b()(this,"renderDropdownAction",({show:e,text:t,onAction:a,danger:n,permissionButton:r,permissionKeys:o,qaType:i})=>e?r?g.a.createElement(C.b,{keys:o},e=>g.a.createElement(S.c,{onAction:Object(C.c)(e,a),qaType:i},t)):n?g.a.createElement(S.b,{onAction:a,qaType:i},t):g.a.createElement(S.c,{onAction:a,qaType:i},t):null)}render(){var e=this.props,{className:t,customer:a,onAction:n,detailsMode:r,isMatch:o,dropdownActions:i=[],avatarSize:c}=e,s=p()(e,["className","customer","onAction","detailsMode","isMatch","dropdownActions","avatarSize"]),l=f()(a,"labels.length",[])>0,m=a&&a.displayNote&&a.note;return g.a.createElement(N.b,u()({qaType:"customer-widget",className:j()(W.a.self,t),shrink:0,flex:"column"},s),g.a.createElement(_,{className:j()({[W.a.withBadges]:l}),onAction:r?this.toggleDropdown:n,customer:a,avatarSize:c},(r||n)&&g.a.createElement(N.b,{className:W.a.iconWrapper},r?g.a.createElement(S.f,{qaType:"customer-dropdown-menu",icon:S.f.ICON.OPTIONS,align:"right",rwdRef:this.dropdownRef,className:j()(W.a.icon,W.a.dropdown)},i.map(e=>this.renderDropdownAction(e))):n&&g.a.createElement(P.b,{size:"small",name:"arrow-right-cropped",color:"gray-7",className:W.a.iconWrapperIcon}))),l&&g.a.createElement(w.a,{className:j()(W.a.badges,{[W.a.withNote]:m}),customer:a}),m&&g.a.createElement(N.b,{className:W.a.noteWrapper,flex:"row"},g.a.createElement(k.a,{note:a.note})),g.a.createElement(N.b,{className:W.a.border}))}}b()(G,"propTypes",{customer:I.a,onAction:v.a.func,className:v.a.string,detailsMode:v.a.bool,isMatch:v.a.bool,dropdownActions:v.a.arrayOf(v.a.shape({show:v.a.bool,onAction:v.a.func,text:v.a.string,danger:v.a.bool,permissionButton:v.a.bool,permissionKeys:v.a.string,qaType:v.a.string})),avatarSize:T.e.propTypes.size}),b()(G,"defaultProps",{detailsMode:!1})},"6Jup":function(e,t,a){"use strict";a.d(t,"b",(function(){return de})),a.d(t,"a",(function(){return $}));var n,r,o,i,c=a("VkAN"),s=a.n(c),l=a("pVnL"),u=a.n(l),m=a("lSNA"),p=a.n(m),d=a("QILm"),b=a.n(d),h=a("mwIZ"),f=a.n(h),y=a("vN+2"),g=a.n(y),O=a("q1tI"),v=a.n(O),E=a("17x9"),j=a.n(E),N=a("TSYQ"),S=a.n(N),P=a("2O3R"),k=a("cuY2"),w=a.n(k),C=a("/MKj"),T=a("5ZU+"),I=a("nbpM"),A=a("ePPS"),R=a("jLFJ"),M=a("Jje6"),D=a("uopA"),x=a("3wSE"),q=a("6Max"),L=a("sQrb"),F=a("15o+"),B=a("Puqe"),V=a.n(B),H=a("7GkX"),U=a.n(H),Y=a("PhEd"),Q=a("lSiv"),_=a("Qs7Y"),K=a("+nox"),W=a("1Ggn"),G=a("UB5X"),z=a.n(G),J=a("KvEn"),Z=a("cSD7"),X=a.n(Z);class $ extends O.PureComponent{constructor(...e){super(...e),p()(this,"initialPrice",this.props.price),p()(this,"state",{isPriceTypeHidden:!1}),p()(this,"showPriceType",()=>this.setState({isPriceTypeHidden:!1})),p()(this,"hidePriceType",()=>this.setState({isPriceTypeHidden:!0}))}componentDidUpdate(e){var{dynamicPriceType:t,price:a}=this.props,{isPriceTypeHidden:n}=this.state;t&&(e.isPackage!==this.props.isPackage?this.showPriceType():this.initialPrice===a||n||this.hidePriceType())}render(){var e=this.props,{price:t,basePrice:a,priceType:n,dynamicPriceType:r}=e,o=b()(e,["price","basePrice","priceType","dynamicPriceType"]),{isPriceTypeHidden:i}=this.state,c=((e,t)=>z()(e)&&z()(t)&&e>t)(a,t),s=i?null:n;return v.a.createElement(M.b,u()({flex:"column",alignItems:"flex-end",qaType:"sale-item-price"},o),c&&v.a.createElement(J.a,{qaType:"sale-price",className:X.a.specialPrice,price:t,priceType:s}),v.a.createElement(J.a,{qaType:c?"discounted-price":"sale-price",className:S()(X.a.price,{[X.a.oldPrice]:c}),price:t>a?t:a,priceType:c?null:s}))}}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}p()($,"propTypes",{price:j.a.number,basePrice:j.a.number.isRequired,priceType:j.a.oneOf(Object.values(W.a)),dynamicPriceType:j.a.bool,isPackage:j.a.bool});var ae,ne,re,oe=[...U()(Q.a.fields),"specialPrice","discountPrice","editableQuantity","editablePrice","editableDiscount","outOfStock","specialDiscountName","specialDiscountType","specialDiscountValue"],ie=(n=Object(C.b)(e=>({isReshedulEnabled:I.a.isReshedulEnabled(e)})),Object(R.e)(r=n((i=o=class extends O.PureComponent{constructor(...e){super(...e),p()(this,"handleRemove",()=>{var{id:e,removable:t,onRemove:a}=this.props;return t&&a(e),!1})}render(){var e=this.props,{className:t,removable:a,remove:n,disabled:r,description:o,name:i,quantity:c,salePrice:s,totalPrice:l,basePrice:m,priceType:p,baseTotal:d,shrink:h,mobile:f,itemType:y,packageInfo:g,checkoutFlow:O,onRemove:E,isRefund:j,taxRates:N,serviceCaption:P,renderer:k,isReshedulEnabled:w}=e,C=b()(e,["className","removable","remove","disabled","description","name","quantity","salePrice","totalPrice","basePrice","priceType","baseTotal","shrink","mobile","itemType","packageInfo","checkoutFlow","onRemove","isRefund","taxRates","serviceCaption","renderer","isReshedulEnabled"]),T=Number.isFinite(c);return v.a.createElement(M.b,u()({className:S()(X.a.item,t,{[X.a.disabledItem]:r,[X.a.shrink]:h})},V()(C,oe)),T&&(w?v.a.createElement(K.a,{className:X.a.quantity},v.a.createElement(Y.Text,{type:"fresha-h4",color:"gray100"},c)):v.a.createElement(K.a,{className:X.a.quantity},c)),v.a.createElement(M.b,{className:X.a.details},v.a.createElement(M.b,null,w?v.a.createElement(Y.Text,{className:X.a.name,qaType:"sale-item-title",type:"fresha-h4",color:"gray100"},v.a.createElement(M.b,{as:"span",qaType:"sale-item-name"},i)):v.a.createElement(_.d,{className:X.a.name,qaType:"sale-item-title"},v.a.createElement(M.b,{as:"span",qaType:"sale-item-name"},i))),v.a.createElement(K.a,{qaType:"sale-item-description"},w?v.a.createElement(Y.Text,{type:"fresha-caption",color:"gray50"},P&&"".concat(P,", "),o):v.a.createElement(v.a.Fragment,null,P&&"".concat(P,", "),o))),w?v.a.createElement(Y.Text,{type:"fresha-h4",color:"gray100"},v.a.createElement($,{className:X.a.priceContainer,price:T?l:s,basePrice:T?d:m,priceType:p===W.a.STARTS_AT?p:null,dynamicPriceType:!0,isPackage:g})):v.a.createElement($,{className:X.a.priceContainer,price:T?l:s,basePrice:T?d:m,priceType:p===W.a.STARTS_AT?p:null,dynamicPriceType:!0,isPackage:g}),a&&!f&&v.a.createElement(x.b,{name:"delete",touchOverlay:!0,iconClassName:X.a.removeIcon,onAction:this.handleRemove,qaType:"sale-item-remove"}))}},p()(o,"propTypes",te(te({},oe.propTypes),{},{className:j.a.string,removable:j.a.bool,onRemove:j.a.func,quantity:j.a.number,shrink:j.a.bool,mobile:j.a.bool,isReshedulEnabled:j.a.bool})),r=i))||r)||r);function ce(){var e=s()(["Add item to sale"]);return ce=function(){return e},e}function se(){var e=s()(["Your order is empty. You haven't added any items yet"]);return se=function(){return e},e}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=Object(R.d)(ie),pe={animating:X.a.animating},de=Object(C.b)(e=>{var t=I.a.getCheckoutItems(e).map(e=>{var{quantity:t}=e;return ue(ue({},b()(e,["quantity"])),{},{quantity:Number(t)})}),a=0===t.length,n=t.filter(e=>e.isRefund).length;return{items:t,isEmpty:a,activeIndex:I.a.getCheckoutActiveIndex(e),refundItemsCount:n,servicePricingLevels:I.a.getServicePricingLevelList(e)}},{setActiveIndex:T.a.setCheckoutActiveIndex})((re=ne=class extends O.PureComponent{constructor(...e){super(...e),p()(this,"state",{checkoutItemToDelete:null}),p()(this,"onFlipMoveAnimationEnd",e=>{var{leaving:t,key:a}=e;t&&a&&this.setState({checkoutItemToDelete:Number(a.replace(".$",""))})}),p()(this,"onFlipMoveAnimationEndAll",()=>{null!=this.state.checkoutItemToDelete&&(T.a.deleteCheckoutItem(this.state.checkoutItemToDelete),this.setState({checkoutItemToDelete:null}))}),p()(this,"handleRemoveItem",e=>{var{items:t,splitPackage:a}=this.props;t.filter(t=>t.id===e)[0].packageInfo?a(e).then(()=>{this.setState({checkoutItemToDelete:Number(e)})}).catch(g.a):this.setState({checkoutItemToDelete:Number(e)})})}renderSaleList(){var{items:e,activeIndex:t,setActiveIndex:a,refundItemsCount:n,servicePricingLevels:r,noShowOrCancelMode:o}=this.props;return v.a.createElement(P.a,{duration:250,enterAnimation:"accordionVertical",leaveAnimation:"accordionVertical",appearAnimation:"accordionVertical",easing:"ease-out",onFinish:this.onFlipMoveAnimationEnd,onFinishAll:this.onFlipMoveAnimationEndAll},e.filter(e=>e.id!==this.state.checkoutItemToDelete).map((e,i)=>{var c=t===i,s=!e.isRefund||n>1,l=r.find(t=>t.id===f()(e,["voucher","servicePricingLevel"]));return v.a.createElement(M.b,{key:e.id,className:S()(X.a.listItem,X.a.hoverable,{[X.a.active]:c,[X.a.refundItem]:e.isRefund}),qaType:"sale-list-item"},v.a.createElement(me,u()({},e,{removable:s&&!o,onAction:c?void 0:()=>a(i),onRemove:this.handleRemoveItem,marginRight:s?void 0:28,serviceCaption:f()(l,"name"),qaType:"enhanced-list-item"})),v.a.createElement(w.a,{duration:200,easing:"linear",height:c?102:0,animationStateClasses:pe},v.a.createElement(L.a,{id:e.id,key:e.id,sectionClassName:X.a.desktopEdit,desktop:!0,autoSubmit:!0,noShowOrCancelMode:o,qaType:"edit-sale-item-form"})))}))}render(){return v.a.createElement(M.b,{className:X.a.list},this.props.isEmpty&&v.a.createElement(D.a,{marginTop:160,icon:"empty-order",text:Object(A.c)(se())},v.a.createElement(x.d,null,v.a.createElement(x.f,{linkTo:F.C(),qaType:"add-first-item-to-sale"},Object(A.c)(ce())))),this.renderSaleList())}},p()(ne,"propTypes",{items:j.a.arrayOf(j.a.object),isEmpty:j.a.bool,activeIndex:j.a.number,setActiveIndex:j.a.func,refundItemsCount:j.a.number,servicePricingLevels:j.a.arrayOf(j.a.shape(q.a.propTypes)),noShowOrCancelMode:j.a.bool,splitPackage:j.a.func}),ae=re))||ae},A392:function(e,t,a){"use strict";a.d(t,"a",(function(){return Z}));var n,r,o,i,c,s,l=a("VkAN"),u=a.n(l),m=a("lSNA"),p=a.n(m),d=a("q1tI"),b=a.n(d),h=a("17x9"),f=a.n(h),y=a("TSYQ"),g=a.n(y),O=a("/MKj"),v=a("yvsu"),E=a("nbpM"),j=a("yk2N"),N=a("ePPS"),S=a("Jje6"),P=a("Qs7Y"),k=a("ILTB"),w=a.n(k),C=a("pVnL"),T=a.n(C),I=a("QILm"),A=a.n(I),R=a("nIiI"),M=a("TJnl"),D=a("PhEd"),x=a("Vows"),q=a("dhJQ"),L=Object(q.g)()(n=Object(O.b)(e=>({isReshedulEnabled:E.a.isReshedulEnabled(e)}))((o=r=class extends d.PureComponent{render(){var e=this.props,{className:t,label:a,isMatch:n,primaryValue:r,secondaryValue:o,description:i,qaType:c,isReshedulEnabled:s}=e,l=A()(e,["className","label","isMatch","primaryValue","secondaryValue","description","qaType","isReshedulEnabled"]),u=o&&r!==o,m="".concat(r).concat(u?" *":"");return n?b.a.createElement(x.e,{className:t,label:a,value:m,description:i}):b.a.createElement(S.b,T()({className:g()(t,w.a.infoRow),qaType:c},l),s?b.a.createElement(D.Text,{type:"fresha-caption",color:"gray50"},a):b.a.createElement(P.d,{type:"body-2"},a),s?b.a.createElement(D.Text,{qaType:"".concat(c,"-content"),type:"fresha-paragraph",color:"gray100"},m):b.a.createElement(P.d,{qaType:"".concat(c,"-content"),type:"form-field-content"},m),i&&b.a.createElement(P.d,{className:w.a.description,qaType:"".concat(c,"-description"),type:"helper"},i))}},p()(r,"propTypes",{className:f.a.string,label:f.a.string,primaryValue:f.a.string,secondaryValue:f.a.string,qaType:f.a.string,description:f.a.string,isMatch:f.a.bool,isReshedulEnabled:f.a.bool}),n=o))||n)||n;function F(){var e=u()(["Doesn’t accept marketing notifications"]);return F=function(){return e},e}function B(){var e=u()(["Accepts marketing notifications"]);return B=function(){return e},e}function V(){var e=u()(["Marketing notifications"]);return V=function(){return e},e}class H extends d.PureComponent{render(){var e=this.props,{acceptsMarketingNotifications:t,consentLog:a}=e,n=A()(e,["acceptsMarketingNotifications","consentLog"]);return b.a.createElement(L,T()({label:Object(N.c)(V()),primaryValue:t?Object(N.c)(B()):Object(N.c)(F()),description:a?Object(N.c)("%{name} updated this setting on %{date}",{name:a.name,date:b.a.createElement(R.a,{key:"consent-log",date:a.date,dateFormat:M.b})}):void 0},n))}}function U(){var e=u()(["Do not ask to confirm appointments with card"]);return U=function(){return e},e}function Y(){var e=u()(["Ask to confirm appointments with card"]);return Y=function(){return e},e}function Q(){var e=u()(["Cancellation policy"]);return Q=function(){return e},e}function _(){var e=u()(["Gender"]);return _=function(){return e},e}function K(){var e=u()(["Date of Birth"]);return K=function(){return e},e}function W(){var e=u()(["Address"]);return W=function(){return e},e}function G(){var e=u()(["Email"]);return G=function(){return e},e}function z(){var e=u()(["Telephone"]);return z=function(){return e},e}function J(){var e=u()(["Mobile"]);return J=function(){return e},e}p()(H,"propTypes",{acceptsMarketingNotifications:f.a.bool,consentLog:f.a.shape({name:f.a.string,date:f.a.string})});var Z=Object(O.b)((e,t)=>{var a=t.client.id;return{consentLog:E.a.getCustomerMarketingConsentLog(e,a),isMarketplaceAppointmentConfirmationUsable:E.a.isMarketplaceAppointmentConfirmationUsable(e)}})((s=c=class extends d.PureComponent{render(){var{className:e,client:t,isMarketplaceAppointmentConfirmationUsable:a,client:{address:n,area:r,birthdayDay:o,birthdayMonth:i,birthdayYear:c,city:s,contactNumber:l,email:u,gender:m,acceptsMarketingNotifications:p,marketplaceAppointmentConfirmationEnabled:d,postCode:h,state:f,telephone:y,hasOverriddenOnlineProfile:O},consentLog:v}=this.props,E=t.onlineProfile||{},k=Object(j.a)(o,i,c),C=[n,r,s,f,h].filter(e=>e);return b.a.createElement(S.b,{className:g()(w.a.self,e)},l&&b.a.createElement(L,{qaType:"client-contact-number",label:Object(N.c)(J()),primaryValue:l,secondaryValue:E.contactNumber}),y&&b.a.createElement(L,{label:Object(N.c)(z()),primaryValue:y}),u&&b.a.createElement(L,{qaType:"client-email",label:Object(N.c)(G()),primaryValue:u,secondaryValue:E.email}),C.length>0&&b.a.createElement(L,{qaType:"client-address",label:Object(N.c)(W()),primaryValue:C.join("\n")}),k&&b.a.createElement(L,{label:Object(N.c)(K()),primaryValue:k}),m&&b.a.createElement(L,{qaType:"client-gender",label:Object(N.c)(_()),primaryValue:m,className:w.a.gender}),b.a.createElement(H,{qaType:"marketing-consent",acceptsMarketingNotifications:p,consentLog:v}),a&&b.a.createElement(L,{qaType:"confirm-with-card",label:Object(N.c)(Q()),primaryValue:d?Object(N.c)(Y()):Object(N.c)(U())}),O&&b.a.createElement(P.d,{type:"body-2",className:g()(w.a.legend,w.a.infoRow)},Object(N.c)("* Contact info is different to Fresha online booking profile: %{name}",{name:[E.firstName,E.lastName].filter(Boolean).join(" ")})))}},p()(c,"propTypes",{className:f.a.string,isMarketplaceAppointmentConfirmationUsable:f.a.bool,client:f.a.shape({address:f.a.string,area:f.a.string,birthdayDay:f.a.number,birthdayMonth:f.a.number,birthdayYear:f.a.number,city:f.a.string,contactNumber:f.a.string,displayNote:f.a.bool,email:f.a.string,firstName:f.a.string,name:f.a.string,acceptsMarketingNotifications:f.a.bool,marketplaceAppointmentConfirmationEnabled:f.a.bool,postCode:f.a.string,state:f.a.string,telephone:f.a.string,gender:f.a.string,hasOverriddenOnlineProfile:f.a.bool,onlineProfile:f.a.object}).isRequired,consentLog:f.a.shape(v.a.propTypes)}),i=s))||i},AGHz:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return M})),a.d(t,"d",(function(){return D})),a.d(t,"f",(function(){return q})),a.d(t,"c",(function(){return L})),a.d(t,"a",(function(){return F})),a.d(t,"e",(function(){return B}));var n=a("lSNA"),r=a.n(n),o=a("VkAN"),i=a.n(o),c=a("mwIZ"),s=a.n(c),l=a("G4qV"),u=a("WV/M"),m=a("j3RN"),p=a("yk2N"),d=a("ePPS"),b=a("nbpM"),h=a("9fVE"),f=a("kZhr"),y=a("C2XB"),g=a("SBfo"),O=a("4flP");function v(){var e=i()(["At least one service must be defined"]);return v=function(){return e},e}function E(){var e=i()(["Duration"]);return E=function(){return e},e}function j(){var e=i()(["Start time"]);return j=function(){return e},e}function N(){var e=i()(["Resource"]);return N=function(){return e},e}function S(){var e=i()(["Employee"]);return S=function(){return e},e}function P(){var e=i()(["Service"]);return P=function(){return e},e}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(){var e=i()(["Processing time"]);return C=function(){return e},e}function T(){var e=i()(["Processing time after"]);return T=function(){return e},e}function I(){var e=i()(["Blocked time"]);return I=function(){return e},e}function A(){var e=i()(["Blocked time after"]);return A=function(){return e},e}var R=Object(f.T)(g.n),M=e=>300*Math.ceil(e/300);var D=(t,a={})=>{var{roomData:n=[],initialValues:r,currencyCode:o,type:i,packageName:c,packageInstanceId:l}=a,{name:b,description:f,specialPrice:y,basePrice:O,priceType:v}=Object(m.b)({servicePricingLevel:t.servicePricingLevel}),E=Number.isFinite(t.retailPrice)?t.retailPrice:Object(h.b)(O,y),j=t.priceType||v,N=Object(p.h)(E,{currencyCode:o,round:!0,priceType:j}),S=function(e={}){var{servicePricingLevel:t,packageVersion:a}=e;if(!t)return{};var n=e.extraTimeType||!a&&s()(t,"service.extraTimeType")||null,r=e.extraTimeInSeconds||!a&&s()(t,"service.extraTimeInSeconds")||null,o="",i="";switch(n){case"blocking":o=Object(d.c)(A()),i=Object(d.c)(I());break;case"processing":o=Object(d.c)(T()),i=Object(d.c)(C())}return{[g.c]:60*t.duration,[g.f]:r,[g.g]:o,[g.h]:i}}(t),P={splId:t.servicePricingLevel.id,details:"(".concat(f,", ").concat(N,")"),type:i,price:E,priceType:j},k={};switch(void 0!==t.packageExtraTime&&(k.extraTime=t.packageExtraTime,k.extraTimeDescription=t.packageExtraTimeDescription,k.extraTimeLabel=t.packageExtraTimeLabel),i){case u.a.PACKAGE_ITEM:S[g.a]=w(w({},P),{},{id:t.id,name:Object(h.d)(b,{name:c}),packageInstanceId:l});break;case u.a.SERVICE_PRICING_LEVEL:S[g.a]=w(w({},P),{},{id:t.servicePricingLevel.id,name:Object(h.d)(b)}),Object.assign(S,k);break;default:e.console.warn("Booked item type not implemented: ".concat(a.type))}var R=n[t.servicePricingLevel.id];if(R&&r){var M=r[g.i][0][g.l],D=R.defaultRoomId;S[g.l]=M||D}else S[g.l]=null;return S},x={[g.a]:f.kb.isNotEmpty(Object(d.c)(P())),[g.d]:f.kb.required(Object(d.c)(S())),[g.l]:f.kb.required(Object(d.c)(N())),[g.m]:f.kb.numericRequired(Object(d.c)(j())),[g.c]:f.kb.required(Object(d.c)(E()))};function q(e,t){var{[g.i]:a}=e,{roomData:n}=t,r={};if(a&&a.length){var o=a.reduce((e,t,a)=>{var r={};return Object.entries(x).forEach(([o,i])=>{var c;if(o===g.l){var s=t[g.a];s&&n[s.splId]&&n[s.splId].rooms&&(c=i(t[o]))}else c=i(t[o]);c&&(r[o]=c,e[a]=r)}),e},[]);o.length&&(r[g.i]=o)}else r[g.i]={_error:Object(d.c)(v())};return r}function L(e,t){var a=R(e);if(a)return a;var n=b.a.getBookingFlowLocation(e),r=b.a.getBookingFlowCustomer(e),o=b.a.getBookingFlowBookings(e),i=b.a.getServicePricingLevelDict(e),c=b.a.isMarketplaceAppointmentConfirmationUsable(e)&&b.a.isNoShowSettingsMarketplaceAppointmentConfirmationEnabled(e)&&s()(r,"marketplaceAppointmentConfirmationEnabled",!1),l=b.a.getProvider(e),m=Object(O.a)(e,n.id);return{[g.b]:b.a.getBookingFlowDate(e),[g.j]:b.a.getBookingFlowNote(e),[g.o]:c,[g.k]:t,[g.i]:o.map((t,a)=>{var n=s()(t,"bookedPackageItem.packageInstance"),r=t.servicePricingLevel&&("string"==typeof t.servicePricingLevel?t.servicePricingLevel:t.servicePricingLevel.splId)||(Object(f.R)(g.n)(e,g.a)||{}).splId,o={[g.a]:{}};return i[r]&&!t.bookedItem&&(o=n?D(w(w({},t.bookedPackageItem.packageItem.ref),{},{servicePricingLevel:i[r],retailPrice:t.booking.price}),{type:u.a.PACKAGE_ITEM,currencyCode:l.currencySymbol,packageName:n.packageName,packageInstanceId:n.id}):D({retailPrice:t.booking.price,servicePricingLevel:i[r]},{type:u.a.SERVICE_PRICING_LEVEL,currencyCode:l.currencySymbol})),{key:a,id:t.id,bookingId:t.booking,[g.a]:t.bookedItem||o[g.a],[g.d]:t.employee,[g.e]:Boolean(t.employeeIsRequested),[g.l]:t.room||s()(m,[r,"defaultRoomId"]),[g.m]:M(t.start),[g.c]:t.duration||o[g.c],[g.g]:t.extraTimeDescription||o[g.g],[g.h]:t.extraTimeLabel||o[g.h],[g.f]:t.extraTime||null}})}}var F={NOT_VISIBLE:"NOT_VISIBLE",DISABLED:"DISABLED",AVAILABLE:"AVAILABLE"},B=Object(l.a)(b.a.isMarketplaceAppointmentConfirmationDiscoverable,b.a.isMarketplaceAppointmentConfirmationUsable,b.a.getBookingFlowBooking,b.a.getBookingFlowCustomer,Object(f.W)(g.n),b.a.providerMoment,(e,t,a,n,r,o)=>{if(!e)return F.NOT_VISIBLE;if(a)return F.NOT_VISIBLE;if(!t)return F.DISABLED;if(!n)return F.DISABLED;if(r){var i=r.items.sort((e,t)=>t-e)[0];if(r.date.clone().add(i.start,"seconds").isBefore(o()))return F.DISABLED}return n.notificationSetting===y.b.NONE?F.DISABLED:(n.notificationSetting!==y.b.EMAIL||n.email)&&(n.notificationSetting!==y.b.SMS||n.contactNumber)&&(n.notificationSetting!==y.b.BOTH||n.contactNumber||n.email)?F.AVAILABLE:F.DISABLED})}).call(this,a("yLpj"))},AQgK:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("QILm"),l=a.n(s),u=a("lSNA"),m=a.n(u),p=a("VkAN"),d=a.n(p),b=a("q1tI"),h=a.n(b),f=a("/MKj"),y=a("17x9"),g=a.n(y),O=a("nbpM"),v=a("ePPS"),E=a("jwng"),j=a("yk2N"),N=a("478R"),S=a("Jje6"),P=a("7shN"),k=a.n(P);function w(){var e=d()(["Blocked"]);return w=function(){return e},e}function C(){var e=d()(["Deleted"]);return C=function(){return e},e}function T(){var e=d()(["New Client"]);return T=function(){return e},e}var I={new_customer:{badgeType:"info",formatText:()=>Object(v.c)(T())},deleted_customer:{badgeType:"danger",formatText:()=>Object(v.c)(C())},no_show_appointments:{badgeType:"danger",formatText:({count:e})=>Object(v.g)("%{count} No Show","%{count} No Shows",e,{count:e})},unpaid:{badgeType:"warning",formatText:({amount:e},{currencyCode:t})=>Object(v.c)("%{amount} Unpaid",{amount:Object(j.h)(e,{currencyCode:t})})},birthday:{badgeType:"info",formatText:({date:e})=>Object(v.c)("Birthday %{date}",{date:Object(j.d)(Object(E.k)(e),"day_of_year_short")})},blocked_customer:{badgeType:"danger",formatText:()=>Object(v.c)(w())}},A=Object(f.b)(e=>({currencyCode:O.a.getCurrencyCode(e)}),{})((o=r=class extends b.PureComponent{render(){var e=this.props,{customer:t,currencyCode:a}=e,n=l()(e,["customer","currencyCode"]);return h.a.createElement(S.b,c()({qaType:"customer-badges"},n),t.labels.map(e=>{var t=e,n=I[t.label];return null!=n?h.a.createElement(N.b,{key:t.label,className:k.a.badge,type:n.badgeType,qaType:"badge-".concat(t.label)},n.formatText(t,{currencyCode:a})):null}))}},m()(r,"propTypes",{customer:g.a.shape({labels:g.a.array}),currencyCode:g.a.string}),n=o))||n},CODo:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a("VkAN"),r=a.n(n),o=a("lSNA"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("ePPS"),p=a("Jje6"),d=a("6kH+"),b=a("Vows"),h=a("nIiI"),f=a("vMmf"),y=a("SFs4"),g=a("n0Cl"),O=a("WV/M"),v=a("9fVE"),E=a("uVYG"),j=a("pKoe"),N=a("gvXR"),S=a("n3Ec"),P=a.n(S);function k(){var e=r()(["Appointment History"]);return k=function(){return e},e}function w(){var e=r()(["Appointment Details"]);return w=function(){return e},e}class C extends c.PureComponent{render(){var{appointmentSummary:e,openedHistoryMessageId:t,openHistoryMessageModal:a,closeHistoryMessageModal:n}=this.props;return s.a.createElement(p.b,{className:P.a.leftPanel},s.a.createElement(d.b,{className:P.a.marginTop,"data-qa":"mobile-recurrence-info",label:Object(m.c)(w()),sublabel:e.recurrenceInfo&&Object(j.e)(e.recurrenceInfo)}),e.bookings.map(e=>{var{servicePricingLevel:t,serviceDuration:a,employeeName:n,employeeIsRequested:r}=e;return s.a.createElement(b.r,{"data-qa":"appointment-item",topNote:s.a.createElement(h.a,{date:e.startMoment,formatTime:!0}),topNoteTag:e.packageInstance&&N.a[O.a.PACKAGE_ITEM],name:Object(v.d)(e.name,e.packageInstance),description:s.a.createElement(f.a,{description:Object(v.c)(t,a),employeeName:n,employeeIsRequested:r,room:e.room&&e.room.name}),retailPrice:e.price,nonDiscountedPrice:t.price,priceType:e.priceType,key:e.id})}),e.primaryBooking.notes&&s.a.createElement(y.b,{icon:"note",type:y.a.YELLOW,title:e.primaryBooking.notes,selectable:!0}),e.bookingHistory&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.b,{className:P.a.marginTop,label:Object(m.c)(k())}),(e.bookingHistory||[]).map(t=>s.a.createElement(E.a,{key:t.id,appointmentSummary:e,onNotificationClick:a,entry:t})),t&&s.a.createElement(g.a,{id:t,onClose:n})))}}i()(C,"propTypes",{appointmentSummary:u.a.object,openedHistoryMessageId:u.a.string,openHistoryMessageModal:u.a.func,closeHistoryMessageModal:u.a.func})},Cw5A:function(e,t,a){"use strict";var n=a("tnX3");a.d(t,"b",(function(){return n.a}));var r=a("nDSK");a.d(t,"a",(function(){return r.a})),a.d(t,"c",(function(){return r.b}));a("REKf"),a("5XOi")},DMK7:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var n,r,o,i,c,s,l,u,m,p=a("pVnL"),d=a.n(p),b=a("lSNA"),h=a.n(b),f=a("q1tI"),y=a.n(f),g=a("17x9"),O=a.n(g),v=a("Jje6"),E=a("PhEd"),j=a("/MKj"),N=a("jwng"),S=a("+nox"),P=a("nbpM"),k=a("6Jup"),w=a("hbx1"),C=a.n(w),T=Object(j.b)(e=>({isReshedulEnabled:P.a.isReshedulEnabled(e)}))((o=r=class extends f.PureComponent{render(){var{summary:{totalTime:e,totalPrice:t,priceType:a},isReshedulEnabled:n}=this.props;return y.a.createElement(v.b,{className:C.a.self},y.a.createElement(v.b,{className:C.a.leftColumn}),y.a.createElement(v.b,{qaType:"appointment-summary-middle-column",className:C.a.middleColumn},y.a.createElement(S.a,null,Object(N.l)(e,"ms"))),n?y.a.createElement(E.Text,{type:"fresha-h3",color:"gray100",className:C.a.rightColumn},y.a.createElement(k.a,{basePrice:t,priceType:a})):y.a.createElement(v.b,{className:C.a.rightColumn},y.a.createElement(k.a,{type:"fresha-h3",basePrice:t,priceType:a})))}},h()(r,"propTypes",{summary:O.a.object.isRequired,isReshedulEnabled:O.a.bool}),n=o))||n,I=a("9fVE"),A=a("1Ggn"),R=a("ePPS"),M=a("vMmf"),D=a("KvEn"),x=a("QILm"),q=a.n(x),L=a("UB5X"),F=a.n(L),B=a("TSYQ"),V=a.n(B),H=a("sF8u"),U=a("7lZH"),Y=a.n(U),Q=Object(H.a)(Y.a.self)((s=c=class extends f.PureComponent{render(){var e=this.props,{price:t,basePrice:a,priceType:n,isReshedulEnabled:r}=e,o=q()(e,["price","basePrice","priceType","isReshedulEnabled"]),i=((e,t)=>F()(e)&&F()(t)&&e>t)(a,t);return y.a.createElement(v.b,d()({flex:"column",alignItems:"flex-end"},o),r?y.a.createElement(D.a,{className:Y.a.price,price:t,priceType:n,withTopLabel:!0,bold:!0,qaType:"appointment-item-retail-price"}):y.a.createElement(D.a,{className:Y.a.price,price:t,priceType:n,withTopLabel:!0,qaType:"appointment-item-retail-price"}),i&&(r?y.a.createElement(E.Text,{strikethrough:!0,type:"fresha-caption",color:"gray50"},y.a.createElement(D.a,{className:V()(Y.a.price,Y.a.oldPrice),price:a,qaType:"appointment-item-non-discounted-price"})):y.a.createElement(D.a,{className:V()(Y.a.price,Y.a.oldPrice),price:a,qaType:"appointment-item-non-discounted-price"})))}},h()(c,"propTypes",{basePrice:O.a.number.isRequired,price:O.a.number,priceType:O.a.string,isReshedulEnabled:O.a.string}),i=s))||i,_=a("1vP+"),K=a.n(_);function W(e){if(e&&e.discount)return Object(R.c)("discount %{discount} off",{discount:y.a.createElement(D.a,{key:"item-discount",price:e.discount})})}var G=Object(j.b)(e=>({timeFormat24h:P.a.isProviderTimeFormat24h(e),isReshedulEnabled:P.a.isReshedulEnabled(e)}))((m=u=class extends f.PureComponent{render(){var{startMoment:e,name:t,price:a,basePrice:n,priceType:r,employeeIsRequested:o,serviceDuration:i,servicePricingLevel:c,packageInstance:s,employeeName:l,timeFormat24h:u,room:m,isReshedulEnabled:p}=this.props;return y.a.createElement(v.b,{className:K.a.self,qaType:"appointment-item"},p?y.a.createElement(E.Text,{type:"fresha-h4",color:"gray100",className:K.a.startTime,qaType:"appointment-item-start-time"},Object(N.m)(e,u)):y.a.createElement(v.b,{className:K.a.startTime,qaType:"appointment-item-start-time"},Object(N.m)(e,u)),y.a.createElement(v.b,{className:K.a.service},p?y.a.createElement(E.Text,{type:"fresha-h4",color:"gray100",className:K.a.name,qaType:"appointment-item-name"},Object(I.d)(t,s)):y.a.createElement(v.b,{className:K.a.name,qaType:"appointment-item-name"},Object(I.d)(t,s)),p?y.a.createElement(E.Text,{type:"fresha-caption",color:"gray50",className:K.a.description,qaType:"appointment-item-description"},y.a.createElement(M.a,{suffix:W(s),description:Object(I.c)(c,i,s),employeeName:l,employeeIsRequested:o,room:m&&m.name})):y.a.createElement(v.b,{className:K.a.description,qaType:"appointment-item-description"},y.a.createElement(M.a,{suffix:W(s),description:Object(I.c)(c,i,s),employeeName:l,employeeIsRequested:o,room:m&&m.name}))),y.a.createElement(v.b,{className:K.a.price},y.a.createElement(Q,{price:a,basePrice:n,priceType:r,isReshedulEnabled:p})))}},h()(u,"propTypes",{startMoment:O.a.object.isRequired,name:O.a.string.isRequired,price:O.a.oneOfType([O.a.string,O.a.number]).isRequired,basePrice:O.a.oneOfType([O.a.string,O.a.number]).isRequired,priceType:O.a.oneOf(Object.values(A.a)),employeeIsRequested:O.a.bool.isRequired,serviceDuration:O.a.string.isRequired,servicePricingLevel:O.a.object,employeeName:O.a.string.isRequired,timeFormat24h:O.a.bool,room:O.a.object,packageInstance:O.a.object,isReshedulEnabled:O.a.bool}),l=m))||l;class z extends f.PureComponent{render(){var{items:e,summary:t}=this.props;return y.a.createElement(v.b,null,y.a.createElement(v.b,null,e.map(e=>y.a.createElement(G,d()({key:e.id},e)))),e.length>0&&y.a.createElement(T,{summary:t}))}}h()(z,"propTypes",{items:O.a.arrayOf(O.a.object).isRequired,summary:O.a.object.isRequired})},DTlD:function(e,t,a){"use strict";a.d(t,"a",(function(){return W}));var n=a("pVnL"),r=a.n(n),o=a("QILm"),i=a.n(o),c=a("lSNA"),s=a.n(c),l=a("mwIZ"),u=a.n(l),m=a("q1tI"),p=a.n(m),d=a("17x9"),b=a.n(d),h=a("TSYQ"),f=a.n(h),y=a("5ZU+"),g=a("XOuL"),O=a("Jje6"),v=a("ZO1O"),E=a("t2yh"),j=a("VkAN"),N=a.n(j),S=a("/MKj"),P=a("PhEd"),k=a("nbpM"),w=a("TIN1"),C=a("ePPS"),T=a("yk2N"),I=a("Qs7Y"),A=a("YjeW"),R=a.n(A);class M extends m.PureComponent{render(){var e=this.props,{className:t,length:a}=e,n=i()(e,["className","length"]);return p.a.createElement(O.b,r()({as:"span",className:f()(R.a.fill,t)},n)," ".repeat(2*a))}}s()(M,"propTypes",{className:b.a.string,length:b.a.number}),s()(M,"defaultProps",{length:2});var D,x,q,L=a("dhJQ"),F=a("QJNd"),B=a.n(F);function V(){var e=N()(["Total Sales"]);return V=function(){return e},e}function H(){var e=N()(["Total Bookings"]);return H=function(){return e},e}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=Object(L.g)()(D=Object(S.b)((e,t)=>{var a,{customerId:n}=t,r=!1;if(null!=n&&(a=k.a.getCustomerStatistic(e,n),r=Boolean(a))){var{currencyCode:o}=k.a.getProvider(e),i={currencyCode:o},{totalSales:c}=a;a=Y(Y({},a),{},{totalSales:Object(T.h)(c,i)})}return{statistics:a,hasStatistics:r,customerId:n,isReshedulEnabled:k.a.isReshedulEnabled(e)}},{})((q=x=class extends m.PureComponent{constructor(...e){super(...e),s()(this,"renderSummaryText",(e,t)=>{var a,{isReshedulEnabled:n,isMatch:r}=this.props;return r?p.a.createElement(I.d,{as:"span",type:e},t):n?p.a.createElement(P.Text,"section-header"===(a=e)?{type:"fresha-h3",color:"gray100"}:"body-1"===a?{type:"fresha-caption",color:"gray50"}:{},t):t})}render(){var e=this.props,{children:t,className:a,customerId:n,hasStatistics:o,statistics:c,isMatch:s}=e,l=i()(e,["children","className","customerId","hasStatistics","statistics","isMatch"]);return p.a.createElement(O.b,r()({className:f()(B.a.self,a),flex:"row",shrink:0},l),p.a.createElement(O.b,{className:B.a.total},p.a.createElement(O.b,{className:B.a.value,qaType:"bookings-count"},o?this.renderSummaryText("section-header",c.bookingsCount):p.a.createElement(M,{length:6})),this.renderSummaryText("body-1",Object(C.c)(H()))),p.a.createElement(O.b,{className:B.a.total},p.a.createElement(O.b,{className:B.a.value,qaType:"total-sales"},o?this.renderSummaryText("section-header",c.totalSales):p.a.createElement(M,{length:12})),this.renderSummaryText("body-1",Object(C.c)(V()))),t)}},s()(x,"propTypes",{children:b.a.node,className:b.a.string,customerId:b.a.string.isRequired,hasStatistics:b.a.bool,statistics:b.a.shape(w.a.propTypes),isMatch:b.a.bool,isReshedulEnabled:b.a.bool}),D=q))||D)||D,_=a("j7jY"),K=a.n(_);class W extends m.PureComponent{constructor(...e){super(...e),s()(this,"state",{isLoading:!1}),s()(this,"loadData",e=>{this.setState({isLoading:!0}),y.a.readCustomerStatistics(e).finally(()=>{this.setState({isLoading:!1})})})}componentDidMount(){var{customer:{id:e}}=this.props;this.loadData(e)}UNSAFE_componentWillReceiveProps(e){var t=u()(this.props,"customer.id"),a=u()(e,"customer.id");t!==a&&this.loadData(a)}render(){var e=this.props,{children:t,className:a,customer:{id:n}}=e,o=i()(e,["children","className","customer"]),{isLoading:c}=this.state;return p.a.createElement(g.a,r()({className:f()(a,K.a.self,K.a.columnFlex),flex:"column"},o,{if:c,childrenClassName:K.a.columnFlex}),p.a.createElement(Q,{as:v.d,type:"mobile",className:K.a.section,customerId:n}),p.a.createElement(O.b,{className:K.a.tabs,flex:"column",grow:1},p.a.createElement(E.a,{clientId:n})),t)}}s()(W,"propTypes",{children:b.a.node,className:b.a.string,customer:b.a.object})},F2wA:function(e,t,a){"use strict";a.d(t,"a",(function(){return H}));var n,r,o,i=a("VkAN"),c=a.n(i),s=a("lSNA"),l=a.n(s),u=a("q1tI"),m=a.n(u),p=a("17x9"),d=a.n(p),b=a("/MKj"),h=a("PhEd"),f=a("ePPS"),y=a("nbpM"),g=a("ZO1O"),O=a("Jje6"),v=a("tPh7"),E=a("dhJQ"),j=a("3wSE"),N=a("/Q2I"),S=a("kZhr"),P=a("uZ2f"),k=a("etT8"),w=a("MWS2"),C=a.n(w);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(){var e=c()(["Update"]);return A=function(){return e},e}function R(){var e=c()(["Cancel"]);return R=function(){return e},e}function M(){var e=c()(["Update all upcoming appointments"]);return M=function(){return e},e}function D(){var e=c()(["Update this appointment only"]);return D=function(){return e},e}function x(){var e=c()(["Update all upcoming appointments"]);return x=function(){return e},e}function q(){var e=c()(["Update this appointment only"]);return q=function(){return e},e}function L(){var e=c()(["You have edited a repeating appointment. Select which appointments should be updated:"]);return L=function(){return e},e}function F(){var e=c()(["Update appointment"]);return F=function(){return e},e}var B="single",V="future",H=Object(E.i)()(n=Object(S.q)({form:"reschedule",initialValues:{update:B,notify:!0}})(n=Object(b.b)(e=>{var t=y.a.getCalendarDraggingEventCustomer(e),a=y.a.getBookingFlowCustomer(e),n=y.a.isReshedulEnabled(e);return{customerName:t&&t.firstName||a&&a.firstName,reshedulEnabled:n}})((o=r=class extends u.PureComponent{render(){var{errors:e,customerName:t,onCancel:a,submit:n,isMatch:r,reshedulEnabled:o}=this.props,i=e.includes(k.b.UPDATE_TYPE),c=e.includes(k.b.SEND_RESCHEDULE_NOTIFICATION)&&t;return m.a.createElement(N.i,{size:i?void 0:"small"},m.a.createElement(N.g,{onClose:a,noBottomPadding:!0},Object(f.c)(F())),m.a.createElement(N.c,{onlyBottomPadding:!0,className:C.a.self},i&&m.a.createElement(O.b,{className:C.a.topCard},m.a.createElement(v.a,{forceShow:!0},Object(f.c)(L())),m.a.createElement(g.d,{type:"plain popup-form"},o?m.a.createElement(h.ReduxForm.RadioGroup,{direction:"column",name:"update",className:C.a.fieldUpdate},m.a.createElement(h.ReduxForm.RadioGroupItem,{as:h.Form.RadioField,label:Object(f.c)(q()),value:B,layoutVariant:"default",className:C.a.fieldUpdateCurrent}),m.a.createElement(h.ReduxForm.RadioGroupItem,{as:h.Form.RadioField,label:Object(f.c)(x()),value:V,layoutVariant:"default",className:C.a.fieldUpdateUpcoming})):m.a.createElement(m.a.Fragment,null,m.a.createElement(S.B,{name:"update",value:B,basis:"100%",label:Object(f.c)(D())}),m.a.createElement(S.B,{name:"update",value:V,basis:"100%",label:Object(f.c)(M())})))),c&&m.a.createElement(g.d,{type:"plain popup-form",className:C.a.notifyCard},m.a.createElement(P.b,{name:"notify",label:Object(f.c)("Notify %{customerName} about reschedule",{customerName:t}),hint:Object(f.c)("Send a message informing %{customerName} their appointment was rescheduled",{customerName:t})}))),m.a.createElement(N.e,{noPadding:!0},m.a.createElement(j.d,null,!r&&m.a.createElement(j.a,{onAction:a,qaType:"cancel-update-appointment-button"},Object(f.c)(R())),m.a.createElement(j.f,{onAction:n,qaType:"confirm-update-appointment-button"},Object(f.c)(A())))))}},l()(r,"propTypes",I(I({},S.Q),{},{errors:d.a.arrayOf(d.a.string),customerName:d.a.string,isMatch:d.a.bool,reshedulEnabled:d.a.bool})),n=o))||n)||n)||n},ITHA:function(e,t,a){"use strict";a.d(t,"e",(function(){return v})),a.d(t,"c",(function(){return E})),a.d(t,"b",(function(){return M})),a.d(t,"a",(function(){return L})),a.d(t,"d",(function(){return H}));var n=a("QILm"),r=a.n(n),o=a("lSNA"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("TSYQ"),p=a.n(m),d=a("FAYg"),b=a("sF8u"),h=a("OEHH"),f=a.n(h),y=Object(b.a)(f.a.slideChildren),g=a("l22p"),O=a.n(g);class v extends c.PureComponent{render(){var e,t=this.props,{className:a,children:n}=t,o=r()(t,["className","children"]);return!d.DISABLE_QA_TYPE&&o.qaType&&({qaType:e}=o),s.a.createElement("ul",{"data-qa":e,className:p()(O.a.self,a)},n)}}i()(v,"propTypes",{className:u.a.string,qaType:u.a.string,children:u.a.node.isRequired});var E=y(v),j=a("pVnL"),N=a.n(j),S=a("Puqe"),P=a.n(S),k=a("fJus"),w=a("jLFJ"),C=a("Jje6"),T=a("RLZt"),I=a.n(T),A=["isDisabled","isPending","isComplete","onAction"],R=e=>{var{secondaryActionClassName:t,secondaryAction:a,isActive:n,isHover:o,className:i,children:c,color:l}=e,u=r()(e,["secondaryActionClassName","secondaryAction","isActive","isHover","className","children","color"]),m=p()(I.a.self,{[I.a.hover]:o&&!u.disabled,[I.a.active]:n,[I.a.color]:l,[I.a["color-".concat(l)]]:l},i);return s.a.createElement(C.b,N()({as:"li",className:m},P()(u,A)),s.a.createElement("div",{className:I.a.label},c),a&&s.a.createElement("div",{className:p()(I.a.secondaryAction,t)},a))};R.propTypes={secondaryActionClassName:u.a.string,secondaryAction:u.a.node,className:u.a.string,disabled:u.a.bool,isActive:u.a.bool,isHover:u.a.bool,isPending:u.a.bool,isComplete:u.a.bool,onAction:u.a.func,children:u.a.node,color:u.a.oneOf(Object(k.f)(I.a,"color-"))};var M=Object(w.d)(R),D=a("Z5Oz"),x=a.n(D),q=e=>{var{children:t}=e;return s.a.createElement(C.b,{as:"li",className:x.a.self},s.a.createElement(C.b,null,t))};q.propTypes={children:u.a.node};var L=q,F=a("DoZe"),B=a.n(F),V=({children:e})=>s.a.createElement("span",{className:B.a.self},e);V.propTypes={children:u.a.node.isRequired};var H=V},JraT:function(e,t,a){"use strict";var n=a("zg6z");a.d(t,"a",(function(){return n.a}))},LBpe:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("17x9"),m=a.n(u),p=a("PhEd"),d=a("/MKj"),b=a("ZO1O"),h=a("Qs7Y"),f=a("nbpM"),y=a("vhNU"),g=a.n(y),O=Object(d.b)(e=>({isReshedulEnabled:f.a.isReshedulEnabled(e)}))((o=r=class extends s.PureComponent{render(){var{label:e,children:t,className:a,isReshedulEnabled:n}=this.props;return l.a.createElement(b.d,{type:"mobile",className:a,qaType:"appointment-summary"},n?l.a.createElement(p.Text,{type:"fresha-h4",color:"gray100",className:g.a.label},e):l.a.createElement(h.d,{type:"inherit",className:g.a.label},e),t)}},c()(r,"propTypes",{label:m.a.string,children:m.a.node,className:m.a.string,isReshedulEnabled:m.a.bool}),n=o))||n},Lz9V:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("q1tI"),m=a.n(u),p=a("17x9"),d=a.n(p),b=a("ePPS"),h=a("3wSE"),f=a("/Q2I"),y=a("dhJQ"),g=a("Qs7Y");function O(){var e=l()(["Continue"]);return O=function(){return e},e}function v(){var e=l()(["Cancel"]);return v=function(){return e},e}function E(){var e=l()(["Split Package Services"]);return E=function(){return e},e}function j(){var e=l()(["Are you sure you want to change this service? The remaining services will be booked individually, instead of as a package."]);return j=function(){return e},e}var N=Object(b.c)(j()),S=Object(y.g)()((o=r=class extends u.PureComponent{render(){var{isMatch:e,onConfirm:t,onClose:a}=this.props;return m.a.createElement(f.i,{size:"small"},m.a.createElement(f.g,{qaType:"header-split-package-services",onClose:a,subheader:e&&N,noBottomPadding:!0},Object(b.c)(E())),m.a.createElement(f.c,{qaType:"content-split-package-services",onlyBottomPadding:e},!e&&m.a.createElement(g.d,null,N)),m.a.createElement(f.e,{noPadding:!0},m.a.createElement(f.b,null,m.a.createElement(h.a,{qaType:"cancel-split-package-services",onAction:a},Object(b.c)(v())),m.a.createElement(h.f,{qaType:"confirm-split-package-services",onAction:t},Object(b.c)(O())))))}},c()(r,"propTypes",{isMatch:d.a.bool,onConfirm:d.a.func,onClose:d.a.func}),n=o))||n},M3Ki:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return he}));var n,r,o,i=a("9oTK"),c=a("VkAN"),s=a.n(c),l=a("lSNA"),u=a.n(l),m=a("mwIZ"),p=a.n(m),d=a("q1tI"),b=a.n(d),h=a("17x9"),f=a.n(h),y=a("/MKj"),g=a("PhEd"),O=a("ePPS"),v=a("3Fcl"),E=a("5ZU+"),j=a("nbpM"),N=a("XOD0"),S=a("KgkK"),P=a("WV/M"),k=a("ivFB"),w=a("gY1J"),C=a("QM9d"),T=a("X67z"),I=a("/pl8"),A=a("Jje6"),R=a("aAma"),M=a("dhJQ"),D=a("3wSE"),x=a("Cw5A"),q=a("jXSx"),L=a("9AV2"),F=a("kZhr"),B=a("UtX9"),V=a("etT8"),H=a("SBfo"),U=a("bOWi"),Y=a("F2wA"),Q=a("/vDv"),_=a("pKoe"),K=a("k2UN"),W=a("Pl0e"),G=a("c0W2"),z=a("622n"),J=a.n(z);function Z(){var e=s()(["New Appointment"]);return Z=function(){return e},e}function X(){var e=s()(["Edit Appointment"]);return X=function(){return e},e}function $(){var e=s()(["Remove from appointment"]);return $=function(){return e},e}function ee(){var e=s()(["New Appointment"]);return ee=function(){return e},e}function te(){var e=s()(["Edit Appointment"]);return te=function(){return e},e}function ae(){var e=s()(["Save appointment"]);return ae=function(){return e},e}function ne(){var e=s()(["Save"]);return ne=function(){return e},e}function re(){var e=s()(["Save appointment"]);return re=function(){return e},e}function oe(){var e=s()(["Save"]);return oe=function(){return e},e}function ie(){var e=s()(["Express checkout"]);return ie=function(){return e},e}function ce(){var e=s()(["Checkout"]);return ce=function(){return e},e}function se(){var e=s()(["Express checkout"]);return se=function(){return e},e}function le(){var e=s()(["Checkout"]);return le=function(){return e},e}function ue(){var e=s()(["Appointment"]);return ue=function(){return e},e}function me(){var e=s()(["Appointment"]);return me=function(){return e},e}function pe(){var e=s()(["Card confirmation has been requested for appointment, the client cannot be removed"]);return pe=function(){return e},e}function de(){var e=s()(["This appointment has a star rating, the client cannot be removed"]);return de=function(){return e},e}function be(){var e=s()(["Client cannot be removed from an online booking"]);return be=function(){return e},e}var he=Object(M.f)("isSmallMobile")(n=Object(M.g)()(n=Object(y.b)((e,t)=>{var a=p()(t,"match.params.id"),n=a&&j.a.getBooking(e,a),r=Object(W.e)(t);return a&&!r&&(r=n&&n.location),{locationId:r,employeeId:Object(W.d)(t),roomId:Object(W.g)(t),startDate:Object(W.h)(t),startTime:Object(W.i)(t),clientId:Object(W.c)(t),bookingId:a,booking:n,reviewed:a&&j.a.getBookingIsReviewed(e,a),customer:j.a.getBookingFlowCustomer(e),flowState:j.a.getBookingFlowState(e),hasSales:j.a.getBookingFlowBookingHasSales(e),submitting:Object(H.v)(e),succeeded:Object(H.w)(e),isValid:Object(H.s)(e),isReshedulEnabled:j.a.isReshedulEnabled(e)}},{submitForm:H.u,resetForm:H.t,destroyForm:H.p,resetSearch:x.c,createBooking:K.d,updateBooking:K.l,readBookingWarnings:K.j,addInitialBookingFlowBooking:K.a})((o=r=class extends d.PureComponent{constructor(e){super(e),u()(this,"setCustomer",e=>{var{booking:{isOnline:t,marketplaceAppointmentConfirmation:a}={},reviewed:n}=this.props;t?E.a.addErrorToast(Object(O.c)(be())):n?E.a.addErrorToast(Object(O.c)(de())):a?E.a.addErrorToast(Object(O.c)(pe())):(E.a.setBookingFlowCustomer(e),this.closeClientSearch())}),u()(this,"isExpressCheckout",!1),u()(this,"handleFormSubmit",({date:e,notes:t,items:a,repeats:n,marketplaceAppointmentConfirmationRequested:r})=>{var o=Object(_.b)(n);E.a.updateBookingFlow({notes:t,date:e&&e.format("YYYY-MM-DD"),sequence:o,items:a,marketplaceAppointmentConfirmationRequested:r});var i=this.props.flowState===S.a.NEW;return(i?this.props.createBooking:this.props.updateBooking)().then(e=>{this.isExpressCheckout?Object(N.f)(Object(G.s)(e,this.props.locationId)):(i?E.a.addCreatedToast(Object(O.c)(me())):E.a.addUpdatedToast(Object(O.c)(ue())),this.handleExit(e))}).catch(e=>{var{errors:t,type:a,rawErrors:n}=Object(V.c)(e);if(n.some(e=>"package-version-not-current"===e.code)&&(Object(K.e)(),this.clearPackagesItemsOnUnmountFlag=!0),!i&&a===V.a.RESHEDULE)return this.setState({errors:t}),void Object(F.ib)({});Object(F.ib)(e,{fields:[{jsonPointer:/\/duration$/,field:"duration"},{jsonPointer:/\/service-pricing-level$/,field:"servicePricingLevel"}]})})}),u()(this,"formWarningsPromise",null),u()(this,"handleFormWarnings",Object(v.a)(e=>{var{isValid:t}=this.props;e&&e[H.k]&&t&&(this.formWarningsPromise&&this.formWarningsPromise.cancel(),this.formWarningsPromise=this.props.readBookingWarnings(e).finally(()=>{this.formWarningsPromise=null}))},{interval:300,debounce:!0})),u()(this,"handleCustomerPickerActive",e=>{this.props.resetSearch(),this.setState({customerPickerActive:e})}),u()(this,"deactivateCustomerPicker",()=>{this.handleCustomerPickerActive(!1)}),u()(this,"closeClientSearch",()=>{this.props.resetSearch()}),u()(this,"handleKeypress",e=>{this.state.customerPickerActive||e.keyCode!==C.a.ENTER||"TEXTAREA"===e.target.tagName||null!==document.querySelector(".".concat(q.a,", #newCustomer, #editCustomer"))||this.submitClassic()}),u()(this,"handleExit",()=>{Object(N.b)("/")}),u()(this,"clearErrors",e=>{this.setState({errors:[]},e)}),u()(this,"confirmReschedule",({update:e,notify:t})=>{E.a.updateBookingFlow({skipRescheduleNotification:!t,updateType:e}),this.clearErrors(this.props.submitForm)}),u()(this,"submitExpressCheckout",()=>{this.submitWrapper(!0)}),u()(this,"submitClassic",()=>{this.submitWrapper(!1)}),this.state={isLoaded:!1,errors:[],customerPickerActive:!1}}componentDidMount(){if(Object(K.f)()){var{locationId:t,employeeId:a,roomId:n,startDate:r,startTime:o,bookingId:c,clientId:s}=this.props,l=!!n;t&&r&&o||c?(Object(i.resolve)().then(()=>c?E.a.readBooking(c).then(e=>{var t=p()(e,"body.data.relationships.parent.data.id"),a=p()(e,"body.data.relationships.location.data.id");return E.a.bulk([E.a.readLocationList,E.a.readRoomList,[E.a.readOfferCatalog,{locationId:a}],[E.a.readEmployeeList,{locationId:a}],t&&[E.a.readBooking,t]]).then(()=>{E.a.updateBookingFlowFromBooking(t||c),this.props.resetForm()})}):E.a.bulk([[E.a.readOfferCatalog,{locationId:t}],E.a.readRoomList,E.a.readLocationList,[E.a.readEmployeeList,{locationId:t}],s&&[E.a.readCustomer,s],E.a.readNoShowSettings]).then(()=>(E.a.updateBookingFlow({date:r,location:t,customer:s,isRoomInherited:l}),this.props.addInitialBookingFlowBooking({employee:a,room:n,start:o}),Object(i.resolve)()))).then(()=>{this.setState({isLoaded:!0}),this.handleFormWarnings(null)}).catch(()=>{this.setState({isLoaded:!0,isError:!0})}),e.addEventListener("keypress",this.handleKeypress)):Object(N.b)("/")}else this.setState({isLoaded:!0})}componentWillUnmount(){this.clearPackagesItemsOnUnmountFlag&&E.a.deletePackageItemsAndVersions(),E.a.clearBookingFlowHints(),e.removeEventListener("keypress",this.handleKeypress),this.props.destroyForm()}submitWrapper(e){var{submitForm:t}=this.props;this.isExpressCheckout=e,t()}renderFooterButtons(){var{hasSales:e,isSmallMobile:t,submitting:a,succeeded:n,isValid:r,isReshedulEnabled:o}=this.props;return b.a.createElement(A.b,null,b.a.createElement(Q.a,null),b.a.createElement(A.b,{flex:"row"},!e&&b.a.createElement(I.b,{keys:T.a.CAN_CHECKOUT_SALES},e=>o?b.a.createElement(g.Button,{variant:"secondary",isPending:a&&this.isExpressCheckout,disabledPending:!0,disabledComplete:!0,disabled:!r,onAction:Object(I.c)(e,this.submitExpressCheckout),qaType:"express-checkout-button",className:J.a.checkoutButton},t?Object(O.c)(le()):Object(O.c)(se())):b.a.createElement(D.a,{basis:"50%",grow:1,marginRight:16,isPending:a&&this.isExpressCheckout,disabledPending:!0,disabledComplete:!0,disabled:!r,onAction:Object(I.c)(e,this.submitExpressCheckout),qaType:"express-checkout-button"},t?Object(O.c)(ce()):Object(O.c)(ie()))),o?b.a.createElement(g.Button,{variant:"primary",isPending:a&&!this.isExpressCheckout,isComplete:n&&!this.isExpressCheckout,disabledPending:!0,disabledComplete:!0,onAction:this.submitClassic,qaType:"save-appointment-button",className:J.a.button},t?Object(O.c)(oe()):Object(O.c)(re())):b.a.createElement(D.f,{basis:"50%",grow:1,isPending:a&&!this.isExpressCheckout,isComplete:n&&!this.isExpressCheckout,disabledPending:!0,disabledComplete:!0,onAction:this.submitClassic,qaType:"save-appointment-button"},t?Object(O.c)(ne()):Object(O.c)(ae()))))}render(){var{className:e,customer:t,bookingId:a,isMatch:n}=this.props,{isLoaded:r,isError:o,errors:i,customerPickerActive:c}=this.state;if(!r||o)return b.a.createElement(B.a,{header:a?Object(O.c)(te()):Object(O.c)(ee()),headerSecondaryAction:this.handleExit,type:"white",error:o});var s=r&&b.a.createElement(U.a,{onSubmit:this.handleFormSubmit,onChange:this.handleFormWarnings,isEdit:!!a}),l=null!=t&&t.id!==w.d,u=b.a.createElement(L.b,null,this.renderFooterButtons()),m=b.a.createElement(x.b,{customer:t,onSetCustomer:this.setCustomer,canResetCustomer:!0,removeCustomerText:Object(O.c)($()),grow:1,displayEmptyPlaceholder:!0,onSetActive:n?void 0:this.handleCustomerPickerActive,isActive:n?void 0:c||l,forceInfo:!n},n?s:b.a.createElement(A.b,{grow:1}),!n&&!l&&u);return b.a.createElement(A.b,null,b.a.createElement(L.c,{className:e,type:"white",header:a?Object(O.c)(X()):Object(O.c)(Z()),footer:n&&this.renderFooterButtons(),panel:!n&&b.a.createElement(A.b,{flex:"column"},m,l&&u),overlayAction:!n&&c?this.deactivateCustomerPicker:void 0,headerOnAction:this.handleExit},b.a.createElement(R.b,{type:"form",noPadding:n},n?m:s,i.length>0&&b.a.createElement(Y.a,{errors:i,onSubmit:this.confirmReschedule,onCancel:this.clearErrors}))))}},u()(r,"propTypes",{className:f.a.string,locationId:f.a.string,employeeId:f.a.string,roomId:f.a.string,startDate:f.a.string,startTime:f.a.string,bookingId:f.a.string,booking:f.a.shape(P.b.propTypes),clientId:f.a.string,isMatch:f.a.bool,isSmallMobile:f.a.bool,submitForm:f.a.func.isRequired,resetForm:f.a.func.isRequired,destroyForm:f.a.func.isRequired,submitting:f.a.bool.isRequired,succeeded:f.a.bool.isRequired,customer:f.a.shape(k.a.propTypes),flowState:f.a.string,hasSales:f.a.bool,reviewed:f.a.bool,resetSearch:f.a.func.isRequired,createBooking:f.a.func.isRequired,updateBooking:f.a.func.isRequired,readBookingWarnings:f.a.func.isRequired,isValid:f.a.bool,addInitialBookingFlowBooking:f.a.func.isRequired,isReshedulEnabled:f.a.bool}),n=o))||n)||n)||n}).call(this,a("yLpj"))},NgSR:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("17x9"),r=a("9df5"),o=Object(n.shape)({label:n.string.isRequired,date:n.string,count:n.number,amount:n.number}),i=Object(n.shape)({id:n.string.isRequired,name:n.string,contactNumber:n.string,displayNote:n.bool,labels:Object(n.arrayOf)(o),note:n.string,email:n.string,avatar:Object(n.shape)(r.a)})},Pl0e:function(e,t,a){"use strict";a.d(t,"e",(function(){return O})),a.d(t,"d",(function(){return v})),a.d(t,"g",(function(){return E})),a.d(t,"h",(function(){return j})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return S})),a.d(t,"m",(function(){return P})),a.d(t,"l",(function(){return k})),a.d(t,"j",(function(){return w})),a.d(t,"a",(function(){return C})),a.d(t,"k",(function(){return T})),a.d(t,"b",(function(){return A})),a.d(t,"f",(function(){return R}));var n=a("lSNA"),r=a.n(n),o=a("xweI"),i=a.n(o),c=a("mwIZ"),s=a.n(c),l=a("G4qV"),u=a("wd/R"),m=a("3WHN"),p=a("1Ggn"),d=a("nbpM"),b=a("gY1J"),h=a("ZIP/"),f=a("SBfo");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=Object(l.a)(m.c,e=>e.query.locationId),v=Object(l.a)(m.c,e=>e.query.employeeId),E=Object(l.a)(m.c,e=>e.query.roomId),j=Object(l.a)(m.c,e=>e.query.startDate),N=Object(l.a)(m.c,e=>e.query.startTime),S=Object(l.a)(m.c,e=>e.query.clientId),P=Object(l.a)(d.a.getAppointmentSummary,e=>Object(u.now)()>=e.cancelDeadline),k=Object(l.a)(d.a.getAppointmentSummary,e=>Object(u.now)()<=e.cancelFeeStartDate),w=Object(l.a)(d.a.getAppointmentSummary,d.a.isFreshaPayEnabled,(e,t)=>{if(!e)return!1;var{policy:{noShowFeeRate:a},saleId:n}=e,r=Object(u.now)()>=e.chargeableNoShowDeadline;return!!a&&!r&&!n&&t}),C=Object(l.a)(d.a.getAppointmentSummary,d.a.getNotificationDeliverySettings,d.a.getClientNotificationSendForBookingsMap,(e,t,a)=>{var n=s()(t,"sendForBookings"),r=a[h.d.NO_SHOW];return n&&r&&!!e&&!!e.customer&&e.customer.id!==b.d}),T=Object(l.a)(C,w,(e,t)=>t||e),I=[],A=Object(l.a)(d.a.getBookingListDict,e=>Object(f.r)(e,f.i)||I,(e,t)=>{var a=t.reduce((t,a)=>{var n=e[a.bookingId];return n&&a.bookedItem&&n.servicePricingLevel===a.bookedItem.splId?t.price+=n.price:t.price+=a.bookedItem.price||0,t.servicesCount+=a.bookedItem&&a.bookedItem.splId?1:0,t.duration+=a.duration||0,t},{duration:0,price:0,servicesCount:0});return a.priceType=Object(p.g)(t.map(e=>e.bookedItem)),a}),R=Object(l.a)((e,t,a)=>d.a.getBooking(e,a),(e,t)=>d.a.getLocationServicesIdList(e,t),e=>d.a.getOfferCatalogItemList(e),(e,t,a)=>{var n=a.reduce((a,n)=>{var{servicePricingLevel:r,category:o}=n;if(o.deletedAt)return a;if((r?[r.service.id]:n.package.items.map(e=>e.serviceId)).some(e=>!t.has(e)))return a;var i=a.find(e=>e.id===o.id);return r&&e&&e.servicePricingLevel===r.id&&(n=g(g({},n),{},{servicePricingLevel:g(g({},n.servicePricingLevel),{},{price:e.basePrice,specialPrice:e.price})})),i?i.items.push(n):a.push({id:o.id,attributes:g({},o),items:[n]}),a},[]);return i()(n.map(e=>(e.items=i()(e.items,["sortingId","retailPrice"]),e)),["attributes.sortingId"])})},REKf:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return l}));var n=a("mwIZ"),r=a.n(n),o=a("kZhr"),i="checkout-customer-search",c="searchString",s=Object(o.W)(i),l=e=>r()(s(e),c)||""},SBfo:function(e,t,a){"use strict";a.d(t,"n",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"l",(function(){return l})),a.d(t,"k",(function(){return u})),a.d(t,"m",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"j",(function(){return d})),a.d(t,"o",(function(){return b})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return y})),a.d(t,"i",(function(){return g})),a.d(t,"r",(function(){return O})),a.d(t,"q",(function(){return v})),a.d(t,"v",(function(){return E})),a.d(t,"w",(function(){return j})),a.d(t,"u",(function(){return N})),a.d(t,"t",(function(){return S})),a.d(t,"p",(function(){return P})),a.d(t,"s",(function(){return k}));var n=a("kZhr"),r="appointment-form",o="date",i="bookedItem",c="employee",s="employeeIsRequested",l="room",u="repeats",m="start",p="duration",d="notes",b="marketplaceAppointmentConfirmationRequested",h="extraTime",f="extraTimeDescription",y="extraTimeLabel",g="items",O=Object(n.R)(r),v=Object(n.U)(r),E=Object(n.bb)(r),j=Object(n.Y)(r),N=()=>Object(n.hb)(r),S=()=>Object(n.gb)(r),P=()=>Object(n.N)(r),k=Object(n.cb)(r)},SOSd:function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var n=a("VkAN"),r=a.n(n),o=a("lSNA"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("TSYQ"),p=a.n(m),d=a("sQHA"),b=a("XOD0"),h=a("ePPS"),f=a("i6OX"),y=a("Jje6"),g=a("Qs7Y"),O=a("SFs4"),v=a("3wSE"),E=a("5KxP"),j=a("q7JJ"),N=a("8pZm"),S=a.n(N);function P(){var e=r()(["Appointment completed"]);return P=function(){return e},e}function k(){var e=r()(["No Show"]);return k=function(){return e},e}function w(){var e=r()(["Appointment set to No Show"]);return w=function(){return e},e}function C(){var e=r()(["Cancelled"]);return C=function(){return e},e}function T(){var e=r()([" Appointment cancelled"]);return T=function(){return e},e}class I extends c.PureComponent{constructor(...e){super(...e),i()(this,"handleNavigateToSale",()=>{var{booking:{sale:{id:e}={}}}=this.props;Object(b.c)(E.h(e))})}render(){var e,{className:t,booking:{status:a,sale:n},isPending:r,onChangeStatus:o,onViewInvoice:i,mobile:l}=this.props;switch(a){case d.v.UNCONFIRMED:case d.v.CONFIRMED:case d.v.ARRIVED:case d.v.STARTED:e=s.a.createElement(j.b,{grow:l?1:void 0,status:a,onChange:o,isPending:r});break;case d.v.CANCELLED:e=l?s.a.createElement(O.b,{icon:"noshow_ico",noPadding:!0,title:Object(h.c)(T())}):s.a.createElement(c.Fragment,null,s.a.createElement(f.b,{name:"close-circle",color:"red",size:"larger"}),s.a.createElement("span",{className:S.a.statusText},Object(h.c)(C())));break;case d.v.NO_SHOW:e=l?s.a.createElement(O.b,{icon:"noshow_ico",noPadding:!0,title:Object(h.c)(w())}):s.a.createElement(c.Fragment,null,s.a.createElement(f.b,{name:"close-circle",color:"red",size:"larger"}),s.a.createElement("span",{className:S.a.statusText},Object(h.c)(k())));break;case d.v.COMPLETED:e=l?s.a.createElement(O.b,{icon:"completed_ico",noPadding:!0,title:Object(h.c)(P())}):s.a.createElement(c.Fragment,null,s.a.createElement(f.b,{name:"checkmark",color:"green",size:"larger"}),s.a.createElement(y.b,{flex:"column"},s.a.createElement(g.d,{className:S.a.statusText,type:"group-title",weight:g.c.REGULAR},"Completed"),n&&s.a.createElement(v.n,{type:"inherit",className:S.a.statusInvoice,onAction:i||this.handleNavigateToSale},Object(h.c)("Invoice %{receiptNumber}",{receiptNumber:n.receiptNumber}))));break;default:e=l?s.a.createElement(O.b,{icon:"light-bulb-red",noPadding:!0,title:Object(h.c)("Unsupported status %{status}",{status:a})}):s.a.createElement(c.Fragment,null,s.a.createElement(f.b,{name:"error-outline",color:"red",size:"larger"}),s.a.createElement("span",{className:S.a.statusText},Object(h.c)("Unsupported status %{status}",{status:a})))}return s.a.createElement(y.b,{className:p()(S.a.self,t),flex:"row",alignItems:"center",justifyContent:"center",qaType:"booking-status"},e)}}i()(I,"propTypes",{className:u.a.string,booking:u.a.shape({sale:u.a.shape({id:u.a.string.isRequired,receiptNumber:u.a.string}),status:u.a.string}).isRequired,isPending:u.a.bool,onChangeStatus:u.a.func.isRequired,mobile:u.a.bool,onViewInvoice:u.a.func})},UtX9:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("QILm"),m=a.n(u),p=a("lSNA"),d=a.n(p),b=a("q1tI"),h=a.n(b),f=a("17x9"),y=a.n(f),g=a("TSYQ"),O=a.n(g),v=a("ePPS"),E=a("XOD0"),j=a("gwpz"),N=a("uopA"),S=a("MoLQ"),P=a("Jje6"),k=a("3wSE"),w=a("dhJQ"),C=a("mqQb"),T=a.n(C);function I(){var e=l()(["Close"]);return I=function(){return e},e}function A(){var e=l()(["Your request couldn’t be processed at this point. Please try again later or contact our support."]);return A=function(){return e},e}function R(){var e=l()(["Unable to load Data"]);return R=function(){return e},e}var M=Object(w.g)()((o=r=class extends b.PureComponent{render(){var e=this.props,{headerSecondaryAction:t,className:a,header:n,error:r,onClose:o,isMatch:i}=e,s=m()(e,["headerSecondaryAction","className","header","error","onClose","isMatch"]);return h.a.createElement(S.a,c()({header:i?"":n,headerOnAction:t,className:O()(T.a.self,a)},s),h.a.createElement(P.b,{flex:"row",grow:1,alignItems:"center",alignContent:"center",className:T.a.contentWrapper},r?h.a.createElement(N.a,{icon:"window-close",name:Object(v.c)(R()),text:Object(v.c)(A())},h.a.createElement(k.d,null,h.a.createElement(k.f,{onAction:o},Object(v.c)(I())))):h.a.createElement(j.a,{className:T.a.spinner})))}},d()(r,"propTypes",{className:y.a.string,header:y.a.node,headerSecondaryAction:y.a.func,error:y.a.bool,onClose:y.a.func,isMatch:y.a.bool}),d()(r,"defaultProps",{onClose:function(){Object(E.b)("/")}}),n=o))||n},Xhf8:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a("9oTK"),r=a("5ZU+"),o=a("nbpM"),i=a("XOD0"),c=a("dsWg"),s=a("REKf");var l=function(e,{lifeTimeInSec:t}){var a={},r=({query:r,offset:o,limit:i,ignoredCustomerIds:c})=>{var s="".concat(o,":").concat(i,":").concat(r,":").concat(c);return a[s]&&a[s].timestamp+1e3*t>=Date.now()?Object(n.resolve)(a[s].data):(delete a[s],e({query:r,offset:o,limit:i,ignoredCustomerIds:c}).then(e=>{var t=Date.now();return a[s]={timestamp:t,data:e.body.data.map(e=>e.id)},Object(n.resolve)(a[s].data)}))};return r.reset=()=>{a={}},r}(r.a.searchCustomerList,{lifeTimeInSec:5});function u({query:e,offset:t,limit:a,ignoredCustomerIds:r}){return(i,c)=>l({query:e,offset:t,limit:a,ignoredCustomerIds:r}).then(e=>{var t=c(),a=o.a.getCustomerSearchResultList(t);return Object(n.resolve)(a.filter(t=>e.includes(t.id)))})}function m(){return(e,t)=>{var a=t(),n=Object(s.c)(a),r=encodeURIComponent(n);Object(i.c)("".concat(c.a,"?data=").concat(r))}}},Xif8:function(e,t,a){"use strict";a.d(t,"a",(function(){return ee}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("q1tI"),m=a.n(u),p=a("17x9"),d=a.n(p),b=a("/MKj"),h=a("5ZU+"),f=a("nbpM"),y=a("XOD0"),g=a("ePPS"),O=a("Jje6"),v=a("KvEn"),E=a("dhJQ"),j=a("3wSE"),N=a("/Q2I"),S=a("sQHA"),P=a("Pl0e"),k=a("k2UN"),w=a("+Gzo"),C=a("Xnit"),T=a("c0W2"),I=a("kZhr"),A=a("uZ2f");function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(){var e=l()(["Notify client about no-show"]);return D=function(){return e},e}function x(){var e=l()(["Send a message informing the client they did not show for their appointment"]);return x=function(){return e},e}function q(){var e=l()(["Clients are always notified when charged a no-show fee"]);return q=function(){return e},e}function L(e,t){return t?Object(g.c)(q()):e?Object(g.c)("Send a message informing %{customerName} they did not show for their appointment",{customerName:e}):Object(g.c)(x())}var F,B,V,H=Object(I.q)({form:"appointment-confirm-no-show",enableReinitialize:!0})((o=r=class extends u.PureComponent{render(){var{isNoShowFeeApplicable:e,customerName:t}=this.props;return m.a.createElement(A.b,{name:"sendNoShowNotification",label:t?Object(g.c)("Notify %{customerName} about no-show",{customerName:t}):Object(g.c)(D()),hint:L(t,e)})}},c()(r,"propTypes",M(M({},I.Q),{},{customerName:d.a.string,isNoShowFeeApplicable:d.a.bool})),n=o))||n,U=a("oL3f"),Y=a.n(U);function Q(){var e=l()(["Charge"]);return Q=function(){return e},e}function _(){var e=l()(["Continue without charge"]);return _=function(){return e},e}function K(){var e=l()(["No charge"]);return K=function(){return e},e}function W(){var e=l()(["Set as No-Show"]);return W=function(){return e},e}function G(){var e=l()(["Did Not Show"]);return G=function(){return e},e}function z(){var e=l()(["Appointment set to No Show failed"]);return z=function(){return e},e}function J(){var e=l()(["Appointment set to No Show"]);return J=function(){return e},e}var Z=[Object(g.c)(J())],X=[Object(g.c)(z())],$={sendNoShowNotification:!0},ee=Object(E.g)()(F=Object(b.b)(e=>({appointmentSummary:f.a.getAppointmentSummary(e),isClientNotificationNoShowApplicable:P.a(e),isNoShowFeeApplicable:P.j(e)}),{submitForm:function(){return Object(I.hb)("appointment-confirm-no-show")}})((V=B=class extends u.PureComponent{constructor(...e){super(...e),c()(this,"formValues",{}),c()(this,"handleSubmit",e=>{this.formValues=e}),c()(this,"handleAccept",()=>{this.props.submitForm();var e=this.formValues;return k.c(this.props.appointmentSummary.primaryBooking.id,S.v.NO_SHOW,e).then(()=>{Object(y.b)(w.z),h.a.addGlobalSuccessToast(Z)}).catch(()=>{h.a.addGlobalErrorToast(X)})}),c()(this,"handleAcceptFee",()=>{var{appointmentSummary:{primaryBooking:{id:e,location:t}}}=this.props;Object(y.f)(T.v(e,t))}),c()(this,"handleCancel",()=>{Object(y.f)(y.a.location.pathname.replace("/confirm-no-show",""))})}render(){var{appointmentSummary:e,isClientNotificationNoShowApplicable:t,isNoShowFeeApplicable:a,isMatch:n}=this.props;if(!e)return null;var{appointmentSummary:{fees:{noShowFeeGross:r},customer:o}}=this.props,i=o&&o.firstName,c=a&&m.a.createElement(O.b,{className:Y.a.description},m.a.createElement(C.a,{appointmentSummary:e,noShowOnly:!0}));return m.a.createElement(N.i,{size:"small",qaType:"policy-modal-noshow"},m.a.createElement(N.g,{secondaryAction:m.a.createElement(j.e,{onAction:this.handleCancel}),subheader:n&&c,qaType:"modal-header-noshow"},Object(g.c)(G())),m.a.createElement(N.c,{className:Y.a.self,onlyBottomPadding:!0},!n&&c,t&&m.a.createElement(O.b,{className:Y.a.form},m.a.createElement(H,{customerName:i,isNoShowFeeApplicable:a,initialValues:$,onSubmit:this.handleSubmit}))),m.a.createElement(N.e,{modalWindow:!0,embeddedToaster:!1,marginTop:35,noPadding:!0},m.a.createElement(N.b,null,!a&&m.a.createElement(j.f,{onAction:this.handleAccept,"data-qa":"set-as-no-show-button"},Object(g.c)(W())),a&&m.a.createElement(j.a,{onAction:this.handleAccept,withPending:!0,grow:1,basis:"100%"},n?Object(g.c)(K()):Object(g.c)(_())),a&&m.a.createElement(j.f,{qaType:"modal-charge-button",onAction:this.handleAcceptFee,withPending:!0,grow:1,basis:"100%"},m.a.createElement(O.b,null,Object(g.c)(Q())," ",m.a.createElement(v.a,{price:r}))))))}},c()(B,"propTypes",{isMatch:d.a.bool,appointmentSummary:d.a.shape({fees:d.a.shape({noShowFeeGross:d.a.number}),customer:d.a.shape({firstName:d.a.string}),primaryBooking:d.a.shape({id:d.a.string.isRequired,location:d.a.object}).isRequired}),isClientNotificationNoShowApplicable:d.a.bool,isNoShowFeeApplicable:d.a.bool,submitForm:d.a.func.isRequired}),F=V))||F)||F},Xnit:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("/MKj"),m=a("17x9"),p=a.n(m),d=a("nbpM"),b=a("XOD0"),h=a("dhJQ"),f=a("Qs7Y"),y=a("ePPS"),g=a("yZTH"),O=a("gY1J"),v=a("c0W2"),E=a("pKoe"),j=Object(h.g)()(n=Object(u.b)(e=>({appointmentSummary:d.a.getAppointmentSummary(e)}))((o=r=class extends s.PureComponent{constructor(...e){super(...e),c()(this,"handleClose",()=>{var{appointmentId:e}=this.props.appointmentSummary;Object(b.b)(v.l(e))})}render(){var e,{appointmentSummary:{policy:t,provider:a,primaryBooking:n,customer:r},noShowOnly:o,cancellationOnly:i}=this.props,c={clientName:r.firstName,date:Object(E.f)({primaryBooking:n,provider:a}),policyName:Object(E.g)(t.variant,t.advanceTimeInMinutes).toLowerCase(),cancelRate:t.cancellationFeeRate,advanceTimeFormatted:Object(g.a)(t.advanceTimeInMinutes),noShowRate:t.noShowFeeRate};return r.gender===O.b.MALE?e=o?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking his appointment online on %{date}. <br> You may charge him <strong>%{noShowRate}% fee</strong> for not showing up.",c):i?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking his appointment online on %{date}. <br> You may charge him <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of the appointment time.",c):t.cancellationFeeRate?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking his appointment online on %{date}. <br> You may charge him <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of his appointment time, or <strong>%{noShowRate}% fee</strong> for not showing up.",c):Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking his appointment online on %{date}. <br> You may charge him <strong>%{noShowRate}% fee</strong> for not showing up.",c):r.gender===O.b.FEMALE?e=o?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking her appointment online on %{date}. <br> You may charge her <strong>%{noShowRate}% fee</strong> for not showing up.",c):i?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking her appointment online on %{date}. <br> You may charge her <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of the appointment time.",c):t.cancellationFeeRate?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking her appointment online on %{date}. <br> You may charge her <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of her appointment time, or <strong>%{noShowRate}% fee</strong> for not showing up.",c):Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking her appointment online on %{date}. <br> You may charge her <strong>%{noShowRate}% fee</strong> for not showing up.",c):r.gender||(e=o?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking their appointment online on %{date}. <br> You may charge them <strong>%{noShowRate}% fee</strong> for not showing up.",c):i?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking their appointment online on %{date}. <br> You may charge them <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of the appointment time.",c):t.cancellationFeeRate?Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking their appointment online on %{date}. <br> You may charge them <strong>%{cancelRate}% fee</strong> for late cancellation within <strong>%{advanceTimeFormatted}</strong> of their appointment time, or <strong>%{noShowRate}% fee</strong> for not showing up.",c):Object(y.f)("%{clientName} agreed to your <strong>%{policyName}</strong> when booking their appointment online on %{date}. <br> You may charge them <strong>%{noShowRate}% fee</strong> for not showing up.",c)),l.a.createElement(f.d,{multiline:!0,type:"body-1",qaType:"cancellation-policy-text"},e)}},c()(r,"propTypes",{appointmentSummary:p.a.object,noShowOnly:p.a.bool,cancellationOnly:p.a.bool}),n=o))||n)||n},am0B:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n,r,o,i,c,s=a("VkAN"),l=a.n(s),u=a("pVnL"),m=a.n(u),p=a("QILm"),d=a.n(p),b=a("lSNA"),h=a.n(b),f=a("E+oP"),y=a.n(f),g=a("q1tI"),O=a.n(g),v=a("17x9"),E=a.n(v),j=a("/MKj"),N=a("TSYQ"),S=a.n(N),P=a("ePPS"),k=a("nbpM"),w=a("kZhr"),C=a("bymT"),T=a("Jje6"),I=a("H2c4"),A=a("dhJQ"),R=a("m+TX"),M=a.n(R);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(){var e=l()(["Requested staff"]);return q=function(){return e},e}var L=(n=Object(j.b)((e,{location:t,bookedItem:a,addCurrentEmployee:n=!1,ignoredEmployees:r=[],includeUnbookableEmployees:o=!1,disabled:i})=>{var c,s=k.a.isReshedulEnabled(e),l=[];if(!i&&(l=k.a.getEmployeeListForLocation(e,t).filter(e=>(e.providesServices||o)&&!1===r.includes(e.id)),n)){var u=k.a.getCurrentEmployee(e);l.find(e=>e.id===u.id)||l.splice(0,0,{id:u.id,name:u.name})}if(a){var m=k.a.getServicePricingLevelDict(e)[a.splId];m&&(c=k.a.getEmployeesProvidingService(e,m.serviceId))}return{employees:l,serviceEmployeesIds:c,reshedulEnabled:s}},{}),r=Object(A.g)(),n(o=Object(w.n)(o=r((c=i=class extends g.PureComponent{constructor(...e){super(...e),h()(this,"iconClick",()=>{var{reshedulEnabled:e}=this.props;e||this.selfRef.focus()}),h()(this,"refHandler",e=>{this.selfRef=e}),h()(this,"handleEmployeeChange",e=>{this.props.handleEmployeeChange&&e.target&&"SELECT"===e.target.tagName&&this.props.handleEmployeeChange()})}render(){var e=this.props,{input:t,location:a,bookedItem:n,iconProps:r,employees:o,serviceEmployeesIds:i,addCurrentEmployee:c,ignoredEmployees:s,includeUnbookableEmployees:l,handleEmployeeChange:u,className:p,isMatch:b,reshedulEnabled:h}=e,f=d()(e,["input","location","bookedItem","iconProps","employees","serviceEmployeesIds","addCurrentEmployee","ignoredEmployees","includeUnbookableEmployees","handleEmployeeChange","className","isMatch","reshedulEnabled"]),g=O.a.createElement(T.b,{marginLeft:b&&!h?0:6,grow:1,flex:"row",alignItems:"center",justifyContent:"center"},O.a.createElement(w.h,m()({},r,{onIcon:"heart",size:b&&!h?"standard":"big",onClassName:M.a.animatedHeart,offIcon:"heart-outline",onClick:this.iconClick}))),v=h?g:O.a.createElement(I.g,{content:Object(P.c)(q()),for:I.d,"data-place":"bottom"},g);return O.a.createElement(C.b,m()({},f,{input:t,inlinePrefix:!0,prefix:t.value&&r&&v,selfRef:this.refHandler,onChange:this.handleEmployeeChange,className:S()(M.a.self,p),inputClassName:S()({[M.a.withIcon]:t.value&&r})}),!o.length&&O.a.createElement("option",null,"No Staff"),o.map(({id:e,name:t})=>O.a.createElement("option",{key:e,value:e},"".concat(y()(n)||i.includes(e)?"":"⚠ ").concat(t))))}},h()(i,"propTypes",x(x({},w.P),{},{className:E.a.string,location:E.a.string.isRequired,bookedItem:E.a.object,iconProps:E.a.object,employees:E.a.arrayOf(E.a.shape({id:E.a.string.isRequired,name:E.a.string.isRequired})).isRequired,ignoredEmployees:E.a.arrayOf(E.a.string),serviceEmployeesIds:E.a.arrayOf(E.a.string),addCurrentEmployee:E.a.bool,includeUnbookableEmployees:E.a.bool,handleEmployeeChange:E.a.func,isMatch:E.a.bool,reshedulEnabled:E.a.bool})),o=c))||o)||o)||o)},"b+f9":function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("QILm"),l=a.n(s),u=a("lSNA"),m=a.n(u),p=a("q1tI"),d=a.n(p),b=a("17x9"),h=a.n(b),f=a("TSYQ"),y=a.n(f),g=a("PhEd"),O=a("/MKj"),v=a("Jje6"),E=a("i6OX"),j=a("Qs7Y"),N=a("nbpM"),S=a("3C4R"),P=a.n(S),k=Object(O.b)(e=>({isReshedulEnabled:N.a.isReshedulEnabled(e)}))((o=r=class extends p.PureComponent{render(){var e=this.props,{className:t,icon:a,iconColor:n,iconSize:r,white:o,text:i,isReshedulEnabled:s}=e,u=l()(e,["className","icon","iconColor","iconSize","white","text","isReshedulEnabled"]);return d.a.createElement(v.b,c()({flex:"column",justifyContent:"center",alignItems:"center",className:y()(P.a.self,t,{[P.a.white]:o})},u),d.a.createElement(E.b,{qaType:"placeholder-icon",name:a,size:r,color:n}),s?d.a.createElement(g.Text,{qaType:"placeholder-text",className:P.a.label,type:"fresha-paragraph",color:"gray100"},i):d.a.createElement(j.d,{qaType:"placeholder-text",className:P.a.label},i))}},m()(r,"propTypes",{className:h.a.string,icon:h.a.string.isRequired,text:h.a.node,iconColor:E.b.propTypes.color,iconSize:E.b.propTypes.size,white:h.a.bool,isReshedulEnabled:h.a.bool}),m()(r,"defaultProps",{iconColor:"original",iconSize:"placeholder",white:!1}),n=o))||n},bOWi:function(e,t,a){"use strict";a.d(t,"a",(function(){return $a}));var n,r,o,i,c=a("SBfo"),s=a("QILm"),l=a.n(s),u=a("VkAN"),m=a.n(u),p=a("9oTK"),d=a.n(p),b=a("lSNA"),h=a.n(b),f=a("E+oP"),y=a.n(f),g=a("mwIZ"),O=a.n(g),v=a("vN+2"),E=a.n(v),j=a("mNz5"),N=a.n(j),S=a("q1tI"),P=a.n(S),k=a("17x9"),w=a.n(k),C=a("/MKj"),T=a("Ty5D"),I=a("sQHA"),A=a("nbpM"),R=a("WV/M"),M=a("ePPS"),D=a("XOD0"),x=a("ytsJ"),q=a("Jje6"),L=a("Vows"),F=a("ZO1O"),B=a("pVnL"),V=a.n(B),H=a("TSYQ"),U=a.n(H),Y=a("jwng"),Q=a("i6OX"),_=a("rX2A"),K=a("H9Ij"),W=a("5L+P"),G=a("Qs7Y"),z=a("jO4z"),J=a.n(z);function Z(){var e=m()(["Select date"]);return Z=function(){return e},e}function X(){var e=m()(["Appointment Date"]);return X=function(){return e},e}var $,ee,te,ae=(n=Object(C.b)(e=>({providerMoment:A.a.providerMoment(e)})),Object(K.a)(r=n((i=o=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"onDayClick",(e,{disabled:t})=>{if(!t){var{providerMoment:a,input:n}=this.props;n.onChange(a(e)),this.popupButton.closePopup()}}),h()(this,"selectedDays",e=>{var t=this.getValue();return t&&t.isSame(this.props.providerMoment(e),"day")}),h()(this,"selectMonth",e=>e&&e.getWrappedInstance().showMonth(Object(Y.r)(this.getValue()||this.props.providerMoment())))}getValue(){return this.props.input.value}render(){var e=this.props,{className:t,valueFormat:a,disabledDays:n,hoveredDays:r,modifiers:o,input:i,meta:c}=e,s=l()(e,["className","valueFormat","disabledDays","hoveredDays","modifiers","input","meta"]),u=this.getValue();return P.a.createElement(W.a,V()({as:q.a,className:U()(t,J.a.self),ref:e=>{this.popupButton=e},modalHeaderLabel:Object(M.c)(X())},s,{popupContent:P.a.createElement(_.a,{wrapperClassName:J.a.datePickerWrapper,ref:this.selectMonth,selectedDays:this.selectedDays,disabledDays:n,hoveredDays:r,modifiers:o,onDayClick:this.onDayClick})}),P.a.createElement(G.d,{className:J.a.selectText,type:"landing-title",noWrap:!0},u&&u.format(a)||Object(M.c)(Z())),P.a.createElement(Q.b,{name:"arrow-down-cropped",size:"small",color:"gray-7"}))}},h()(o,"propTypes",{className:w.a.string,valueFormat:w.a.string,disabledDays:w.a.oneOfType([w.a.func,w.a.array]),hoveredDays:w.a.func,modifiers:w.a.object,input:w.a.shape(K.b).isRequired,meta:w.a.shape(K.c).isRequired,providerMoment:w.a.func}),h()(o,"defaultProps",{valueFormat:"dddd, D MMM YYYY"}),r=i))||r)||r),ne=a("kZhr"),re=a("uZ2f"),oe=a("6kH+"),ie=a("dhJQ"),ce=a("Lz9V"),se=a("Xz+p"),le=a("TJnl"),ue=a("PhEd");function me(){var e=m()(["Loading..."]);return me=function(){return e},e}var pe,de,be,he=Object(C.b)(e=>({hint:A.a.getBookingFlowRepeatHint(e),isLoading:A.a.getBookingFlowIsRepeatLoading(e),isReshedulEnabled:A.a.isReshedulEnabled(e)}))((te=ee=class extends S.PureComponent{render(){var{hint:e,placeholder:t,isLoading:a,isRepeating:n,isReshedulEnabled:r}=this.props,o=()=>n?!1===a?e||t:Object(M.c)(me()):t;return r?P.a.createElement(ue.Text,{type:"fresha-paragraph",qaType:"repeat-text-lbl"},o()):P.a.createElement(q.b,{qaType:"repeat-text-lbl"},o())}},h()(ee,"propTypes",{hint:w.a.string,placeholder:w.a.oneOfType([w.a.string,w.a.node]),isLoading:w.a.bool,isRepeating:w.a.bool,isReshedulEnabled:w.a.bool}),$=te))||$,fe=a("5ZU+"),ye=a("/Q2I"),ge=a("3wSE"),Oe=a("QXy2"),ve=a("gvXR"),Ee=a("WjpJ"),je=a.n(Ee),Ne=a("pKoe"),Se=a("34S7"),Pe=a.n(Se);function ke(){var e=m()(["Selected date"]);return ke=function(){return e},e}function we(){var e=m()(["Ends"]);return we=function(){return e},e}function Ce(){var e=m()(["Frequency"]);return Ce=function(){return e},e}function Te(){var e=m()(["Ongoing"]);return Te=function(){return e},e}function Ie(){var e=m()(["Specific date"]);return Ie=function(){return e},e}function Ae(){var e=m()(["Doesn't repeat"]);return Ae=function(){return e},e}var Re,Me,De,xe=[{value:ve.d,label:Object(M.c)(Ae())}].concat(je()(1,8).map(e=>({value:"".concat(I.m.DAILY,":").concat(e),label:Object(M.g)("Daily","Every %{days} days",e,{days:e})}))).concat(je()(1,11).map(e=>({value:"".concat(I.m.WEEKLY,":").concat(e),label:Object(M.g)("Weekly","Every %{weeks} weeks",e,{weeks:e})}))).concat(je()(1,12).map(e=>({value:"".concat(I.m.MONTHLY,":").concat(e),label:Object(M.g)("Monthly","Every %{months} months",e,{months:e})}))),qe=[...je()(2,16),...je()(20,31,5)].map(e=>({value:"count:".concat(e),label:Object(M.c)("After %{occurrences} times",{occurrences:e})})).concat([{value:ve.b,label:Object(M.c)(Ie())},{value:ve.e,label:Object(M.c)(Te())}]),Le=[],Fe=e=>(t,{bookingDate:a})=>{var n=e(t,"repeatOption"),r=void 0!==n&&n!==ve.d,o=e(t,"repeatCount")===ve.b,i=A.a.providerMoment(t);return{isRecurringBooking:r,isRecurringByDate:o,bookingRepeats:n,disabledEndDates:r&&o?Object(Ne.c)(a,n,i):Le}},Be=Object(ie.g)()((be=de=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"onRepeatsChange",(e,t)=>{if(t===ve.d)this.props.change("repeatCount",ve.c);else{var{bookingDate:a}=this.props;this.props.change("repeatEndDate",Object(Ne.d)(a,t))}}),h()(this,"onRepeatCountChange",(e,t)=>{if(t===ve.b){var{bookingDate:a,bookingRepeats:n}=this.props;this.props.change("repeatEndDate",Object(Ne.d)(a,n))}else this.props.change("repeatEndDate",void 0)})}render(){var{isRecurringBooking:e,isRecurringByDate:t,disabledEndDates:a,isMatch:n}=this.props;return P.a.createElement(q.b,{className:Pe.a.self},P.a.createElement(re.r,{name:"repeatOption",label:Object(M.c)(Ce()),qaType:"repeat-freq-opts-select",onChange:this.onRepeatsChange,className:Pe.a.fieldFrequency},xe.map(({value:e,label:t})=>P.a.createElement("option",{key:e,value:e},t))),e&&P.a.createElement(re.r,{name:"repeatCount",label:Object(M.c)(we()),onChange:this.onRepeatCountChange,qaType:"repeat-end-opts-select",className:Pe.a.fieldEnds},qe.map(({value:e,label:t})=>P.a.createElement("option",{key:e,value:e},t))),e&&t&&P.a.createElement(re.g,{name:"repeatEndDate",label:Object(M.c)(ke()),disabledDays:a,valueFormat:"ddd, D MMM",condensed:n,className:Pe.a.fieldEndDate}))}},h()(de,"propTypes",{isRecurringBooking:w.a.bool.isRequired,isRecurringByDate:w.a.bool.isRequired,disabledEndDates:w.a.oneOfType([w.a.func,w.a.array]),bookingDate:w.a.object,bookingRepeats:w.a.string,change:w.a.func.isRequired,isMatch:w.a.bool}),pe=be))||pe;function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ue,Ye,Qe,_e,Ke=Fe(Object(ne.R)("select-sequence")),We=Object(C.b)(Ke)(Re=Object(ne.q)("select-sequence")((De=Me=class extends S.PureComponent{render(){return P.a.createElement(Be,this.props)}},h()(Me,"propTypes",He(He({},ne.Q),{},{isRecurringBooking:w.a.bool.isRequired,isRecurringByDate:w.a.bool.isRequired,disabledEndDates:w.a.oneOfType([w.a.func,w.a.array]),bookingDate:Oe.b,bookingRepeats:w.a.string})),Re=De))||Re)||Re,Ge=a("sDPh"),ze=a.n(Ge);function Je(){var e=m()(["Repeat"]);return Je=function(){return e},e}function Ze(){var e=m()(["Close"]);return Ze=function(){return e},e}function Xe(){var e=m()(["Close"]);return Xe=function(){return e},e}function $e(){var e=m()(["Apply changes"]);return $e=function(){return e},e}function et(){var e=m()(["Apply changes"]);return et=function(){return e},e}function tt(){var e=m()(["Apply changes"]);return tt=function(){return e},e}function at(){var e=m()(["Set Repetition"]);return at=function(){return e},e}var nt,rt,ot,it=(Ue=Object(C.b)(e=>({reshedulEnabled:A.a.isReshedulEnabled(e),repeatHint:A.a.getBookingFlowRepeatHint(e),isRepeatHintLoading:A.a.getBookingFlowIsRepeatLoading(e)}),{submitForm:function(){return Object(ne.hb)("select-sequence")}}),Object(ne.n)(Ye=Ue((_e=Qe=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"setPopupRef",e=>{this.popup=e}),h()(this,"clear",()=>{fe.a.setBookingFlowIsRepeatLoading(!0),this.props.input.onChange({repeatOption:ve.d,repeatCount:ve.c})}),h()(this,"close",()=>{this.popup.closePopup()}),h()(this,"handleSubmit",e=>{this.props.input.value!==e&&fe.a.setBookingFlowIsRepeatLoading(!0),this.props.input.onChange(e),this.close()}),h()(this,"stopPropagation",e=>{e.stopPropagation()})}render(){var{reshedulEnabled:e,input:t,width:a,bookingDate:n,repeatHint:r,isRepeatHintLoading:o,isRepeating:i}=this.props;return P.a.createElement(q.b,{flex:"row",alignItems:"center",onChange:this.stopPropagation},P.a.createElement(W.a,{ref:this.setPopupRef,as:ge.n,modalHeaderLabel:Object(M.c)(at()),modalFooterContent:P.a.createElement(ge.f,{onAction:this.props.submitForm},Object(M.c)(tt())),qaType:"repeat-button",popupContent:P.a.createElement(q.b,{style:{width:a}},P.a.createElement(F.d,{type:"plain popup-form"},P.a.createElement(We,{initialValues:t.value,bookingDate:n,onSubmit:this.handleSubmit})),P.a.createElement(ye.e,{plain:!0},e?P.a.createElement(ue.Button,{variant:"primary",onAction:this.props.submitForm,qaType:"apply-changes",className:ze.a.button},Object(M.c)(et())):P.a.createElement(ge.f,{grow:1,basis:"50%",onAction:this.props.submitForm,qaType:"apply-changes"},Object(M.c)($e())),e?P.a.createElement(ue.Button,{variant:"secondary",className:ze.a.button,onAction:this.close},Object(M.c)(Xe())):P.a.createElement(ge.a,{grow:1,basis:"50%",onAction:this.close},Object(M.c)(Ze()))))},P.a.createElement(he,{isRepeating:i,placeholder:P.a.createElement(q.b,{flex:"row",alignItems:"center",className:ze.a.repeatTextPlaceholder},P.a.createElement(Q.b,{name:"refresh",size:"small",color:e&&"blue-dark",className:ze.a.icon}),P.a.createElement(q.b,null,Object(M.c)(Je())))})),r&&!o&&P.a.createElement(ge.b,{name:"delete",marginLeft:10,touchOverlay:!0,onAction:this.clear}))}},h()(Qe,"propTypes",{bookingDate:Oe.b,width:w.a.number,repeatHint:w.a.string,isRepeatHintLoading:w.a.bool,submitForm:w.a.func.isRequired,isRepeating:w.a.bool,input:w.a.shape({onChange:w.a.func,value:w.a.any}),reshedulEnabled:w.a.bool}),h()(Qe,"defaultProps",{width:375}),Ye=_e))||Ye)||Ye),ct=a("xGi1");function st(){var e=m()(["Repeating options"]);return st=function(){return e},e}var lt,ut,mt,pt=Object(ne.R)("appointment-mobile-date-repeat-form"),dt=Fe(pt),bt=Object(C.b)(dt)(Be),ht=Object(ne.q)("appointment-mobile-date-repeat-form")(nt=Object(C.b)(e=>({bookingDate:pt(e,"date")}))((ot=rt=class extends S.PureComponent{render(){var{bookingDate:e,change:t}=this.props;return P.a.createElement(q.b,null,P.a.createElement(ne.d,{name:"date",forceMobile:!0}),P.a.createElement(ct.b,{label:Object(M.c)(st())}),P.a.createElement(F.d,{type:"form"},P.a.createElement(bt,{bookingDate:e,change:t})))}},h()(rt,"propTypes",{bookingDate:w.a.object,change:w.a.func.isRequired}),nt=ot))||nt)||nt;function ft(){var e=m()(["Apply changes"]);return ft=function(){return e},e}function yt(){var e=m()(["Appointment Date"]);return yt=function(){return e},e}function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt=Object(C.b)((e,t)=>{var{bookingDate:a,repeatValue:n}=t;return{initialValues:Ot({date:a},n)}},{submitForm:()=>Object(ne.hb)("appointment-mobile-date-repeat-form")})((mt=ut=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"handleSubmit",e=>{var{date:t}=e,a=l()(e,["date"]),{initialValues:n}=this.props;(n.repeatOption!==a.repeatOption||n.repeatCount!==a.repeatCount||n.repeatEndDate!==a.repeatEndDate||n[c.b]!==t&&a.repeatOption!==ve.d)&&fe.a.setBookingFlowIsRepeatLoading(!0),this.props.change(c.b,t),this.props.change(c.k,Ot({},a)),this.props.onClose()}),h()(this,"submitFlow",()=>{this.props.submitForm()})}render(){var{initialValues:e,onClose:t}=this.props;return P.a.createElement(ye.i,null,P.a.createElement(ye.g,{onClose:t},Object(M.c)(yt())),P.a.createElement(ye.c,{onlyBottomPadding:!0},P.a.createElement(ht,{onSubmit:this.handleSubmit,initialValues:e})),P.a.createElement(ye.e,null,P.a.createElement(ge.f,{grow:1,onAction:this.submitFlow,qaType:"apply-btn"},Object(M.c)(ft()))))}},h()(ut,"propTypes",{initialValues:w.a.object.isRequired,onClose:w.a.func.isRequired,submitForm:w.a.func.isRequired,change:w.a.func.isRequired}),lt=mt))||lt;function Et(){var e=m()(["Select date"]);return Et=function(){return e},e}function jt(){var e=m()(["Doesn't repeat"]);return jt=function(){return e},e}class Nt extends S.PureComponent{constructor(...e){super(...e),h()(this,"state",{open:!1}),h()(this,"openModal",()=>{this.setState({open:!0})}),h()(this,"closeModal",()=>{this.setState({open:!1})})}render(){var e=this.props,{bookingDate:t,repeatValue:a,change:n}=e,r=l()(e,["bookingDate","repeatValue","change"]),{open:o}=this.state;return P.a.createElement(L.x,V()({onAction:this.openModal,qaType:"date-repeat-btn",leftLabel:P.a.createElement(he,{isRepeating:!!a.repeatEndDate,placeholder:Object(M.c)(jt())})},r),o&&P.a.createElement(vt,{onClose:this.closeModal,change:n,bookingDate:t,repeatValue:a}),t&&t.format(le.b)||Object(M.c)(Et()))}}h()(Nt,"propTypes",{bookingDate:w.a.object.isRequired,repeatValue:w.a.object.isRequired,change:w.a.func.isRequired});var St=a("ydOK"),Pt=a("2O3R"),kt=a("hM2H"),wt=a.n(kt);class Ct extends S.PureComponent{render(){var e=this.props,{className:t,children:a,mobile:n}=e,r=l()(e,["className","children","mobile"]);return P.a.createElement(q.b,V()({className:U()(wt.a.self,t)},r),P.a.createElement(Q.b,{className:wt.a.topMarker,name:"timeline-oval"}),P.a.createElement(Q.b,{className:wt.a.bottomMarker,name:"timeline-oval"}),n?a:P.a.createElement(Pt.a,{duration:250,staggerDelayBy:100,enterAnimation:"accordionVertical",leaveAnimation:"accordionVertical",easing:"ease-out"},a))}}h()(Ct,"propTypes",{className:w.a.string,children:w.a.node,mobile:w.a.bool});class Tt extends S.PureComponent{render(){var e=this.props,{className:t,number:a,icon:n,noIcon:r,iconClassName:o,children:i}=e,c=l()(e,["className","number","icon","noIcon","iconClassName","children"]);return P.a.createElement(q.b,V()({className:U()(wt.a.item,t)},c),!r&&P.a.createElement(Q.b,{name:n,className:U()(wt.a.marker,o)}),P.a.createElement(q.b,{className:wt.a.number},a),i)}}h()(Tt,"propTypes",{className:w.a.string,number:w.a.number,icon:w.a.string,noIcon:w.a.bool,iconClassName:w.a.string,children:w.a.node}),h()(Tt,"defaultProps",{icon:"timeline-oval",noIcon:!1});var It,At,Rt,Mt=a("c0W2"),Dt=a("vMmf"),xt=a("9fVE");function qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ft=Object(C.b)((e,{item:t})=>({servicePricingLevel:A.a.getServicePricingLevel(e,t.bookedItem.splId),employee:A.a.getEmployee(e,t.employee),room:A.a.getRoom(e,t.room),timeFormat24h:A.a.isProviderTimeFormat24h(e),booking:A.a.getBooking(e,t.bookingId),providerMoment:A.a.providerMoment(e)}),{},(e,t,a)=>{var{timeFormat24h:n,providerMoment:r}=e,o=l()(e,["timeFormat24h","providerMoment"]),{item:{start:i,duration:c,extraTime:s}}=a;return Lt(Lt(Lt(Lt({},a),o),t),{},{startTimeLabel:Object(Y.m)(r().startOf("day").add(i,"seconds"),n),serviceDuration:Object(Y.l)(c),extraTimeLabel:Object(Y.l)(s)})})((Rt=At=class extends S.PureComponent{render(){var{item:{bookedItem:e,extraTime:t,extraTimeDescription:a,employeeIsRequested:n},servicePricingLevel:r,employee:o,room:i,onAction:c,startTimeLabel:s,serviceDuration:l,extraTimeLabel:u,booking:m}=this.props;return P.a.createElement(L.r,{topNote:s,topNoteTag:ve.a[e.type],onAction:c,name:e.name,description:P.a.createElement(P.a.Fragment,null,P.a.createElement(q.b,null,P.a.createElement(Dt.a,{description:Object(xt.c)(r,l),employeeIsRequested:n,employeeName:o.name,room:i&&i.name})),P.a.createElement(q.b,null,!!t&&"".concat(u," ").concat(a.toLowerCase()))),retailPrice:m&&m.servicePricingLevel===r.id?m.price:e.price,nonDiscountedPrice:r.price,priceType:m&&m.servicePricingLevel===r.id?m.priceType:e.priceType})}},h()(At,"propTypes",{item:w.a.object,servicePricingLevel:w.a.object,employee:w.a.object,room:w.a.object,onAction:w.a.func,booking:w.a.object,startTimeLabel:w.a.string,serviceDuration:w.a.string,extraTimeLabel:w.a.string}),It=Rt))||It;function Bt(){var e=m()(["Save"]);return Bt=function(){return e},e}function Vt(){var e=m()(["Edit Service"]);return Vt=function(){return e},e}function Ht(){var e=m()(["Add Service"]);return Ht=function(){return e},e}class Ut extends S.PureComponent{render(){var{children:e,isNew:t}=this.props;return P.a.createElement(ye.i,null,P.a.createElement(ye.g,{secondaryAction:P.a.createElement(ge.e,{onAction:this.props.onCancel})},t?Object(M.c)(Ht()):Object(M.c)(Vt())),P.a.createElement(ye.c,{onlyBottomPadding:!0},e),P.a.createElement(ye.e,{flex:"column",justifyContent:"space-between"},P.a.createElement(ge.f,{"data-qa":"save-edit-appointment-button",onAction:this.props.onSuccess},Object(M.c)(Bt()))))}}h()(Ut,"propTypes",{children:w.a.node,onSuccess:w.a.func,onCancel:w.a.func,isNew:w.a.bool});var Yt,Qt,_t,Kt=a("Y+p1"),Wt=a.n(Kt),Gt=a("UrOp"),zt=a.n(Gt),Jt=a("am0B"),Zt=a("50DI"),Xt=a.n(Zt);function $t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ta,aa,na,ra=e=>e&&Number(e),oa=Object(ne.q)({form:"select-extra-time"})((_t=Qt=class extends S.PureComponent{render(){var{label:e}=this.props;return P.a.createElement(re.r,{name:"extraTime",label:e,parse:ra},Ne.a.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t)))}},h()(Qt,"propTypes",ea(ea({},ne.Q),{},{label:w.a.string})),Yt=_t))||Yt;function ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ca(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ia(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function sa(){var e=m()(["Close"]);return sa=function(){return e},e}function la(){var e=m()(["Apply changes"]);return la=function(){return e},e}function ua(){var e=m()(["Apply changes"]);return ua=function(){return e},e}var ma=Object(C.b)(()=>({}),{submitForm:function(){return Object(ne.hb)("select-extra-time")}})(ta=Object(ne.n)((na=aa=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"setPopupRef",e=>{this.popup=e}),h()(this,"close",()=>{this.popup.closePopup()}),h()(this,"handleSubmit",({extraTime:e})=>{this.props.input.onChange(e),this.close()})}render(){var{label:e,description:t,input:a,className:n}=this.props;return P.a.createElement(W.a,{className:n,ref:this.setPopupRef,as:ge.n,modalHeaderLabel:Xt()(t),modalFooterContent:P.a.createElement(ge.f,{onAction:this.props.submitForm},Object(M.c)(ua())),popupContent:P.a.createElement(q.b,null,P.a.createElement(F.d,{type:"plain popup-form"},P.a.createElement(oa,{label:Object(M.c)("%{label} duration",{label:e}),initialValues:{extraTime:a.value},onSubmit:this.handleSubmit})),P.a.createElement(ye.e,{plain:!0},P.a.createElement(ge.f,{grow:1,basis:"50%",onAction:this.props.submitForm},Object(M.c)(la())),P.a.createElement(ge.a,{grow:1,basis:"50%",onAction:this.close},Object(M.c)(sa()))))},Object(M.c)("%{extraTime} of %{description}",{extraTime:Object(Y.l)(a.value),description:(t||"").toLowerCase()}))}},h()(aa,"propTypes",ca(ca({},ne.P),{},{label:w.a.string,description:w.a.string,submitForm:w.a.func,className:w.a.string})),ta=na))||ta)||ta,pa=a("4Wsm"),da=a.n(pa);function ba(){var e=m()(["Remove Service"]);return ba=function(){return e},e}function ha(){var e=m()(["Remove Service"]);return ha=function(){return e},e}function fa(){var e=m()(["Duration"]);return fa=function(){return e},e}function ya(){var e=m()(["Duration"]);return ya=function(){return e},e}function ga(){var e=m()(["Start time"]);return ga=function(){return e},e}function Oa(){var e=m()(["Start time"]);return Oa=function(){return e},e}function va(){var e=m()(["Select resource"]);return va=function(){return e},e}function Ea(){var e=m()(["Resource"]);return Ea=function(){return e},e}function ja(){var e=m()(["Select staff"]);return ja=function(){return e},e}function Na(){var e=m()(["Staff"]);return Na=function(){return e},e}function Sa(){var e=m()(["Choose a service"]);return Sa=function(){return e},e}function Pa(){var e=m()(["Add a service"]);return Pa=function(){return e},e}function ka(){var e=m()(["Service"]);return ka=function(){return e},e}function wa(){var e=m()(["Service"]);return wa=function(){return e},e}function Ca(){var e=m()(["None"]);return Ca=function(){return e},e}var Ta=[{value:0,text:Object(M.c)(Ca())},...Ne.a];class Ia extends S.PureComponent{constructor(e){super(e);var{location:t}=e,a={[c.a]:{location:t},[c.d]:{},[c.e]:{parse:Boolean},[c.l]:{},[c.m]:{parse:Number},[c.c]:{parse:Number},[c.f]:{},[c.g]:{}};this.getField=Object(ne.S)(a),this.showMobileWarnings(e.warnings)}componentDidUpdate(e){var t,a;t=e.warnings,a=this.props.warnings,(Array.isArray(t)&&Array.isArray(a)?t.length!==a.length||zt()(t,a,Wt.a).length:t!==a)&&this.showMobileWarnings(this.props.warnings)}showMobileWarnings(e){this.props.mobile&&Array.isArray(e)&&fe.a.addInfoToast(e.join("\n"))}render(){var e=this.props,{className:t,index:a,mobile:n,location:r,bookingId:o,bookedItem:i,rooms:s,startOptions:u,extraTimeDesc:m,extraTimeLabel:p,extraTimeValue:d,onOfferCatalogItemChange:b,handleSectionRemove:h,handleExtraTimeRemove:f,handleEmployeeChange:g,serviceRequiresRoom:O,warnings:v,isOnlyItem:E,cardNoMargin:j,inModal:N}=e,S=l()(e,["className","index","mobile","location","bookingId","bookedItem","rooms","startOptions","extraTimeDesc","extraTimeLabel","extraTimeValue","onOfferCatalogItemChange","handleSectionRemove","handleExtraTimeRemove","handleEmployeeChange","serviceRequiresRoom","warnings","isOnlyItem","cardNoMargin","inModal"]);return P.a.createElement(ne.s,V()({className:U()(da.a.appointmentSection,t)},S),P.a.createElement(Tt,{number:a+1},P.a.createElement(F.d,{qaType:"appointment-item-card",type:U()("form",{noMargin:n&&j}),flex:"row",wrap:"wrap",alignItems:"flex-start"},!n&&h&&P.a.createElement(ge.b,{qaType:"delete-appointment-item-action-icon",name:"delete",className:da.a.deleteSectionIcon,touchOverlay:!0,onAction:h}),P.a.createElement(St.a,V()({},this.getField(c.a),{bookingId:o,label:n?i&&Object(M.c)(wa()):Object(M.c)(ka()),placeholder:n?Object(M.c)(Pa()):Object(M.c)(Sa()),mobile:n,onSelectItem:b,alwaysWarn:!0,warning:!n&&v?v.join("\n"):"","data-qa":"add-new-service-select-btn",className:da.a.fieldService})),P.a.createElement(Jt.a,V()({location:r,bookedItem:i},this.getField(c.d),{label:Object(M.c)(Na()),invalidValueLabel:n?"":Object(M.c)(ja()),iconProps:this.getField(c.e),handleEmployeeChange:g,className:da.a.fieldEmployee})),O&&P.a.createElement(re.r,V()({},this.getField(c.l),{label:Object(M.c)(Ea()),invalidValueLabel:Object(M.c)(va()),className:da.a.fieldResource}),s.map(({id:e,name:t})=>P.a.createElement("option",{key:e,value:e},t))),P.a.createElement(re.r,V()({},this.getField(c.m),{label:Object(M.c)(Oa()),invalidValueLabel:n?"":Object(M.c)(ga()),wrapLabel:!0,className:da.a.fieldStartTime}),u.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t))),P.a.createElement(re.r,V()({},this.getField(c.c),{label:Object(M.c)(ya()),invalidValueLabel:"",disabled:y()(i),className:da.a.fieldDuration}),Ne.a.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t))),m&&n&&E&&P.a.createElement(re.r,V()({},this.getField(c.f),{label:Object(M.c)("%{extraTimeLabel} duration",{extraTimeLabel:p}),parse:ra,className:da.a.fieldExtraTime}),Ta.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t))))),!!m&&(n?!E&&P.a.createElement(q.b,null,P.a.createElement(oe.b,{label:p}),P.a.createElement(F.d,{type:"form"},P.a.createElement(re.r,V()({},this.getField(c.f),{label:Object(M.c)(fa()),parse:ra}),Ta.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t))))):!!d&&P.a.createElement(Tt,{icon:"time-left",iconClassName:da.a.extraTimeIcon,className:da.a.extraTime,flex:"row",justifyContent:"flex-start",alignItems:"center",key:"".concat(S.name,"-extra-time")},P.a.createElement(q.b,{qaType:"appointment-item-extra-time",flex:"row",alignItems:"center",justifyContent:"flex-start"},P.a.createElement(ma,V()({},this.getField(c.f),{className:da.a.extraTimePopup,description:m,label:p}))),P.a.createElement(ge.b,{qaType:"delete-appointment-item-extra-time",name:"delete",touchOverlay:!0,onAction:f}))),N&&h&&(n?P.a.createElement(L.w,{"data-qa":"remove-btn",onAction:h},Object(M.c)(ha())):P.a.createElement(F.a,{type:"button",onAction:h},P.a.createElement(ge.h,null,Object(M.c)(ba())))))}}h()(Ia,"propTypes",{className:w.a.string,index:w.a.number.isRequired,name:w.a.string.isRequired,mobile:w.a.bool,bookingId:w.a.string,location:w.a.string.isRequired,bookedItem:w.a.object,rooms:w.a.arrayOf(w.a.shape({id:w.a.string.isRequired,name:w.a.string.isRequired})),startOptions:w.a.arrayOf(w.a.shape({value:w.a.number.isRequired,text:w.a.string.isRequired})).isRequired,extraTimeDesc:w.a.string,extraTimeLabel:w.a.string,extraTimeValue:w.a.number,onOfferCatalogItemChange:w.a.func.isRequired,handleSectionRemove:w.a.func,handleExtraTimeRemove:w.a.func.isRequired,handleEmployeeChange:w.a.func,serviceRequiresRoom:w.a.bool.isRequired,warnings:w.a.arrayOf(w.a.string),isOnlyItem:w.a.bool,cardNoMargin:w.a.bool,inModal:w.a.bool});var Aa,Ra,Ma,Da,xa,qa,La=a("AGHz"),Fa=a("4flP"),Ba=Object(C.b)(e=>({marketplaceAppointmentConfirmationStatus:Object(La.e)(e),isNoShowSettingsMarketplaceAppointmentConfirmationEnabled:A.a.isNoShowSettingsMarketplaceAppointmentConfirmationEnabled(e),customer:A.a.getBookingFlowCustomer(e)}))((Ma=Ra=class extends S.PureComponent{componentDidUpdate(e){var{change:t,marketplaceAppointmentConfirmationStatus:a,isNoShowSettingsMarketplaceAppointmentConfirmationEnabled:n}=this.props,r=O()(e.customer,"marketplaceAppointmentConfirmationEnabled"),o=O()(this.props.customer,"marketplaceAppointmentConfirmationEnabled");n&&r!==o&&t(c.o,!!O()(this.props.customer,"marketplaceAppointmentConfirmationEnabled")),a!==La.a.AVAILABLE&&t(c.o,!1)}render(){var{marketplaceAppointmentConfirmationStatus:e}=this.props;return e===La.a.NOT_VISIBLE?null:P.a.createElement(Tt,{noIcon:!0,className:da.a.appointmentNote},P.a.createElement(re.b,{noMargin:!0,name:c.o,asSwitchMobile:!0,wrapLabel:!0,label:Object(M.f)("Ask client to confirm appointment with card, <a>learn more</a>",null,{a:e=>P.a.createElement(ge.n,{inheritFontSize:!0,key:"learn-more",linkTo:"https://support.fresha.com/hc/en-us/articles/360012225294-Managing-No-Shows-and-Cancellations"},e)}),disabled:e!==La.a.AVAILABLE,className:da.a.fieldConfirm}))}},h()(Ra,"propTypes",{marketplaceAppointmentConfirmationStatus:w.a.oneOf(Object.values(La.a)),isNoShowSettingsMarketplaceAppointmentConfirmationEnabled:w.a.bool,change:w.a.func,customer:w.a.object}),Aa=Ma))||Aa;function Va(){var e=m()(["Add an appointment note (visible to staff only)"]);return Va=function(){return e},e}function Ha(){var e=m()(["Appointment notes"]);return Ha=function(){return e},e}function Ua(){var e=m()(["Notes visible to staff only"]);return Ua=function(){return e},e}function Ya(){var e=m()(["Notes"]);return Ya=function(){return e},e}function Qa(){var e=m()(["Services"]);return Qa=function(){return e},e}function _a(){var e=m()(["Add another service"]);return _a=function(){return e},e}function Ka(){var e=m()(["Choose a service"]);return Ka=function(){return e},e}function Wa(){var e=m()(["Service"]);return Wa=function(){return e},e}function Ga(){var e=m()(["Start time"]);return Ga=function(){return e},e}function za(){var e=m()(["Start Time"]);return za=function(){return e},e}function Ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Za(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ja(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Xa=[],$a=Object(ie.g)()(Da=Object(C.b)(e=>{var t,a=A.a.getBookingFlowLocation(e),n=A.a.getProvider(e),r=A.a.getBookingFlowIsRoomInherited(e),o=A.a.getServicePricingLevelDict(e),i=A.a.getOfferCatalogItemListDict(e),s=A.a.getBookingFlowSequence(e),l=A.a.providerMoment(e),u=ve.d,m=ve.c;s&&(u="".concat(s.intervalBase,":").concat(s.intervalMultiplier),m=function(e,t){switch(e){case I.l.ONGOING:return ve.e;case I.l.BY_DATE:return ve.b;case I.l.BY_OCCURRENCES:return"count:".concat(t);default:throw new Error("Unhandled sequence type: ".concat(e))}}(s.endType,s.occurrences),t=s.endDate);var p=A.a.getBookingFlowHints(e),d=Object(c.r)(e,c.i)||Xa,b=Object(c.r)(e,c.m),h=O()(Object(c.q)(e),c.m)||{},f=h.active||h.touched,y=A.a.getLocationRoomDict(e)[a.id],g=A.a.getServicePricingLevelRoomDict(e),v=Object(Fa.a)(e,a.id),E=d.reduce((e,t)=>(e.lastItem=e.lastItem.start+e.lastItem.duration+e.lastItem.extraTime>t.start+t.duration+t.extraTime?e.lastItem:t,e.maxKey=t.key>e.maxKey?t.key:e.maxKey,e),{lastItem:{},maxKey:0}),j=!!(E.lastItem&&E.lastItem[c.d]&&E.lastItem[c.c]&&E.lastItem[c.a]),N={repeatOption:u,repeatCount:m,repeatEndDate:t};return{hints:p,provider:n,location:a,offerCatalogItems:i,servicePricingLevels:o,isRoomInherited:r,appointmentStartOptions:Object(x.c)(n.timeFormat),bookingDate:Object(c.r)(e,c.b)||l(),repeatValue:Object(c.r)(e,c.k)||N,initialValues:Object(La.c)(e,N),isValidForm:Object(ne.cb)(c.n)(e),lastItem:E.lastItem,validLastItem:j,nextKey:E.maxKey+1,nextStartTime:b,nextStartTimeFixed:f,roomData:v,locationRooms:y,servicePricingLevelRooms:g,itemsLength:d.length,customer:A.a.getBookingFlowCustomer(e)}},{},(e,t,a)=>{var n,{providerMoment:r,repeatValue:o}=e,i=o.repeatEndDate&&"date"===o.repeatCount?(n=o.repeatEndDate,e=>r(e).startOf("day").isSameOrAfter(n,"day")):[];return Za(Za(Za(Za({},a),e),t),{},{disabledEndDates:i})})(Da=Object(ne.q)({form:c.n,validate:La.f,destroyOnUnmount:!1,immutableProps:["hints","provider","location","servicePricingLevels","offerCatalogItems","itemsLength","roomData","locationRooms","servicePricingLevelRooms"]})((qa=xa=class extends S.PureComponent{constructor(...e){super(...e),h()(this,"onOfferCatalogItemAdd",e=>{var{offerCatalogItems:t,nextStartTime:a}=this.props,n=t[e];if(n.servicePricingLevel){var r={type:R.a.SERVICE_PRICING_LEVEL};this.addCatalogItems([n],r)}if(n.package){var o={type:R.a.PACKAGE_ITEM,packageInstanceId:N()(),packageName:n.name,packageType:n.package.type,packageStartTime:a};this.addCatalogItems(n.package.items,o)}}),h()(this,"onOfferCatalogItemChange",(e,t,a,n)=>{var{offerCatalogItems:r}=this.props,{start:o}=a,i=r[t],s=Object(p.resolve)();a[c.a].type===R.a.PACKAGE_ITEM&&(s=this.splitPackage(n,e,a[c.a].packageInstanceId)),s.then(()=>{if(i.servicePricingLevel){var n={type:R.a.SERVICE_PRICING_LEVEL};this.changeCurrentForm(e,i,n,a)}if(i.package){var r={type:R.a.PACKAGE_ITEM,packageInstanceId:N()(),packageName:i.name,packageType:i.package.type,packageStartTime:o},{items:c}=i.package;this.changeCurrentForm(e,c[0],r,a),this.addRemainingPackageItems(t,r)}}).catch(E.a)}),h()(this,"onMobileOfferCatalogItemChange",(e,t,a,n)=>{var{offerCatalogItems:r,change:o,lastItem:i,itemsLength:s,initialValues:l,roomData:u,provider:{currencyCode:m}}=this.props,{start:p}=a,d=r[t];if(!d.package||1!==s||i[c.d])this.onOfferCatalogItemChange(e,t,a,n),d.package&&o("".concat(e,".$active"),!1);else{var b={type:R.a.PACKAGE_ITEM,packageInstanceId:N()(),packageName:d.name,packageType:d.package.type,packageStartTime:p},h=Object(La.d)(d.package.items[0],Za(Za({},b),{},{currencyCode:m,initialValues:l,roomData:u}));o(e,Za(Za(Za({},a),h),{},{$cache:Za({},a),$active:!0,$packageInit:{id:t,options:b}}))}}),h()(this,"onCloseSplitModal",()=>{this.packageSplitPromise&&(this.packageSplitPromise.reject(),this.packageSplitPromise=null)}),h()(this,"onConfirmSplit",()=>{this.packageSplitPromise&&(this.packageSplitPromise.resolve(),this.packageSplitPromise=null)}),h()(this,"addRemainingPackageItems",(e,t)=>{var{offerCatalogItems:a}=this.props,n=a[e];this.addCatalogItems(n.package.items.slice(1),t)}),h()(this,"changeCurrentForm",(e,t,a={},n)=>{var{change:r,untouch:o,provider:{currencyCode:i},initialValues:s,roomData:l}=this.props,u=Object(La.d)(t,Za(Za({},a),{},{currencyCode:i,initialValues:s,roomData:l}));r(e,Za(Za({},n),u)),o("".concat(e,".").concat(c.l))}),h()(this,"addCatalogItems",(e,t={})=>{var{roomData:a,array:n,lastItem:r,nextKey:o,nextStartTime:i,isRoomInherited:s,provider:{currencyCode:l}}=this.props,u=0;e.forEach((e,m)=>{var p,d,b=e.servicePricingLevel.id,h=Object(La.d)(e,Za(Za({},t),{},{currencyCode:l}));if(s&&a[b]){var f=r[c.l],y=a[b].defaultRoomId;d=f||y}else d=a[b]?a[b].defaultRoomId:void 0;t.packageType===se.d.PARALLEL?p=t.packageStartTime:(p=i+u,u+=h[c.c]+(h[c.f]||0)),n.push(c.i,Za(Za({key:o+m},h),{},{[c.m]:p>=x.a?void 0:p,[c.d]:r[c.d],[c.e]:!1,[c.l]:d}))})}),h()(this,"handleExtraTimeRemove",e=>{var{change:t}=this.props;t("".concat(e,".").concat(c.f),0)}),h()(this,"handleEmployeeChange",e=>{var{change:t}=this.props;t("".concat(e,".").concat(c.e),!1)}),h()(this,"handleMobileAddService",()=>{var{array:e,lastItem:t,nextKey:a,nextStartTime:n}=this.props;e.push(c.i,{key:a,[c.a]:{},[c.m]:n,[c.d]:t[c.d],[c.e]:!1,$active:!0})}),h()(this,"handleRemove",(e,t,a,n)=>{this.props.change(e,Za(Za({},n),{},{$active:!1,$cache:void 0}));var r=n[c.a].packageInstanceId;r?this.splitPackage(a,e,r).then(()=>{a.remove(t)}).catch(E.a):a.remove(t)}),h()(this,"splitPackage",(e,t,a)=>{var{servicePricingLevels:n}=this.props;return Object(D.c)(Object(Mt.t)(this.props.location.query)),new d.a((e,t)=>{this.packageSplitPromise={resolve:e,reject:t}}).then(()=>{e.forEach((r,o)=>{if(t!==r){var i=e.get(o);i&&i[c.a].packageInstanceId===a&&this.changeCurrentForm(r,{servicePricingLevel:n[i[c.a].splId],packageExtraTime:i.extraTime,packageExtraTimeDescription:i.extraTimeDescription,packageExtraTimeLabel:i.extraTimeLabel},{type:R.a.SERVICE_PRICING_LEVEL},i)}})}).finally(()=>{Object(D.b)(Object(Mt.u)())})}),h()(this,"renderAppointments",({fields:e})=>{var{location:t,appointmentStartOptions:a,nextStartTime:n,roomData:r,servicePricingLevels:o,hints:i,isMatch:s,isValidForm:l,validLastItem:u}=this.props,m=!ne.kb.option(a,"value")(n),p=!(1!==e.length&&(2!==e.length||e.get(1).bookedItem));return P.a.createElement(q.b,null,P.a.createElement(Ct,{mobile:s,"data-qa":"service-list"},e.map((t,a)=>({name:t,field:e.get(a),index:a})).sort((e,t)=>e.field.start-t.field.start).map(({name:n,field:m,index:d},b)=>{var h=P.a.createElement(Ia,{key:n,index:b,name:n,mobile:s,bookingId:m.bookingId,location:t.id,bookedItem:m[c.a],serviceRequiresRoom:O()(o[m[c.a].splId],"service.roomRequired",!1),rooms:O()(r[m[c.a].splId],"rooms",[]),startOptions:a,extraTimeDesc:m[c.g],extraTimeLabel:m[c.h],extraTimeValue:m[c.f],onOfferCatalogItemChange:t=>s?this.onMobileOfferCatalogItemChange(n,t,m,e):this.onOfferCatalogItemChange(n,t,m,e),handleSectionRemove:(m.$cache||!s)&&e.length>1?()=>this.handleRemove(n,d,e,m):void 0,handleExtraTimeRemove:()=>this.handleExtraTimeRemove(n),handleEmployeeChange:()=>this.handleEmployeeChange(n),warnings:i[b],isOnlyItem:1===e.length,cardNoMargin:e.length>1||u});return s?P.a.createElement(q.b,{qaType:"service-item-".concat(m.key),key:m.key},p?d<1&&h:!y()(m[c.a])&&P.a.createElement(Ft,{onAction:()=>this.props.change(n,Za(Za({},m),{},{$cache:Za({},m),$active:!0})),item:m}),m.$active&&P.a.createElement(Ut,{onCancel:()=>{var t=!m.$cache;this.props.change(n,Za(Za({},m.$cache||m),{},{$active:!1,$cache:void 0})),t&&e.remove(d)},onSuccess:()=>{l?(this.props.change(n,Za(Za({},m),{},{$active:!1,$cache:void 0,$packageInit:void 0})),m.$packageInit&&this.addRemainingPackageItems(m.$packageInit.id,m.$packageInit.options)):this.props.submit()},isNew:!m.$cache},Object(S.cloneElement)(h,{cardNoMargin:!1,inModal:!0}))):P.a.createElement(q.b,{qaType:"appointment-item-section",key:m.key},h)}),!s&&u&&P.a.createElement(Tt,{noIcon:!0},P.a.createElement(F.d,{type:"form gray",flex:"row",wrap:"wrap",className:da.a.lastAppointmentSection},P.a.createElement(re.r,{name:c.m,label:Object(M.c)(za()),invalidValueLabel:Object(M.c)(Ga()),parse:Number,className:da.a.fieldStartTime},a.map(({value:e,text:t})=>P.a.createElement("option",{key:e,value:e},t))),P.a.createElement(St.a,{name:c.a,label:Object(M.c)(Wa()),location:t.id,placeholder:Object(M.c)(Ka()),onSelectItem:this.onOfferCatalogItemAdd,disabled:!m,qaType:"hello",className:da.a.fieldService})))),s&&(1===e.length&&u||e.length>1)&&P.a.createElement(L.b,{onAction:this.handleMobileAddService,qaType:"add-another-service-btn"},Object(M.c)(_a())))})}componentDidUpdate(){var{change:e,lastItem:t,nextStartTimeFixed:a}=this.props;a||e(c.m,Object(La.b)(t[c.m]+t[c.c]+(t[c.f]||0)))}render(){var e=this.props,{provider:t,location:a,extraTime:n,extraTimeDescription:r,servicePricingLevelId:o,appointmentStartOptions:i,lastItem:s,nextKey:u,nextStartTime:m,nextStartTimeFixed:p,rooms:d,roomData:b,isMatch:h,change:f,bookingDate:y,repeatValue:g,locationRooms:O,servicePricingLevelRooms:v,servicePricingLevels:E,hints:j,validate:N,isValidForm:S,validLastItem:k,isRoomInherited:w,offerCatalogItems:C,itemsLength:I,onSubmitFail:A,isEdit:R,customer:D,disabledEndDates:x}=e,L=l()(e,["provider","location","extraTime","extraTimeDescription","servicePricingLevelId","appointmentStartOptions","lastItem","nextKey","nextStartTime","nextStartTimeFixed","rooms","roomData","isMatch","change","bookingDate","repeatValue","locationRooms","servicePricingLevelRooms","servicePricingLevels","hints","validate","isValidForm","validLastItem","isRoomInherited","offerCatalogItems","itemsLength","onSubmitFail","isEdit","customer","disabledEndDates"]);return P.a.createElement(q.b,Object(ne.fb)(L),h?P.a.createElement(Nt,{className:da.a.mobileRepeatCard,bookingDate:y,repeatValue:g,change:f}):P.a.createElement(F.d,{type:"plain transparent noPadding"},P.a.createElement(Tt,{noIcon:!0,flex:"row",alignItems:"center",justifyContent:"space-between"},P.a.createElement(ae,{name:c.b,disabledDays:x,qaType:"date-dropdown"}),P.a.createElement(it,{name:c.k,bookingDate:y,isRepeating:!!g.repeatEndDate}))),P.a.createElement(oe.b,{label:Object(M.c)(Qa())}),P.a.createElement(ne.o,{name:c.i,rerenderOnEveryChange:!0,component:this.renderAppointments}),P.a.createElement(oe.b,{label:Object(M.c)(Ya())}),h?P.a.createElement(re.s,{name:c.j,type:"textarea",rows:2,multiline:!0,basis:"100%",placeholder:Object(M.c)(Ua())}):P.a.createElement(Tt,{noIcon:!0,className:da.a.appointmentNote},P.a.createElement(re.s,{name:c.j,type:"textarea",rows:3,multiline:!0,basis:"100%",label:Object(M.c)(Ha()),placeholder:Object(M.c)(Va()),noMargin:!0})),P.a.createElement(Ba,{change:this.props.change}),P.a.createElement(T.b,{path:Mt.d,render:()=>P.a.createElement(ce.a,{onConfirm:this.onConfirmSplit,onClose:this.onCloseSplitModal})}))}},h()(xa,"propTypes",Za(Za({},ne.Q),{},{className:w.a.string,isEdit:w.a.bool})),Da=qa))||Da)||Da)||Da},e0Va:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return p}));var n=a("lSNA"),r=a.n(n),o=a("4qC0"),i=a.n(o),c=a("mwIZ"),s=a.n(c);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t="",a,n={}){var r=0,o=t.toLowerCase(),c=e.reduce((e,t)=>{var{attributes:c,items:l}=t,u=l.filter(e=>function(e,t){return[["name"],["servicePricingLevel","name"],["servicePricingLevel","service","name"],["category","name"]].some(a=>{var n=s()(e,a,"");return i()(n)&&n.toLowerCase().includes(t)})}(e,o)).filter(e=>function({servicePricingLevel:e},t){return!e||e.id===t.id||!e.deletedAt&&!e.service.deletedAt}(e,n));return a&&(u=u.filter(e=>(e.package?e.package.items.map(e=>e.servicePricingLevel):[e.servicePricingLevel]).every(e=>!e||!e.roomRequired||e.rooms.some(e=>e.location===a)))),r+=u.length,e.push({attributes:c,items:u}),e},[]);return{totalLength:r,result:c}}function p(e,t){var a=[],n=0;if(0===t)return a;for(var r=0;r<e.length;r+=1){var{length:o}=e[r].items;if(n+o<=t)a.push(e[r]),n+=o;else{var i=Math.abs(t-n);a.push(u(u({},e[r]),{},{items:e[r].items.slice(0,i)})),n+=i}if(n===t)return a}return a}},kas2:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a("E+oP"),r=a.n(n),o=a("jwng"),i=a("ePPS");function c({description:e,durationInSeconds:t}){var a=Object(o.l)(t),n=a;return r()(e)||(n=Object(i.c)("%{description}, %{duration}",{description:e,duration:a})),n}var s=e=>({description:c(e),name:e.name,retailPrice:e.retailPrice,nonDiscountedPrice:e.nonDiscountedPrice,priceType:e.priceType})},n0Cl:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n,r,o,i=a("VkAN"),c=a.n(i),s=a("lSNA"),l=a.n(s),u=a("mwIZ"),m=a.n(u),p=a("q1tI"),d=a.n(p),b=a("17x9"),h=a.n(b),f=a("/MKj"),y=a("TSYQ"),g=a.n(y),O=a("5ZU+"),v=a("nbpM"),E=a("ePPS"),j=a("Jje6"),N=a("XOuL"),S=a("/Q2I"),P=a("tJFL"),k=a("FAYg"),w=a("ZIP/"),C=a("dvkN"),T=a.n(C);function I(){var e=c()(["View Message"]);return I=function(){return e},e}var A=Object(f.b)((e,t)=>{var a=v.a.getMessageEntryById(e,t.id);return{channel:m()(a,"channel")}})((o=r=class extends p.PureComponent{constructor(...e){super(...e),l()(this,"state",{type:null,loaded:!1,content:null,header:null}),l()(this,"onIframeLoad",()=>{this.setState({loaded:!0})}),l()(this,"getEmbedMessageLink",e=>"".concat(k.SHEDUL_IFRAME_URL,"/notifications/").concat(e,"/embed"))}componentDidMount(){O.a.readMessage(this.props.id).catch(()=>this.setState({type:"embed"})).then(e=>{var t=m()(e,"body.data.attributes.content");t&&this.setState({content:t,header:m()(e,"body.data.attributes.header"),loaded:!0,type:"iframe"})})}render(){var{id:e,channel:t,onClose:a}=this.props,{loaded:n,content:r,header:o,type:i}=this.state,c=t===w.g.EMAIL?"html":"text";return d.a.createElement(j.b,null,d.a.createElement(S.i,{containerClassName:T.a.self,withoutAnimation:!0},d.a.createElement(S.g,{onClose:a},Object(E.c)(I())),d.a.createElement(S.c,{className:g()({[T.a.content]:"iframe"===i})},d.a.createElement(N.a,{className:T.a.loader,fixedMobile:!0,if:!n},"embed"===i&&d.a.createElement(j.b,{as:"iframe",className:T.a.iframe,src:this.getEmbedMessageLink(e),onLoad:this.onIframeLoad}),"iframe"===i&&d.a.createElement("div",{className:T.a.fakePhoneContainer},d.a.createElement(P.b,{withShadow:!0},d.a.createElement(P.a,{type:c,content:r,title:t===w.g.SMS?"":o})))))))}},l()(r,"propTypes",{id:h.a.oneOfType([h.a.number,h.a.string]),channel:h.a.string,onClose:h.a.func.isRequired}),n=o))||n},nDSK:function(e,t,a){"use strict";a.d(t,"b",(function(){return ie})),a.d(t,"a",(function(){return se}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("QILm"),l=a.n(s),u=a("VkAN"),m=a.n(u),p=a("lSNA"),d=a.n(p),b=a("sEfC"),h=a.n(b),f=a("q1tI"),y=a.n(f),g=a("17x9"),O=a.n(g),v=a("TSYQ"),E=a.n(v),j=a("/MKj"),N=a("ePPS"),S=a("nbpM"),P=a("Jje6"),k=a("ZO1O"),w=a("i6OX"),C=a("3wSE"),T=a("kZhr"),I=a("uopA"),A=a("OyCh"),R=a("ITHA"),M=a("gwpz"),D=a("Vows"),x=a("j+da"),q=a("qGVk"),L=a("Xhf8"),F=a("REKf"),B=a("vN+2"),V=a.n(B),H=a("JZM8"),U=a.n(H),Y=a("7GkX"),Q=a.n(Y),_=a("QFIv"),K=a.n(_);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(){var e=m()(["Search client"]);return z=function(){return e},e}var J,Z,X,$=Q()(P.b.propTypes),ee=Object(T.q)({onSubmit:V.a})((o=r=class extends f.PureComponent{constructor(...e){super(...e),d()(this,"focusHandler",e=>{var{onFocus:t}=this.props;"function"==typeof t&&t(e)})}render(){var e=this.props,{className:t,autoFocus:a,onFocus:n,children:r}=e,o=l()(e,["className","autoFocus","onFocus","children"]);return y.a.createElement(P.b,c()({className:E()(K.a.self,t),flex:"row",alignItems:"center",qaType:"customer-input"},U()(o,$)),y.a.createElement(T.l,{name:"searchString",placeholder:Object(N.c)(z()),className:K.a.searchField,onFocus:this.focusHandler,autoFocus:a,grow:1}),r)}},d()(r,"propTypes",G(G({},T.Q),{},{className:O.a.string,children:O.a.node,mobile:O.a.bool,autoFocus:O.a.bool,onFocus:O.a.func})),n=o))||n,te=a("1SFb"),ae=a.n(te);function ne(){var e=m()(["Create new client"]);return ne=function(){return e},e}function re(){var e=m()(["No clients found"]);return re=function(){return e},e}function oe(){var e=m()(["Create new Client"]);return oe=function(){return e},e}var ie=()=>Object(T.gb)(F.b),ce={appear:ae.a.enter,appearActive:ae.a.enterActive,enter:ae.a.enter,enterActive:ae.a.enterActive,exit:ae.a.leave,exitActive:ae.a.leaveActive},se=Object(j.b)(e=>({searchString:Object(F.c)(e),reshedulEnabled:S.a.isReshedulEnabled(e)}),{searchCustomerList:L.b,setSearch:e=>Object(T.L)(F.b,F.a,e)})((X=Z=class extends f.PureComponent{constructor(e){super(e),d()(this,"state",{searchString:"",searchOptions:null,nextOffset:0,hasMore:!0}),d()(this,"menuActions",[{id:"add-client",tooltip:Object(N.c)(oe()),onAction:this.props.handleCreateCustomer,content:y.a.createElement(w.b,{name:"plus"}),qaType:"customer-create"}]),d()(this,"setStateFromProps",e=>{var{searchString:t,isOpen:a}=e;t!==this.state.searchString?this.updateSearchString(t):!a&&t&&this.props.setSearch("")}),d()(this,"updateSearchString",h()((e="")=>{this.setState({searchString:e.trim(),searchOptions:null,nextOffset:0,hasMore:!0,isSearchFetching:!0},this.loadMoreCustomers)},300)),d()(this,"loadMoreCustomers",()=>{var{searchString:e,searchOptions:t,nextOffset:a,hasMore:n}=this.state,{ignoredCustomerIds:r}=this.props;return n&&(this.promise&&this.promise.cancel(),this.promise=this.props.searchCustomerList({query:e,offset:a,limit:50,ignoredCustomerIds:r}).then(e=>{var n=e.length>=50;return this.promise=null,this.setState({searchOptions:(t||[]).concat(e),nextOffset:a+50,hasMore:n,isSearchFetching:!1}),n})),this.promise}),this.setStateFromProps(e)}UNSAFE_componentWillReceiveProps(e){this.setStateFromProps(e)}componentWillUnmount(){this.updateSearchString.cancel()}renderSearchOptions(){var{searchOptions:e,isSearchFetching:t}=this.state,{scrollableView:a}=this.props;return y.a.createElement(A.b,{loadMore:this.loadMoreCustomers,threshold:50,scrollComponent:a},e&&0===e.length&&y.a.createElement(I.a,{icon:"no-results-found",text:Object(N.c)(re())}),t?y.a.createElement(M.a,{grow:1}):y.a.createElement(R.e,{qaType:"customer-list"},y.a.createElement(P.b,{flex:"column",as:x.c,animateEachChild:!0,exit:!1,appear:!0,transitionProps:{classNames:ce,timeout:200}},(e||[]).map(e=>y.a.createElement(D.f,{key:e.id,onAction:()=>this.props.handleSetCustomer(e.id),customer:e,qaType:"customer-search-result-".concat(e.id)})))))}render(){var e=this.props,{className:t,mobile:a,autoFocus:n,isOpen:r,searchString:o,searchCustomerList:i,setSearch:s,handleOpenSearch:u,handleSetCustomer:m,handleCreateCustomer:p,stickySearch:d,scrollableView:b,reshedulEnabled:h}=e,f=l()(e,["className","mobile","autoFocus","isOpen","searchString","searchCustomerList","setSearch","handleOpenSearch","handleSetCustomer","handleCreateCustomer","stickySearch","scrollableView","reshedulEnabled"]);return y.a.createElement(k.d,c()({className:E()(ae.a.self,t),type:"mobile noMargin noPadding",grow:0,shrink:1},f),y.a.createElement(P.b,{grow:0,shrink:0,className:E()(ae.a.header,{[ae.a.sticky]:d})},y.a.createElement(ee,{form:F.b,mobile:a,autoFocus:n,onFocus:u},!h&&a&&p&&y.a.createElement(C.b,{qaType:"customer-create",className:ae.a.createClientIcon,size:"big",color:h?"blue-dark":"fresha-black",name:"add-client",onAction:p})),r&&!a&&p&&y.a.createElement(C.n,{className:ae.a.createClient,onAction:p,qaType:"customer-create"},y.a.createElement(w.b,{name:"plus",size:"standard",marginRight:8}),Object(N.c)(ne()))),r&&this.renderSearchOptions(),h&&a&&y.a.createElement(q.a,{actions:this.menuActions,inModal:!0}))}},d()(Z,"propTypes",{className:O.a.string,mobile:O.a.bool.isRequired,autoFocus:O.a.bool,isOpen:O.a.bool.isRequired,searchString:O.a.string,searchCustomerList:O.a.func.isRequired,setSearch:O.a.func.isRequired,handleOpenSearch:O.a.func,handleSetCustomer:O.a.func.isRequired,handleCreateCustomer:O.a.func,stickySearch:O.a.bool,scrollableView:O.a.oneOfType([O.a.node,O.a.object]),ignoredCustomerIds:O.a.arrayOf(O.a.string),reshedulEnabled:O.a.bool}),J=X))||J},nZp4:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return Xe}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("lSNA"),m=a.n(u),p=a("q1tI"),d=a.n(p),b=a("17x9"),h=a.n(b),f=a("/MKj"),y=a("Ty5D"),g=a("mwIZ"),O=a.n(g),v=a("TSYQ"),E=a.n(v),j=a("PhEd"),N=a("+Gzo"),S=a("sQHA"),P=a("dwNy"),k=a("X67z"),w=a("ePPS"),C=a("5ZU+"),T=a("XOD0"),I=a("nbpM"),A=a("LyRY"),R=a("/pl8"),M=a("TSDZ"),D=a("UtX9"),x=a("Cw5A"),q=a("Jje6"),L=a("Qs7Y"),F=a("aAma"),B=a("dhJQ"),V=a("3wSE"),H=a("9AV2"),U=a("ZO1O"),Y=a("n0Cl"),Q=a("nIiI"),_=a("1Ggn"),K=a("c0W2"),W=a("5KxP"),G=a("pKoe"),z=a("k2UN"),J=a("Pl0e"),Z=a("gvXR"),X=a("LBpe"),$=a("DMK7"),ee=a("SOSd"),te=a("nnWL"),ae=a("uVYG"),ne=a("+/cG"),re=a("yDb1"),oe=a("1HG2"),ie=a("q7JJ"),ce=a("CODo"),se=a("Xif8"),le=a("1jQf"),ue=a("HGFs"),me=a.n(ue);function pe(){var e=l()(["View Appointment"]);return pe=function(){return e},e}function de(){var e=l()(["at"]);return de=function(){return e},e}function be(){var e=l()(["Appointment History"]);return be=function(){return e},e}function he(){var e=l()(["Appointment Note"]);return he=function(){return e},e}function fe(){var e=l()(["View Invoice"]);return fe=function(){return e},e}function ye(){var e=l()(["Complete Now"]);return ye=function(){return e},e}function ge(){var e=l()(["Pay Now"]);return ge=function(){return e},e}function Oe(){var e=l()(["Pay Now"]);return Oe=function(){return e},e}function ve(){var e=l()(["Checkout"]);return ve=function(){return e},e}function Ee(){var e=l()(["Checkout"]);return Ee=function(){return e},e}function je(){var e=l()(["Undo No Show"]);return je=function(){return e},e}function Ne(){var e=l()(["No Show"]);return Ne=function(){return e},e}function Se(){var e=l()(["Cancel"]);return Se=function(){return e},e}function Pe(){var e=l()(["Ask client to confirm"]);return Pe=function(){return e},e}function ke(){var e=l()(["Reschedule"]);return ke=function(){return e},e}function we(){var e=l()(["Edit Appointment"]);return we=function(){return e},e}function Ce(){var e=l()(["View Invoice"]);return Ce=function(){return e},e}function Te(){var e=l()(["Edit Notes"]);return Te=function(){return e},e}function Ie(){var e=l()(["Rebook"]);return Ie=function(){return e},e}function Ae(){var e=l()(["More options"]);return Ae=function(){return e},e}function Re(){var e=l()(["You do not have permission to apply payments at this location"]);return Re=function(){return e},e}function Me(){var e=l()(["You do not have permission to checkout at this location"]);return Me=function(){return e},e}function De(){var e=l()(["There was an error when changing appointment status"]);return De=function(){return e},e}function xe(){var e=l()(["Past appointments can't be cancelled, use no show action instead"]);return xe=function(){return e},e}function qe(){var e=l()(["Upcoming appointments can't be set to no show, use cancel action instead"]);return qe=function(){return e},e}function Le(){var e=l()(["Appointment set to New"]);return Le=function(){return e},e}function Fe(){var e=l()(["Appointment set to No Show"]);return Fe=function(){return e},e}function Be(){var e=l()(["Completed"]);return Be=function(){return e},e}function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ue=[S.v.PENDING,S.v.UNCONFIRMED,S.v.CONFIRMED,S.v.ARRIVED,S.v.STARTED],Ye=[S.v.COMPLETED,S.v.NO_SHOW],Qe=Ue,_e=[S.v.COMPLETED,S.v.NO_SHOW,S.v.CANCELLED],Ke=_e,We=He(He({},ie.a),{},{[S.v.COMPLETED]:{label:Object(w.c)(Be())}}),Ge=[Object(w.c)(Fe())],ze=[Object(w.c)(Le())],Je=[Object(w.c)(qe())],Ze=[Object(w.c)(xe())],Xe=Object(B.g)()(n=Object(f.b)((e,{match:{params:{id:t}={}}={}})=>{var a=I.a.getAppointmentSummary(e);return{providerMoment:I.a.providerMoment(e),bookingId:t,appointmentSummary:a,haveAnyItems:a&&a.bookings&&a.bookings.length>0||!1,showConfirmNoShowModal:J.k(e),currencyCode:I.a.getProvider(e).currencyCode,isMarketplaceAppointmentConfirmationUsable:I.a.isMarketplaceAppointmentConfirmationUsable(e),isNoShowFeeApplicable:J.j(e),isDistributedAppointmentHistoryLogEnabled:I.a.isDistributesAppointmentHistoryLogEnabled(e),isReshedulEnabled:I.a.isReshedulEnabled(e)}},{readAppointmentSummary:z.h,readBookingHistory:z.i,readAppointmentHistory:z.g,requestMarketplaceAppointmentConfirmation:z.k})((o=r=class extends p.PureComponent{constructor(...e){super(...e),m()(this,"state",{isLoaded:!1,isError:!1,customerPickerActive:!1,changingBookingStatus:!1}),m()(this,"getToastLabelOnStatusChange",e=>Object(w.c)("Appointment set to %{status}",{status:We[e].label})),m()(this,"handleRebook",()=>{var{appointmentSummary:{primaryBooking:e,bookings:t}}=this.props;t.some(({packageInstance:e})=>e&&e.outdated)?C.a.addErrorToast(Z.f):Object(T.c)(Object(N.H)(e.id))}),m()(this,"handleEditNote",()=>{var e=K.r(this.props.appointmentSummary.primaryBooking.id);Object(T.c)(e)}),m()(this,"handleViewInvoice",()=>{var{appointmentSummary:{saleId:e}}=this.props;e&&Object(T.f)(W.h(e))}),m()(this,"handleEditBooking",()=>{Object(T.f)(K.q(this.props.bookingId))}),m()(this,"handleReschedule",()=>{var{appointmentSummary:{primaryBooking:e}}=this.props;Object(T.c)(Object(N.I)(e.id))}),m()(this,"handleChangeStatus",e=>{this.state.changingBookingStatus||(this.setState({changingBookingStatus:!0}),z.c(this.props.appointmentSummary.primaryBooking.id,e).then(()=>{C.a.addGlobalSuccessToast(this.getToastLabelOnStatusChange(e)),this.handleExit()},()=>{C.a.addErrorToast(Object(w.c)(De()))}).finally(()=>{this.setState({changingBookingStatus:!1})}))}),m()(this,"handleSetNoShow",()=>{var{appointmentSummary:e,showConfirmNoShowModal:t,isNoShowFeeApplicable:a,providerMoment:n}=this.props,r=n(),o=e.primaryBooking.startMoment,i=r.clone().add(-24,"hours");r.isAfter(o)?t&&(o.isAfter(i)||a)?Object(T.f)(K.o(this.props.bookingId)):(this.setState({changingBookingStatus:!0}),z.c(this.props.appointmentSummary.primaryBooking.id,S.v.NO_SHOW).then(()=>{Object(T.b)(N.z)}),C.a.addGlobalSuccessToast(Ge)):C.a.addErrorToast(Je)}),m()(this,"handleUndoNoShow",()=>{var{appointmentSummary:e}=this.props;this.setState({changingBookingStatus:!0}),z.c(e.primaryBooking.id,S.v.UNCONFIRMED).then(()=>{this.setState({changingBookingStatus:!1}),C.a.readBooking(e.primaryBooking.id),C.a.addSuccessToast(ze)})}),m()(this,"handleCancelBooking",()=>{var{appointmentSummary:e,providerMoment:t}=this.props,a=t(),n=e.primaryBooking.endMoment;a.isSameOrBefore(n,"day")?Object(T.f)(K.n(this.props.bookingId)):C.a.addErrorToast(Ze)}),m()(this,"handleExit",()=>{Object(T.b)("/")}),m()(this,"handleCustomerPickerActive",e=>{this.setState({customerPickerActive:e})}),m()(this,"handleCheckout",()=>{var{location:e}=this.props.appointmentSummary;e.deletedAt?C.a.addErrorToast(Object(w.c)(Me())):Object(T.f)(K.s(this.props.bookingId,e.id))}),m()(this,"handlePayNow",()=>{var{location:e,saleId:t}=this.props.appointmentSummary;if(e.deletedAt)C.a.addErrorToast(Object(w.c)(Re()));else{var{isMatch:a}=this.props;Object(T.f)(W.l(t,e.id,a))}}),m()(this,"handleCompleteNow",()=>{this.handleChangeStatus(S.v.COMPLETED)}),m()(this,"deactivateCustomerPicker",()=>{this.handleCustomerPickerActive(!1)}),m()(this,"openHistoryMessageModal",e=>{this.setState({openedHistoryMessageId:e})}),m()(this,"closeHistoryMessageModal",()=>{this.setState({openedHistoryMessageId:null})})}componentDidMount(){this.fetchAppointment(),C.a.readNoShowSettings()}componentDidUpdate(t){this.props.bookingId!==t.bookingId&&this.fetchAppointment(),this.props.appointmentSummary&&!this.state.isError&&C.a.readRoomList({locationId:this.props.appointmentSummary.location.id}).then(()=>{this.setState({isLoaded:!0,isError:!1})}).catch(t=>{e.console.error(t),this.setState({isLoaded:!0,isError:!0})})}componentWillUnmount(){C.a.destroyAppointmentSummary()}fetchAppointment(){var{bookingId:e,readAppointmentSummary:t,readBookingHistory:a,readAppointmentHistory:n,isDistributedAppointmentHistoryLogEnabled:r}=this.props;t(e).then((...e)=>r?n(...e):a(...e)).catch(()=>{this.setState({isLoaded:!0,isError:!0})})}renderFooter(){var{appointmentSummary:e,haveAnyItems:t,isMarketplaceAppointmentConfirmationUsable:a,isReshedulEnabled:n}=this.props,r=t?e.primaryBooking.status:S.v.PENDING,o=r===S.v.COMPLETED&&e.saleId,i=Ue.includes(r),c=Qe.includes(r),s=Ke.includes(r),l=Ye.includes(r),u=r===S.v.NO_SHOW,m=null!=e.saleId,p=O()(e.primaryBooking,"sale.paymentStatus"),b=!m&&r===S.v.COMPLETED,h=!_e.includes(r)||b,f=p===P.c.PAID;return d.a.createElement(R.b,{keys:[k.a.CAN_BOOK_APPOINTMENTS,k.a.CAN_CHECKOUT_SALES]},({canBookAppointments:t,canCheckoutSales:b})=>d.a.createElement(q.b,null,d.a.createElement(oe.a,{duration:e.summary.totalTime/1e3,price:e.summary.totalPrice,priceType:e.summary.priceType}),d.a.createElement(q.b,{flex:"row",justifyContent:"space-between",className:me.a.buttons},d.a.createElement(M.g,{label:Object(w.c)(Ae()),qaType:"more-options-button",above:!0,stretch:!0},s&&d.a.createElement(M.c,{onAction:Object(R.c)(t,this.handleRebook),qaType:"rebook-drop-down"},Object(w.c)(Ie())),l&&d.a.createElement(M.c,{onAction:Object(R.c)(t,this.handleEditNote),qaType:"edit-notes-drop-down"},Object(w.c)(Te())),o&&p!==P.c.PAID&&d.a.createElement(M.c,{onAction:this.handleViewInvoice,qaType:"view-invoice-button"},Object(w.c)(Ce())),i&&d.a.createElement(M.c,{onAction:Object(R.c)(t,this.handleEditBooking),qaType:"edit-appointment-drop-down"},Object(w.c)(we())),c&&d.a.createElement(M.c,{onAction:Object(R.c)(t,this.handleReschedule),qaType:"reschedule-drop-down"},Object(w.c)(ke())),a&&d.a.createElement(M.c,{onAction:Object(R.c)(t,()=>this.props.requestMarketplaceAppointmentConfirmation(this.handleExit)),qaType:"request-resend-confirmation"},Object(w.c)(Pe())),h&&d.a.createElement(M.b,{onAction:Object(R.c)(t,this.handleCancelBooking),qaType:"cancel-drop-down"},Object(w.c)(Se())),h&&d.a.createElement(M.b,{onAction:Object(R.c)(t,this.handleSetNoShow),qaType:"no-show-drop-down"},Object(w.c)(Ne())),u&&d.a.createElement(M.c,{onAction:Object(R.c)(t,this.handleUndoNoShow),qaType:"undo-no-show-drop-down"},Object(w.c)(je()))),!m&&(n?d.a.createElement(j.Button,{variant:"primary",onAction:Object(R.c)(b,this.handleCheckout),qaType:"checkout-button"},Object(w.c)(Ee())):d.a.createElement(V.f,{onAction:Object(R.c)(b,this.handleCheckout),qaType:"checkout-button"},Object(w.c)(ve()))),m&&!f&&(n?d.a.createElement(j.Button,{variant:"primary",onAction:Object(R.c)(b,this.handlePayNow),qaType:"pay-now-button"},Object(w.c)(Oe())):d.a.createElement(V.f,{onAction:Object(R.c)(b,this.handlePayNow),qaType:"pay-now-button"},Object(w.c)(ge()))),m&&f&&!_e.includes(r)&&d.a.createElement(V.f,{onAction:Object(R.c)(b,this.handleCompleteNow),qaType:"complete-now-button"},Object(w.c)(ye())),o&&f&&d.a.createElement(V.a,{onAction:this.handleViewInvoice},Object(w.c)(fe())))))}render(){var{isLoaded:e,isError:t,customerPickerActive:a,openedHistoryMessageId:n}=this.state;if(!e||t)return d.a.createElement(D.a,{headerSecondaryAction:this.handleExit,type:"white",error:t});var{isMatch:r,appointmentSummary:o,haveAnyItems:i,currencyCode:s,isReshedulEnabled:l}=this.props,{changingBookingStatus:u}=this.state,m=i?o.primaryBooking.status:S.v.PENDING,p=m===S.v.COMPLETED,b=i&&d.a.createElement(ee.a,{className:me.a.status,booking:o.primaryBooking,isPending:u,onChangeStatus:this.handleChangeStatus,mobile:r}),h=d.a.createElement(q.b,{flex:"column"},r&&b,d.a.createElement(x.b,{customer:o.customer,onSetActive:r?void 0:this.handleCustomerPickerActive,isActive:r?void 0:a},!r&&!p&&b,i&&d.a.createElement(te.a,{sale:o.primaryBooking.sale,bookingStatus:m,currencyCode:s}),!r&&d.a.createElement(H.b,{marginTop:"auto"},this.renderFooter()))),f=r?i&&d.a.createElement(ce.a,{appointmentSummary:o,closeHistoryMessageModal:this.closeHistoryMessageModal,openHistoryMessageModal:this.openHistoryMessageModal,openedHistoryMessageId:n}):d.a.createElement(q.b,{className:me.a.leftPanel},i&&d.a.createElement(U.d,{type:"mobile",className:me.a.card},d.a.createElement(q.b,{className:me.a.date},l?d.a.createElement(j.Text,{type:"fresha-h2",color:"gray100",className:E()(me.a.startDate,me.a.dateHeader),qaType:"appointment-start-date"},o.startDate.format("dddd, D MMM YYYY")):d.a.createElement(L.d,{type:"landing-title",weight:L.c.LIGHT,className:E()(me.a.startDate,me.a.dateHeader),qaType:"appointment-start-date"},o.startDate.format("dddd, D MMM YYYY")),o.recurrenceInfo&&(l?d.a.createElement(j.Text,{qaType:"appointment-recurrence-info",type:"fresha-caption",color:"gray100"},Object(G.e)(o.recurrenceInfo)):d.a.createElement(L.d,{qaType:"appointment-recurrence-info"},Object(G.e)(o.recurrenceInfo)))),d.a.createElement($.a,{items:o.bookings,summary:o.summary}),o.primaryBooking.notes&&d.a.createElement(q.b,{className:me.a.notes},d.a.createElement(L.d,{type:"inherit",className:me.a.description},o.primaryBooking.notes))),i&&o.primaryBooking.notes&&d.a.createElement(X.a,{label:Object(w.c)(he()),className:me.a.card},l?d.a.createElement(j.Text,{type:"fresha-caption",color:"gray100"},o.primaryBooking.notes):d.a.createElement(L.d,{type:"inherit",className:me.a.description},o.primaryBooking.notes)),i&&o.bookingHistory&&d.a.createElement(X.a,{label:Object(w.c)(be()),className:me.a.card},(o.bookingHistory||[]).map(e=>d.a.createElement(ae.a,{key:e.id,appointmentSummary:o,onNotificationClick:this.openHistoryMessageModal,entry:e})),n&&d.a.createElement(Y.a,{id:n,onClose:this.closeHistoryMessageModal}))),g=r?{header:o.startDate.format("D MMM YYYY"),subheader:d.a.createElement(Q.a,{separator:Object(w.c)(de()),dateFormat:"dddd",date:o.startDate,formatTime:!0,"data-qa":"appointment-date"}),subheaderCollapsible:!0,noBottomPadding:!0}:{};return d.a.createElement(q.b,null,d.a.createElement(y.b,{path:K.e,render:()=>d.a.createElement(H.c,c()({header:Object(w.c)(pe()),panel:h,footer:r&&this.renderFooter(),type:"white",headerOnAction:this.handleExit,overlayAction:!r&&a?this.deactivateCustomerPicker:void 0},g),d.a.createElement(F.b,{alignItems:"center",noPadding:!0},f))}),d.a.createElement(y.b,{path:K.f,exact:!0,component:le.a}),d.a.createElement(y.b,{path:K.g,exact:!0,component:se.a}),d.a.createElement(y.b,{path:K.h,exact:!0,component:re.a}),d.a.createElement(y.b,{path:K.i,exact:!0,component:ne.a}))}},m()(r,"propTypes",{isMatch:h.a.bool,bookingId:h.a.string.isRequired,appointmentSummary:h.a.shape({customer:h.a.object,policy:h.a.shape({noShowFeeRate:h.a.number}),primaryBooking:h.a.shape({id:h.a.string.isRequired,startMoment:h.a.object,endMoment:h.a.object,sale:h.a.object,status:h.a.string,notes:h.a.string}).isRequired,summary:h.a.shape({totalTime:h.a.number,totalPrice:h.a.number,priceType:h.a.oneOf(Object.values(_.a))}),location:h.a.shape(A.a.propTypes),saleId:h.a.string,sale:h.a.object,startDate:h.a.object,recurrenceInfo:h.a.object,bookings:h.a.array,bookingHistory:h.a.array}),readAppointmentSummary:h.a.func.isRequired,readBookingHistory:h.a.func.isRequired,readAppointmentHistory:h.a.func.isRequired,haveAnyItems:h.a.bool.isRequired,isNoShowFeeApplicable:h.a.bool.isRequired,showConfirmNoShowModal:h.a.bool,currencyCode:h.a.string,isMarketplaceAppointmentConfirmationUsable:h.a.bool,isDistributedAppointmentHistoryLogEnabled:h.a.bool,requestMarketplaceAppointmentConfirmation:h.a.func,providerMoment:h.a.func.isRequired,isReshedulEnabled:h.a.bool}),n=o))||n)||n}).call(this,a("yLpj"))},nnWL:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var n,r,o,i=a("VkAN"),c=a.n(i),s=a("lSNA"),l=a.n(s),u=a("q1tI"),m=a.n(u),p=a("17x9"),d=a.n(p),b=a("ePPS"),h=a("yk2N"),f=a("dhJQ"),y=a("sQHA"),g=a("dwNy"),O=a("5KxP"),v=a("Jje6"),E=a("3wSE"),j=a("uopA"),N=a("Vows"),S=a("QXy2"),P=a("RxLZ"),k=a.n(P);function w(){var e=c()(["Appointment Completed"]);return w=function(){return e},e}function C(){var e=c()(["No invoice issued yet"]);return C=function(){return e},e}var T=Object(f.g)()((o=r=class extends u.PureComponent{getStatusIcon(){var{sale:e}=this.props,t="invoice-incomplete";if(e){var{paymentStatus:a}=e;switch(a){case g.c.PAID:t="invoice-complete";break;default:t="invoice-incomplete"}}else t="invoice";return t}getInvoiceLinkOrText(){var{isMatch:e,sale:t}=this.props;return e?t.receiptNumber:m.a.createElement(E.n,{key:"link",className:k.a.invoiceLink,linkTo:Object(O.h)(t.id),replace:!0},"".concat(t.receiptNumber))}getInvoiceStatusText(){var{isMatch:e,sale:t,currencyCode:a}=this.props,n="";if(t){var{paymentStatus:r,invoiceType:o,totalPayments:i}=t,c=this.getInvoiceLinkOrText(),s={price:Object(h.h)(i,{currencyCode:a}),date:t.invoiceDate.format("dddd, D MMM YYYY"),invoiceNoElement:c};switch(r){case g.c.PAID:switch(o){case g.d.CANCELLATION:n=Object(b.c)("Late cancellation fee of %{price} paid on %{date} with invoice %{invoiceNoElement}",s);break;case g.d.NO_SHOW:n=Object(b.c)("No show fee of %{price} paid on %{date} with invoice %{invoiceNoElement}",s);break;default:n=e?Object(b.c)("Fully paid invoice %{invoiceNoElement}",{invoiceNoElement:c}):Object(b.c)("Full payment received on %{date} with invoice %{invoiceNoElement}",s)}break;case g.c.PART_PAID:n=Object(b.c)("Part-paid invoice %{invoiceNoElement}",{invoiceNoElement:c});break;case g.c.UNPAID:n=Object(b.c)("Unpaid invoice %{invoiceNoElement}",{invoiceNoElement:c})}}else n=Object(b.c)(C());return n}renderMobile(){var{sale:e}=this.props,t=this.getInvoiceStatusText();return e?m.a.createElement(N.x,{linkTo:Object(O.h)(e.id),replace:!0},t):null}renderDesktop(){var{bookingStatus:e}=this.props,t=e===y.v.COMPLETED,a=this.getInvoiceStatusText(),n=this.getStatusIcon();return m.a.createElement(j.a,{icon:n,name:t&&Object(b.c)(w()),text:a&&m.a.createElement(v.b,{as:"span"},a)})}render(){var{isMatch:e}=this.props;return e?this.renderMobile():this.renderDesktop()}},l()(r,"propTypes",{isMatch:d.a.bool,sale:d.a.shape({invoiceDate:S.b,paymentStatus:d.a.oneOf(g.a),receiptNumber:d.a.string,id:d.a.string,invoiceType:d.a.string,totalPayments:d.a.number}),bookingStatus:d.a.string,currencyCode:d.a.string}),n=o))||n},q7JJ:function(e,t,a){"use strict";a.d(t,"a",(function(){return C})),a.d(t,"b",(function(){return T}));var n=a("pVnL"),r=a.n(n),o=a("QILm"),i=a.n(o),c=a("lSNA"),s=a.n(c),l=a("VkAN"),u=a.n(l),m=a("q1tI"),p=a.n(m),d=a("17x9"),b=a.n(d),h=a("sQHA"),f=a("X67z"),y=a("ePPS"),g=a("/pl8"),O=a("TSDZ"),v=a("Jje6"),E=a("i6OX"),j=a("nKR1"),N=a.n(j);function S(){var e=u()(["Started"]);return S=function(){return e},e}function P(){var e=u()(["Arrived"]);return P=function(){return e},e}function k(){var e=u()(["Confirmed"]);return k=function(){return e},e}function w(){var e=u()(["New Appointment"]);return w=function(){return e},e}var C={[h.v.UNCONFIRMED]:{label:Object(y.c)(w()),icon:"status-unconfirmed"},[h.v.CONFIRMED]:{label:Object(y.c)(k()),icon:"status-confirmed"},[h.v.ARRIVED]:{label:Object(y.c)(P()),icon:"status-arrived"},[h.v.STARTED]:{label:Object(y.c)(S()),icon:"status-started"}};class T extends m.PureComponent{render(){var e=this.props,{status:t,onChange:a,isPending:n}=e,o=i()(e,["status","onChange","isPending"]);return p.a.createElement(g.b,{keys:f.a.CAN_BOOK_APPOINTMENTS},e=>p.a.createElement(O.g,r()({label:p.a.createElement(v.b,{flex:"row",basis:"100%"},p.a.createElement(v.b,{className:N.a.dropdownButtonIcon,as:E.b,name:C[t].icon,color:"original",size:"medium"}),p.a.createElement(v.b,{grow:1},C[t].label)),isPending:n,stretch:!0,rounded:!0,justifyContent:"space-between",basis:270,forceShowArrow:!0},o),Object.entries(C).filter(([e])=>e!==t).map(([t,{label:n,icon:r}])=>p.a.createElement(O.c,{key:t,onAction:Object(g.c)(e,()=>a(t)),justifyContent:"flex-start"},p.a.createElement(v.b,{flex:"row",basis:"100%"},p.a.createElement(v.b,{className:N.a.dropdownActionIcon,as:E.b,key:"icon",name:r,color:"original",size:"medium"}),p.a.createElement(v.b,{grow:1,className:N.a.label},n))))))}}s()(T,"propTypes",{status:b.a.oneOf(Object.values(h.v)).isRequired,onChange:b.a.func.isRequired,isPending:b.a.bool})},qGVk:function(e,t,a){"use strict";a.d(t,"b",(function(){return q})),a.d(t,"a",(function(){return ee}));var n=a("pVnL"),r=a.n(n),o=a("QILm"),i=a.n(o),c=a("lSNA"),s=a.n(c),l=a("lSCD"),u=a.n(l),m=a("pZt1"),p=a.n(m),d=a("q1tI"),b=a.n(d),h=a("17x9"),f=a.n(h),y=a("TSYQ"),g=a.n(y),O=a("pQ8y"),v=a("VeD8"),E=a("JqEL");class j extends d.PureComponent{constructor(e){super(e),this.state={isRendered:!1}}componentDidMount(){this.timeout=setTimeout(()=>this.setState({isRendered:!0}),this.props.delay)}componentWillUnmount(){Object(E.d)(this.timeout)}render(){return this.state.isRendered?d.Children.only(this.props.children):null}}s()(j,"propTypes",{delay:f.a.number,children:f.a.node}),s()(j,"defaultProps",{delay:500});a("uHid");var N=a("DTRD"),S=a("jXSx"),P=a("i6OX"),k=a("Jje6"),w=a("9wjN"),C=a("ww3E"),T=a("R3Cl"),I=a.n(T);class A extends d.Component{constructor(e){super(e),this.state={showTooltip:!1},this.handleActionRef=this.handleActionRef.bind(this)}UNSAFE_componentWillMount(){this.props.tooltip&&(this.timeout=setTimeout(()=>{this.setState({showTooltip:!0})},300))}componentWillUnmount(){clearTimeout(this.timeout)}handleActionRef(e){if(Object(E.h)(e)){"object"==typeof this.actionRefListener&&this.actionRefListener.remove();var{action:t}=this.props;this.actionRefListener=Object(E.a)(e,"touchstart",e=>{e.preventDefault(),"function"==typeof t&&t(e)},{passive:!1})}}render(){var e=this.props,{content:t,disabled:a,tooltip:n,expanded:o,action:c,qaType:s,buttonClassName:l,noFillIcon:u}=e,m=i()(e,["content","disabled","tooltip","expanded","action","qaType","buttonClassName","noFillIcon"]),{showTooltip:p}=this.state;return b.a.createElement(k.b,{className:g()(I.a.self,{[I.a.expanded]:o,[I.a.whiteIcon]:!u}),onClick:c,selfRef:this.handleActionRef,qaType:s},b.a.createElement(C.a,r()({disabled:a,type:"info float",className:g()(I.a.action,l),noFillIcon:u},m),t),b.a.createElement(v.a,null,o&&p?b.a.createElement(O.a,{classNames:{enter:I.a.tooltipAppear,enterActive:I.a.tooltipAppearActive,exit:I.a.tooltipLeave,exitActive:I.a.tooltipLeaveActive},timeout:200},b.a.createElement("div",{className:I.a.tooltip},n)):null))}}s()(A,"propTypes",{content:f.a.node.isRequired,disabled:f.a.bool,expanded:f.a.bool,tooltip:f.a.string,action:f.a.func,qaType:k.b.propTypes.qaType,buttonClassName:f.a.string,noFillIcon:f.a.bool});var R=a("tdHr"),M=a.n(R);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}class q extends b.a.PureComponent{constructor(...e){super(...e),s()(this,"state",{isOpen:!1,showOverlay:!1}),s()(this,"onRootActionTouchStart",()=>{this.setState({showOverlay:!0})}),s()(this,"onRootActionMouseEnter",()=>{this.props.disabled||(this.setState({showOverlay:!1}),this.showActions())}),s()(this,"hideActions",()=>{this.setState({isOpen:!1})}),s()(this,"showActions",()=>{this.setState({isOpen:!0})}),s()(this,"renderActions",()=>this.props.actions.map((e,t)=>{var a=t,{onAction:n}=e,o=i()(e,["onAction"]);return b.a.createElement(O.a,{key:a,classNames:{enter:M.a.actionEnter,enterActive:M.a.actionEnterActive,exit:M.a.actionLeave,exitActive:M.a.actionLeaveActive},timeout:{enter:250,exit:200}},b.a.createElement(A,r()({},o,{action:()=>{this.hideActions(),"function"==typeof n&&n()},expanded:!0})))}))}UNSAFE_componentWillReceiveProps(e){!this.props.disabled&&e.disabled&&this.setState({isOpen:!1,showOverlay:!1})}get isOpen(){return this.state.isOpen&&this.state.showOverlay}render(){var{rootAction:e,disabled:t,noFillRootIcon:a,floatClassName:n,transitionSelfAppear:o,transitionSelfAppearActive:c,inModal:s}=this.props,{isOpen:l}=this.state,{onAction:m}=e,d=i()(e,["onAction"]);return b.a.createElement(S.b,{stopActionEvents:!1},b.a.createElement(N.a,{show:this.isOpen,onAction:this.hideActions},b.a.createElement(j,{delay:800},b.a.createElement(v.a,{appear:!0,enter:!1,exit:!1},b.a.createElement(O.a,{classNames:{appear:o,appearActive:c},timeout:500},b.a.createElement(k.b,{className:g()(M.a.self,n,{[M.a.mobile]:Object(w.f)(),[M.a.inModal]:s}),qaType:"floating-menu-button"},b.a.createElement(v.a,{appear:!0,enter:!1},l||t?null:b.a.createElement(O.a,{classNames:{appear:M.a.rootActionEnter,appearActive:M.a.rootActionEnterActive,exit:M.a.rootActionLeave,exitActive:M.a.rootActionLeaveActive},timeout:200},b.a.createElement(A,r()({action:()=>{if(this.props.actions.length>1)this.showActions();else{var e=p()(this.props.actions);e&&u()(e.onAction)&&e.onAction()}"function"==typeof m&&m()},onMouseEnter:this.onRootActionMouseEnter,onTouchStart:this.onRootActionTouchStart,noFillIcon:a,"data-qa":"floating-root-menu-button"},d)))))))),b.a.createElement("div",{className:g()(M.a.self,M.a.open,{[M.a.mobile]:Object(w.f)(),[M.a.inModal]:s}),onMouseLeave:this.hideActions},b.a.createElement(v.a,null,l&&this.renderActions()))))}}s()(q,"defaultProps",{rootAction:{content:b.a.createElement(P.b,{name:"plus"})},transitionSelfAppear:M.a.selfAppear,transitionSelfAppearActive:M.a.selfAppearActive}),s()(q,"propTypes",{actions:f.a.arrayOf(f.a.shape(x(x({},A.propTypes),{},{content:f.a.node,onAction:f.a.func}))).isRequired,rootAction:f.a.shape(A.propTypes),disabled:f.a.bool,noFillRootIcon:f.a.bool,floatClassName:f.a.string,transitionSelfAppear:f.a.string,transitionSelfAppearActive:f.a.string,inModal:f.a.bool});var L,F,B,V=a("VkAN"),H=a.n(V),U=a("/MKj"),Y=a("PhEd"),Q=a("ePPS"),_=a("dhJQ"),K=a("3wSE"),W=a("TSDZ"),G=a("nbpM"),z=a("3+wM"),J=a.n(z);function Z(){var e=H()(["Add New"]);return Z=function(){return e},e}function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=Object(_.g)()(L=Object(U.b)(e=>({isReshedulEnabled:G.a.isReshedulEnabled(e)}))((B=F=class extends d.PureComponent{render(){var{isMatch:e,hideOnDesktop:t,hideOnMobile:a,iconOnlyOnDesktop:n,actions:r,label:o,className:i,inModal:c,isReshedulEnabled:s,buttonSize:l}=this.props;if(e&&!a)return b.a.createElement(q,{actions:r,inModal:c});if(!e&&!t){var u=r.slice();u.reverse();var m={as:Y.Button,variant:"primary",size:l,iconSize:"16",iconColor:"white",wrapChildren:!0,showRipple:!1};if(u.length>1){var p=$(n?{label:null,as:K.f,showIcon:!0,icon:"plus",size:"large",className:g()(J.a.self,J.a.iconOnly,i),iconClassName:J.a.iconOnlyIcon,align:"right",qaType:"floating-menu-button"}:{label:o,as:K.f,showIcon:!1,className:g()(J.a.self,i),align:"right",qaType:"floating-menu-button"},s?m:{});return b.a.createElement(W.g,p,u.map(({id:e,onAction:t,tooltip:a,linkTo:n,qaType:r})=>b.a.createElement(W.c,{key:e,onAction:t,linkTo:n,qaType:r},a)))}if(1===r.length){var{tooltip:d,onAction:h}=r[0],f=n?{showIcon:!0,icon:"plus",size:"large",className:g()(J.a.iconOnly,i),iconClassName:J.a.iconOnlyIcon,onAction:h,qaType:"floating-menu-button"}:{showIcon:!1,onAction:h,className:i,qaType:"floating-menu-button"};return b.a.createElement(K.f,f,n?null:d)}return null}return null}},s()(F,"propTypes",{isMatch:f.a.bool,hideOnDesktop:f.a.bool,hideOnMobile:f.a.bool,iconOnlyOnDesktop:f.a.bool,actions:f.a.arrayOf(f.a.object),label:f.a.string,className:f.a.string,inModal:f.a.bool,isReshedulEnabled:f.a.bool,buttonSize:f.a.oneOf(["small","default","large"])}),s()(F,"defaultProps",{hideOnDesktop:!1,hideOnMobile:!1,iconOnlyOnDesktop:!1,actions:[],label:Object(Q.c)(Z()),buttonSize:"default"}),L=B))||L)||L},rb4H:function(e,t,a){"use strict";a.d(t,"a",(function(){return le})),a.d(t,"b",(function(){return ye}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("mwIZ"),m=a.n(u),p=a("q1tI"),d=a.n(p),b=a("/MKj"),h=a("17x9"),f=a.n(h),y=a("5ZU+"),g=a("XOD0"),O=a("ePPS"),v=a("kZhr"),E=a("dhJQ"),j=a("Qs7Y"),N=a("3wSE"),S=a("tPh7"),P=a("/Q2I"),k=a("1UfZ"),w=a("dsWg"),C=a("gQMU"),T=a.n(C),I=a("ZO1O"),A=a("uZ2f");function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(){var e=l()(["Note"]);return D=function(){return e},e}function x(){var e=l()(["Add note"]);return x=function(){return e},e}function q(){var e=l()(["Other"]);return q=function(){return e},e}function L(){var e=l()(["Select blocking reason"]);return L=function(){return e},e}function F(){var e=l()(["Blocking reason"]);return F=function(){return e},e}function B(){var e=l()(["Select blocking reason"]);return B=function(){return e},e}var V,H,U,Y="customer-block-form",Q="blockReason",_="note",K=Object(v.W)(Y),W=[v.kb.required(T()(_)),v.kb.maxLength(100)],G=Object(v.q)({form:Y,destroyOnUnmount:!1})(n=Object(b.b)(e=>({blockReason:m()(K(e),"blockReason")}))((o=r=class extends p.PureComponent{render(){var{blockReason:e,blockReasons:t,mobile:a}=this.props;return d.a.createElement(I.d,{type:"plain popup-form bottom-space"},d.a.createElement(A.r,{name:Q,label:a?Object(O.c)(B()):Object(O.c)(F()),invalidValueLabel:a?"":Object(O.c)(L()),xpos:a?"":"middle"},t.map(e=>d.a.createElement("option",{key:e,value:e},e)),d.a.createElement("option",{key:"",value:"0"},Object(O.c)(q()))),"0"===e&&d.a.createElement(A.s,{multiline:!0,rows:a?1:3,type:"textarea",placeholder:Object(O.c)(x()),name:_,validate:W,label:a&&Object(O.c)(D()),xpos:a?"":"middle"}))}},c()(r,"propTypes",M(M({},v.Q),{},{blockReasons:f.a.arrayOf(f.a.string).isRequired,mobile:f.a.bool.isRequired})),n=o))||n)||n;function z(){var e=l()(["Block"]);return z=function(){return e},e}function J(){var e=l()(["Cancel"]);return J=function(){return e},e}function Z(){var e=l()(["Block Client"]);return Z=function(){return e},e}function X(){var e=l()(["Are you sure you want to block this client?"]);return X=function(){return e},e}function $(){var e=l()(["Blocking client failed"]);return $=function(){return e},e}function ee(){var e=l()(["Client blocked"]);return ee=function(){return e},e}function te(){var e=l()(["Blocked clients are also automatically excluded from any marketing messages."]);return te=function(){return e},e}function ae(){var e=l()(["Blocking prevents this client from booking online appointments with you, they will find no available time slots."]);return ae=function(){return e},e}var ne,re,oe,ie=["Too many no shows","Too many late cancellations","Too many reschedules","Rude or inappropriate to staff","Refused to pay","Booked fake appointments"],ce=Object(O.c)(ae()),se=Object(O.c)(te()),le=Object(E.g)()(V=Object(b.b)(e=>({submitting:Object(v.bb)(Y)(e)}),{destroyForm:()=>Object(v.N)(Y),submitForm:()=>Object(v.hb)(Y)})((U=H=class extends p.PureComponent{constructor(...e){super(...e),c()(this,"handleClose",()=>{this.props.destroyForm(),Object(g.b)(Object(w.s)(this.customerId))}),c()(this,"handleSubmit",({note:e,blockReason:t})=>{var a=e||t||"";return Object(k.c)(this.customerId,a).then(()=>{y.a.addGlobalSuccessToast(Object(O.c)(ee())),this.handleClose()}).catch(()=>y.a.addGlobalErrorToast(Object(O.c)($())))})}componentDidMount(){this.customerId=m()(this.props,"match.params.id")}render(){var{isMatch:e,submitting:t}=this.props,a=Object(O.c)(X());return d.a.createElement(P.i,{size:"small"},d.a.createElement(P.g,{noBottomPadding:e,secondaryAction:d.a.createElement(N.e,{onAction:this.handleClose}),subheader:e&&a},Object(O.c)(Z())),d.a.createElement(P.c,{noPadding:!0},!e&&d.a.createElement(S.a,{forceShow:!0},d.a.createElement(j.d,{qaType:"block-client-modal-title",type:"bold"},a)),d.a.createElement(S.a,{qaType:"block-client-modal-firstParagraph",noTopPadding:!0,forceShow:!0},ce),d.a.createElement(S.a,{qaType:"block-client-modal-secondParagraph",noTopPadding:!0,forceShow:!0},se),d.a.createElement(G,{blockReasons:ie,onSubmit:this.handleSubmit,mobile:e})),d.a.createElement(P.e,{modalWindow:!0,embeddedToaster:!1,noPadding:!0},d.a.createElement(P.b,null,d.a.createElement(N.a,{onAction:this.handleClose,grow:1,basis:"100%",qaType:"cancel_confirm_button"},Object(O.c)(J())),d.a.createElement(N.f,{onAction:this.props.submitForm,grow:1,basis:"100%",isPending:t,qaType:"block_confirm_button"},Object(O.c)(z())))))}},c()(H,"propTypes",{destroyForm:f.a.func.isRequired,isMatch:f.a.bool,submitForm:f.a.func,submitting:f.a.bool}),V=U))||V)||V;function ue(){var e=l()(["Unblock"]);return ue=function(){return e},e}function me(){var e=l()(["Cancel"]);return me=function(){return e},e}function pe(){var e=l()(["Unblock Client"]);return pe=function(){return e},e}function de(){var e=l()(["This will allow the client to book online appointments with you and to receive marketing messages."]);return de=function(){return e},e}function be(){var e=l()(["Are you sure you want to unblock this client?"]);return be=function(){return e},e}function he(){var e=l()(["Unblocking client failed"]);return he=function(){return e},e}function fe(){var e=l()(["Client unblocked"]);return fe=function(){return e},e}var ye=Object(E.g)()((oe=re=class extends p.PureComponent{constructor(...e){super(...e),c()(this,"handleUnblock",()=>Object(k.m)(this.customerId).then(()=>{y.a.addGlobalSuccessToast(Object(O.c)(fe())),this.handleClose()}).catch(()=>y.a.addGlobalErrorToast(Object(O.c)(he())))),c()(this,"handleClose",()=>{Object(g.b)(Object(w.s)(this.customerId))})}componentDidMount(){this.customerId=m()(this.props,"match.params.id")}render(){var{isMatch:e}=this.props,t=Object(O.c)(be()),a=Object(O.c)(de());return d.a.createElement(P.i,{size:"small"},d.a.createElement(P.g,{noBottomPadding:e,secondaryAction:d.a.createElement(N.e,{onAction:this.handleClose}),subheader:e&&t},Object(O.c)(pe())),d.a.createElement(P.c,{onlyBottomPadding:!0},!e&&d.a.createElement(S.a,{forceShow:!0},t),d.a.createElement(S.a,{noTopPadding:!0,forceShow:!0},a)),d.a.createElement(P.e,{modalWindow:!0,embeddedToaster:!1,noPadding:!0},d.a.createElement(P.b,null,d.a.createElement(N.a,{qaType:"unblock-client-modal-button-cancel",onAction:this.handleClose,grow:1,basis:"100%"},Object(O.c)(me())),d.a.createElement(N.f,{qaType:"unblock-client-modal-button-unblock",onAction:this.handleUnblock,grow:1,basis:"100%",withPending:!0},Object(O.c)(ue())))))}},c()(re,"propTypes",{isMatch:f.a.bool}),ne=oe))||ne},rd6W:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return A}));var n,r,o,i=a("VkAN"),c=a.n(i),s=a("pVnL"),l=a.n(s),u=a("9oTK"),m=a.n(u),p=a("lSNA"),d=a.n(p),b=a("q1tI"),h=a.n(b),f=a("17x9"),y=a.n(f),g=a("/MKj"),O=a("nbpM"),v=a("V/N5"),E=a("ePPS"),j=a("b+f9"),N=a("OyCh"),S=a("dhJQ"),P=a("Pl0e"),k=a("yAJH"),w=a("e0Va"),C=a("AzYs"),T=a.n(C);function I(){var e=c()(["No services found"]);return I=function(){return e},e}var A=Object(g.b)((e,{query:t,location:a,currentServicePricingLevel:n,bookingId:r})=>({servicePricingLevelGroupList:Object(w.a)(Object(P.f)(e,a,r),t,a,n),displayColors:O.a.getProvider(e).appointmentColorSource===v.a.SERVICE_GROUP}),{})(n=Object(S.g)()((o=r=class extends b.PureComponent{constructor(...t){super(...t),d()(this,"state",{limit:10}),d()(this,"loadMore",()=>{var{servicePricingLevelGroupList:{totalLength:t}}=this.props,{limit:a}=this.state;return a>t?null:new m.a(t=>{this.timeout=e.setTimeout(()=>{this.setState({limit:this.state.limit+10},t)},100)})})}UNSAFE_componentWillReceiveProps({query:e}){e!==this.props.query&&this.setState({limit:10})}componentWillUnmount(){e.clearTimeout(this.timeout)}render(){var{servicePricingLevelGroupList:{totalLength:e,result:t},onItemClick:a,displayColors:n,scrollableView:r,isMatch:o,qaType:i}=this.props,{limit:c}=this.state,s=Object(w.b)(t,c),u=o?{scrollComponent:r,shrink:0}:{};return e>0?h.a.createElement(N.b,l()({className:T.a.scroller,loadMore:this.loadMore,threshold:50,qaType:i},u),s.map(({attributes:e,items:t})=>h.a.createElement(k.a,{id:e.id,key:e.id,title:e.name,color:n?e.appointmentColor:void 0,items:t,onAddItem:a}))):h.a.createElement(j.a,{icon:"no-results-found",text:Object(E.c)(I()),iconSize:"card",iconColor:"gray-6"})}},d()(r,"propTypes",{servicePricingLevelGroupList:y.a.object,bookingId:y.a.string,query:y.a.string,onItemClick:y.a.func,displayColors:y.a.bool,scrollableView:y.a.oneOfType([y.a.node,y.a.object]),isMatch:y.a.bool,qaType:y.a.string}),n=o))||n)||n}).call(this,a("yLpj"))},sQrb:function(e,t,a){"use strict";a.d(t,"b",(function(){return Re})),a.d(t,"a",(function(){return Pe}));var n,r,o,i=a("VkAN"),c=a.n(i),s=a("lSNA"),l=a.n(s),u=a("mwIZ"),m=a.n(u),p=a("vN+2"),d=a.n(p),b=a("q1tI"),h=a.n(b),f=a("17x9"),y=a.n(f),g=a("/MKj"),O=a("XOD0"),v=a("nbpM"),E=a("ePPS"),j=a("ZO1O"),N=a("3wSE"),S=a("Vows"),P=a("dhJQ"),k=a("/Q2I"),w=a("kZhr"),C=a("5ZU+"),T=a("15o+"),I=a("pVnL"),A=a.n(I),R=a("9oTK"),M=a("J2iB"),D=a.n(M),x=a("TSYQ"),q=a.n(x),L=a("X67z"),F=a("lSiv"),B=a("E2hG"),V=a("/pl8"),H=a("uZ2f"),U=a("Jje6"),Y=a("am0B"),Q=a("QILm"),_=a.n(Q),K=a("4r8K"),W=a("JKKx"),G=a("h/Nr"),z=a.n(G);function J(){var e=c()(["Select discount"]);return J=function(){return e},e}function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(){var e=c()(["Manual"]);return $=function(){return e},e}function ee(){var e=c()(["Increase"]);return ee=function(){return e},e}var te,ae,ne,re=Object(w.n)((o=r=class extends b.PureComponent{constructor(...e){super(...e),l()(this,"getSpecialDiscountName",()=>{var{currencyCode:e,specialDiscountName:t,specialDiscountType:a,specialDiscountValue:n}=this.props;return Object(W.b)({name:t,type:a,value:n},{currencyCode:e})}),l()(this,"getNormalDiscountName",e=>{var{currencySymbol:t}=this.props;return Object(E.c)("%{prefix} %{currencySymbol} %{priceDiff}",{currencySymbol:t,priceDiff:Object(K.a)(Math.abs(e)),prefix:e>0?Object(E.c)(ee()):Object(E.c)($())})})}render(){var e=this.props,{basePrice:t,price:a,onRevertFromManualDiscount:n,children:r,hideInvalidLabel:o,invalidValueLabel:i,isRefund:c,specialDiscountValue:s,specialDiscountName:l,specialDiscountType:u,currencySymbol:m}=e,p=_()(e,["basePrice","price","onRevertFromManualDiscount","children","hideInvalidLabel","invalidValueLabel","isRefund","specialDiscountValue","specialDiscountName","specialDiscountType","currencySymbol"]),b=c?-(s||0):Object(K.b)(a-t),f=c&&l;return p.input.value&&"no-discount"!==p.input.value||!b?h.a.createElement(H.r,p,r):h.a.createElement(H.s,A()({},p,{input:{name:p.input.name,value:f?this.getSpecialDiscountName():this.getNormalDiscountName(b),onFocus:d.a,onChange:d.a,onBlur:d.a,onDragStart:d.a,onDrop:d.a},readOnly:!0,inlineSuffix:!0,suffix:p.disabled?void 0:h.a.createElement(N.b,{name:"remove",size:"standard",touchOverlay:!0,onAction:n,className:z.a.suffix})}))}},l()(r,"propTypes",X(X({},w.P),{},{as:y.a.node,currencySymbol:y.a.string.isRequired,currencyCode:y.a.string,basePrice:y.a.oneOfType([y.a.string,y.a.number]),price:y.a.oneOfType([y.a.string,y.a.number]),onRevertFromManualDiscount:y.a.func.isRequired,disabled:y.a.bool,isRefund:y.a.bool,invalidValueLabel:y.a.string,specialDiscountValue:y.a.number,specialDiscountName:y.a.string,specialDiscountType:y.a.string})),l()(r,"defaultProps",{as:"label",invalidValueLabel:Object(E.c)(J()),basePrice:0,price:0}),n=o))||n,oe=a("sX6R"),ie=a.n(oe);function ce(){var e=c()(["No discount"]);return ce=function(){return e},e}function se(){var e=c()(["Staff"]);return se=function(){return e},e}function le(){var e=c()(["Select staff"]);return le=function(){return e},e}function ue(){var e=c()(["Not assigned"]);return ue=function(){return e},e}function me(){var e=c()(["Discount"]);return me=function(){return e},e}function pe(){var e=c()(["Employee"]);return pe=function(){return e},e}function de(){var e=c()(["Staff"]);return de=function(){return e},e}function be(){var e=c()(["Price"]);return be=function(){return e},e}function he(){var e=c()(["Quantity"]);return he=function(){return e},e}function fe(){var e=c()(["Quantity cannot be lower than 0"]);return fe=function(){return e},e}function ye(){var e=c()(["You cannot refund more items than you sold"]);return ye=function(){return e},e}function ge(){var e=c()(["Quantity cannot be higher than 0"]);return ge=function(){return e},e}function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ee(e){var t=ve({},e);"no-discount"===t.specialDiscount&&(t.specialDiscount=null),t.quantity=Number(t.quantity)||null,(t.isRefund?t.quantity<=0:t.quantity>=0)&&C.a.updateCheckoutItem(t.id,t)}var je,Ne,Se,Pe=Object(g.b)((e,{id:t,form:a,autoSubmit:n})=>{var r=v.a.getCheckoutItem(e,t),o=Boolean(r.isRefund),i=m()(r,"specialDiscount.id"),{currencySymbol:c,currencyCode:s}=v.a.getProvider(e),{id:l}=v.a.getCheckoutEffectiveLocation(e),u=r.employee||v.a.getCheckoutDefaultSaleItemEmployee(e),p=!1;if(r.product&&!r.product.unlimitedStock){var d=v.a.getProductStockQuantity(e,{product:r.product.id,location:l});d&&(p=d.quantity)}var b={form:a||"".concat("edit-sale-item","-").concat(t),checkoutItem:r,currencySymbol:c,currencyCode:s,location:l,maxQuantity:p,discounts:v.a.getApplicableDiscountList(e,{checkoutItem:r,currencySymbol:c,currencyCode:s}),basePrice:r.basePrice,isRefund:o},h=Object(w.W)(b.form);return b.initialValues={id:t,isRefund:o,quantity:r.quantity||"",unitPrice:null!=r.unitPrice?r.unitPrice:"",employee:m()(u,"id")||"",specialDiscount:D()(i)?"no-discount":String(i)},b.fieldPrice=m()(h(e),"unitPrice"),b.fieldDiscount=m()(h(e),"specialDiscount"),n&&(b.asyncValidate=e=>(Ee(e),Object(R.resolve)())),b},{})(te=Object(w.q)({enableReinitialize:!0,onSubmit:e=>Ee(e)})((ne=ae=class extends b.PureComponent{constructor(e){super(e),l()(this,"triggerSubmit",()=>{this.props.autoSubmit&&setTimeout(()=>{this.props.submit()})}),l()(this,"handleBlurQuantity",e=>{var t=Number(e);return t||(this.props.isRefund?-1:1)}),l()(this,"validateQuantity",e=>{var t=Number(e),{maxQuantity:a,isRefund:n,checkoutItem:{minQuantity:r}}=this.props;return n&&t>0?Object(E.c)(ge()):n&&t<r?Object(E.c)(ye()):!n&&t<0?Object(E.c)(fe()):!1!==a&&t>a?Object(E.c)("Cannot sell more than %{maxQuantity}",{maxQuantity:a}):void 0}),l()(this,"validatePrice",e=>{var{checkoutItem:t,noShowOrCancelMode:a,currencySymbol:n}=this.props;return a&&Number(e)>t.basePrice?Object(E.c)("%{currencySymbol} %{maxValue} maximum allowed",{currencySymbol:n,maxValue:t.basePrice}):void 0});var{desktop:t,currencySymbol:a,checkoutItem:n,change:r,isRefund:o}=e,i={quantity:{label:Object(E.c)(he()),min:o?void 0:1,max:o?-1:void 0,normalize:(e,t)=>function(e,t,a){if(""===t)return"";var n=String(t);return(e?/^-\d+$/.test(n):/^\d+$/.test(n))?n:String(a||"")}(o,e,t),onChange:this.triggerSubmit,warn:this.validateQuantity,redWarning:!0,alwaysWarn:!0,qaType:"sale-item-quantity-input",className:ie.a.fieldQuantity},unitPrice:{label:Object(E.c)(be()),onlyPositive:!o,currencySymbol:a,onChange:this.triggerSubmit,qaType:"sale-item-price-input",className:ie.a.fieldPrice},employee:{label:Object(E.c)(de()),validate:w.kb.required(Object(E.c)(pe())),onChange:this.triggerSubmit,qaType:"sale-item-staff",className:ie.a.fieldEmployee},specialDiscount:{label:Object(E.c)(me()),currencySymbol:a,onRevertFromManualDiscount:()=>{r("unitPrice",n.basePrice),this.triggerSubmit()},onChange:()=>{r("unitPrice",n.basePrice),this.triggerSubmit()},qaType:"sale-item-discount",className:ie.a.fieldDiscount}},c={quantity:{basis:"100%"},unitPrice:{basis:"100%"},employee:{basis:"100%"},specialDiscount:{basis:"100%"}},s={quantity:{basis:80,shrink:0,blurNormalize:this.handleBlurQuantity},unitPrice:{basis:140,shrink:0},employee:{basis:200,shrink:1,grow:2},specialDiscount:{basis:150,shrink:2,grow:2}};this.getField=Object(w.S)(i,e=>ve(ve({},e),(t?s:c)[e.name]||{}))}render(){var{desktop:e,sectionClassName:t,checkoutItem:a,location:n,discounts:r,fieldPrice:o,fieldDiscount:i,isRefund:c,noShowOrCancelMode:s}=this.props,{editablePrice:l,basePrice:u,editableQuantity:m,editableDiscount:p}=a,d=Boolean(i)&&"no-discount"!==i,{CAN_EDIT_CHECKOUT_PRICES:b}=L.a,f=e?s?Object(E.c)(ue()):Object(E.c)(le()):"";return h.a.createElement(U.b,{className:q()(ie.a.self,t),flex:"row",wrap:e?"nowrap":"wrap"},e?h.a.createElement(H.s,A()({type:"number"},this.getField("quantity"),{disabled:!m,placeholder:"",autoSelect:!0})):m&&h.a.createElement(H.l,this.getField("quantity")),h.a.createElement(V.b,{keys:b},({canEditCheckoutPrices:e})=>h.a.createElement(H.a,A()({validate:this.validatePrice},this.getField("unitPrice"),{disabled:d||!l||c||!e}))),h.a.createElement(Y.a,A()({hideInvalidLabel:!0,disabled:c||s,addCurrentEmployee:!c&&!s,location:n,label:Object(E.c)(se()),invalidValueLabel:f,includeUnbookableEmployees:!0},this.getField("employee"))),h.a.createElement(re,A()({},this.getField("specialDiscount"),{hideInvalidLabel:!0,basePrice:u,price:o,specialDiscountValue:a.specialDiscountValue,specialDiscountName:a.specialDiscountName,specialDiscountType:a.specialDiscountType,disabled:!1===p||c||0===u||s,isRefund:c,qaType:"sale-item-discount"}),h.a.createElement("option",{value:"no-discount"},Object(E.c)(ce())),r.map(({id:e,formattedName:t})=>h.a.createElement(U.b,{as:"option",key:e,value:e,qaType:"discount-type-".concat(e)},t))))}},l()(ae,"propTypes",ve(ve({},w.Q),{},{desktop:y.a.bool,autoSubmit:y.a.bool,sectionClassName:y.a.string,initialize:y.a.func.isRequired,initialValues:y.a.object.isRequired,checkoutItem:y.a.shape(F.a.propTypes),fieldPrice:y.a.oneOfType([y.a.string,y.a.number]),fieldDiscount:y.a.string,currencySymbol:y.a.string,currencyCode:y.a.string,location:y.a.string.isRequired,discounts:y.a.arrayOf(y.a.shape(B.c.propTypes)).isRequired,change:y.a.func.isRequired,submit:y.a.func.isRequired,maxQuantity:y.a.oneOfType([y.a.number,y.a.bool]),isRefund:y.a.bool,noShowOrCancelMode:y.a.bool})),l()(ae,"defaultProps",{desktop:!1,autoSubmit:!1}),te=ne))||te)||te,ke=a("H5kl"),we=a.n(ke);function Ce(){var e=c()(["Save"]);return Ce=function(){return e},e}function Te(){var e=c()(["Remove Product"]);return Te=function(){return e},e}function Ie(){var e=c()(["Remove Voucher"]);return Ie=function(){return e},e}function Ae(){var e=c()(["Remove Service"]);return Ae=function(){return e},e}var Re=Object(g.b)((e,{match:{params:{id:t}}})=>{var a=v.a.getCheckoutItems(e),n=a.find(e=>e.id===Number(t)),r=m()(n,"isRefund",!1);return{checkoutItem:n,id:m()(n,"id",""),isRefund:r,noShowOrCancelMode:v.a.checkoutInNoShowOrCancelMode(e),removable:!r||a.filter(e=>e.isRefund).length>1}},e=>({submitForm:()=>e(Object(w.hb)("sale-item-edit")),onRemoveItem:t=>e((e,a)=>{var n=a();v.a.hasExceedingCheckoutPayments(n,{skipItemIds:[t]})?Object(O.c)(T.G(t)):(C.a.deleteCheckoutItem(t),Object(O.b)("/"))})}))(je=Object(P.g)()((Se=Ne=class extends b.PureComponent{constructor(...e){super(...e),l()(this,"getRemoveButtonLabel",()=>{var{checkoutItem:e}=this.props;return e.servicePricingLevel?Object(E.c)(Ae()):e.voucher?Object(E.c)(Ie()):Object(E.c)(Te())}),l()(this,"close",()=>{Object(O.b)("/")}),l()(this,"handleRemove",()=>{var{checkoutItem:{packageInfo:e,saleItem:t},id:a,isRefund:n,onRemoveItem:r,splitPackage:o}=this.props;return t&&!n||(e?o(a).then(()=>{setTimeout(()=>r(a),100)}).catch(d.a):r(a)),null})}componentDidMount(){this.props.checkoutItem&&null!=this.props.checkoutItem.id||this.close()}render(){var{isMatch:e,checkoutItem:t,submitForm:a,removable:n,noShowOrCancelMode:r}=this.props,o=null;if(t){var{id:i,name:c}=t;o=h.a.createElement(k.i,{fullHeight:!0},h.a.createElement(k.g,{qaType:"checkout-item-header",headerClassName:we.a.modalHeader,onClose:this.close},c),h.a.createElement(k.c,{onlyBottomPadding:!0},h.a.createElement(j.d,{type:"form modal",shrink:0},h.a.createElement(Pe,{id:i,form:"sale-item-edit",onSubmitSuccess:this.close,noShowOrCancelMode:r})),n&&!r&&(e?h.a.createElement(S.w,{grow:0,onAction:this.handleRemove},this.getRemoveButtonLabel()):h.a.createElement(j.a,{type:"button",onAction:this.handleRemove},h.a.createElement(N.h,null," ",this.getRemoveButtonLabel()," ")))),h.a.createElement(k.e,null,h.a.createElement(k.a,{type:N.s,basis:"100%",onClick:a,qaType:"save-button"},Object(E.c)(Ce()))))}return o}},l()(Ne,"propTypes",{checkoutItem:y.a.shape({id:y.a.number,name:y.a.string,packageInfo:y.a.object,saleItem:y.a.object,servicePricingLevel:y.a.object,voucher:y.a.object}),submitForm:y.a.func.isRequired,onRemoveItem:y.a.func.isRequired,removable:y.a.bool,isRefund:y.a.bool,id:y.a.string,isMatch:y.a.bool,noShowOrCancelMode:y.a.bool,splitPackage:y.a.func}),je=Se))||je)||je},t2yh:function(e,t,a){"use strict";a.d(t,"a",(function(){return Ot}));var n=a("VkAN"),r=a.n(n),o=a("lSNA"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("ePPS"),p=a("QqEi"),d=a("pVnL"),b=a.n(d),h=a("/MKj"),f=a("nbpM"),y=a("sQHA"),g=a("Jje6"),O=a("XOuL"),v=a("uopA"),E=a("3wSE"),j=a("lSCD"),N=a.n(j),S=a("PhEd"),P=a("ZO1O"),k=a("gwpz"),w=a("Qs7Y"),C=a("Vows"),T=a("mwIZ"),I=a.n(T),A=a("5ZU+");function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({limit:100},t);return A.a.readCustomerProductSaleItems(e,a).then(e=>{var{offset:t,limit:n}=a,r=I()(e,"body.data",[]);return{nextOffset:t+n,hasMore:r.length===n,itemIds:r.map(e=>e.id)}})}var D,x,q,L=a("YtiB"),F=a.n(L);function B(){var e=r()(["Past"]);return B=function(){return e},e}function V(){var e=r()(["Upcoming"]);return V=function(){return e},e}function H(){var e=r()(["Past"]);return H=function(){return e},e}function U(){var e=r()(["Upcoming"]);return U=function(){return e},e}var Y,Q,_,K=Object(h.b)(e=>({providerMoment:f.a.providerMoment(e),isReshedulEnabled:f.a.isReshedulEnabled(e)}))((q=x=class extends c.PureComponent{constructor(...e){super(...e),i()(this,"state",{loading:!1,hasMore:!0,offset:0,itemIds:[],appointmentList:[],totalCount:0}),i()(this,"getYear",e=>e&&e.year()),i()(this,"shouldAddYear",(e,t,a)=>{var{providerMoment:n}=this.props;return 0===e&&a!==n().year()||e>0&&t[e-1].meta.year!==a}),i()(this,"addYearMeta",(e,t,a)=>{var n=this.getYear(t[0].start);return e.push({data:t,meta:{showYear:this.shouldAddYear(a,e,n),year:n}}),e}),i()(this,"promise",null),i()(this,"loadMore",(e=this.props.loadMoreLength)=>{var{clientId:t,type:a}=this.props,{offset:n,hasMore:r}=this.state;return r&&!this.promise&&(this.setState({loading:!0}),this.promise=function(e,t){return A.a.readCustomerBookings(e,t).then(e=>{var{offset:a,limit:n}=t,r=I()(e,"body.data",[]),o=I()(e,"body.meta.bookingsCount",0);return{nextOffset:a+n,itemIds:r.map(e=>e.id),totalCount:o}})}(t,{limit:e,offset:n,only:a}).then(e=>{var{itemIds:t,nextOffset:a,totalCount:n}=e,r=this.state.itemIds.concat(t);return this.promise=null,this.setState((e,t)=>({loading:!1,offset:a,hasMore:r.length<n,itemIds:r,appointmentList:r.map(e=>t.itemsDict[e]).reduce(this.addYearMeta,[]),totalCount:n})),e}).catch(()=>(this.setState({loading:!1,hasMore:!1}),{error:!0}))),this.promise})}componentDidMount(){this.loadMore(this.props.initialLength).then(e=>{this.props.initialCallback(this.props.type,e.totalCount?e.totalCount:0,e.error)})}componentWillUnmount(){this.promise&&N()(this.promise.cancel)&&this.promise.cancel()}render(){var{loadMoreLength:e,profileView:t,type:a,qaType:n,isReshedulEnabled:r}=this.props,{appointmentList:o,hasMore:i,itemIds:c,loading:l,totalCount:u}=this.state;return 0===c.length?null:s.a.createElement(g.b,{className:F.a.self,qaType:n},s.a.createElement(P.d,{type:"transparent plain",className:F.a.section},r?s.a.createElement(S.Text,{type:"fresha-h3",color:"gray100"},Object(m.c)("%{type} (%{count})",{type:a===y.n.UPCOMING?Object(m.c)(U()):Object(m.c)(H()),count:u})):s.a.createElement(w.d,{type:"group-title"},Object(m.c)("%{type} (%{count})",{type:a===y.n.UPCOMING?Object(m.c)(V()):Object(m.c)(B()),count:u}))),s.a.createElement(g.b,{className:F.a.list},o.map(e=>{var{data:a,meta:n}=e;return s.a.createElement(g.b,{key:a[0].id},n.showYear&&s.a.createElement(g.b,{className:F.a.year},s.a.createElement(w.d,{type:"section-name"},n.year)),s.a.createElement(C.c,{shouldLink:t,bookings:a,qaType:"appointment-row-button"}))}),l&&s.a.createElement(k.a,null)),!l&&i&&s.a.createElement(P.d,{type:"transparent plain",className:F.a.loadMore},s.a.createElement(E.n,{onAction:this.loadMore},s.a.createElement(w.d,{as:"span",type:"link"},Object(m.c)("Load %{count} more",{count:Math.min(e,u-c.length)})))))}},i()(x,"propTypes",{initialCallback:u.a.func,initialLength:u.a.number.isRequired,loadMoreLength:u.a.number.isRequired,clientId:u.a.string.isRequired,itemsDict:u.a.object.isRequired,profileView:u.a.bool,providerMoment:u.a.func,type:u.a.oneOf(y.o),qaType:u.a.string,isReshedulEnabled:u.a.bool}),D=q))||D,W=a("Av8N"),G=a.n(W);function z(){var e=r()(["This client has no upcoming or past appointments"]);return z=function(){return e},e}function J(){var e=r()(["No Appointments"]);return J=function(){return e},e}function Z(){var e=r()(["here"]);return Z=function(){return e},e}function X(){var e=r()(["Oops, something went wrong"]);return X=function(){return e},e}var $,ee,te,ae,ne,re,oe=Object(h.b)((e,{clientId:t})=>({itemsDict:f.a.getCustomerBookingHistory(e,t)}))((_=Q=class extends c.PureComponent{constructor(...e){super(...e),i()(this,"state",{empty:!1,initialLoading:!0}),i()(this,"stats",{[y.n.UPCOMING]:null,[y.n.PAST]:null}),i()(this,"handleLoaded",(e,t,a=!1)=>{if(this.stats[e]={count:t,error:a},Object.values(this.stats).some(e=>e&&e.error))this.setState({empty:!0,initialLoading:!1,error:!0});else if(Object.values(this.stats).every(e=>null!==e)){var n=Object.values(this.stats).reduce((e,t)=>e+t.count,0);this.setState({empty:n<=0,initialLoading:!1,error:a})}}),i()(this,"reloadSection",()=>{this.setState({empty:!1,error:!1,initialLoading:!0})})}render(){var{empty:e,initialLoading:t,error:a}=this.state;return s.a.createElement(g.b,{className:G.a.self},s.a.createElement(O.a,{if:t},e&&(a?s.a.createElement(v.a,{icon:"connection-error",name:Object(m.c)(X())},Object(m.c)("Click %{retryButton} to try again or contact our support.",{retryButton:s.a.createElement(E.n,{as:"span",onAction:this.reloadSection},Object(m.c)(Z()))})):s.a.createElement(v.a,{icon:"no-appointments",name:Object(m.c)(J()),text:Object(m.c)(z())})),!e&&!a&&s.a.createElement(s.a.Fragment,null,s.a.createElement(K,b()({initialCallback:this.handleLoaded,initialLength:2,loadMoreLength:5,type:y.n.UPCOMING,qaType:"upcoming-appointments"},this.props)),s.a.createElement(K,b()({initialCallback:this.handleLoaded,initialLength:20,loadMoreLength:20,type:y.n.PAST,qaType:"past-appointments"},this.props)))))}},i()(Q,"propTypes",{clientId:u.a.string.isRequired,itemsDict:u.a.object.isRequired}),Y=_))||Y,ie=a("TSYQ"),ce=a.n(ie),se=a("ivFB"),le=a("A392"),ue=a("dhJQ"),me=Object(h.b)((e,t)=>({client:f.a.getCustomer(e,t.clientId)}))($=Object(ue.g)()((te=ee=class extends c.PureComponent{render(){return s.a.createElement(P.d,{grow:1,type:ce()("plain transparent",{noPadding:this.props.isMatch})},s.a.createElement(le.a,{client:this.props.client}))}},i()(ee,"propTypes",{client:u.a.shape(se.a.propTypes).isRequired,isMatch:u.a.bool}),$=te))||$)||$,pe=a("IZOP"),de=a.n(pe),be=a("5KxP"),he=a("dwNy"),fe=a("478R"),ye=a("dmMp"),ge=a("KvEn"),Oe=a("QXy2"),ve=a("QPrj"),Ee=a.n(ve);function je(){var e=r()(["Total"]);return je=function(){return e},e}function Ne(){var e=r()(["Location"]);return Ne=function(){return e},e}function Se(){var e=r()(["Invoice date"]);return Se=function(){return e},e}function Pe(){var e=r()(["Invoice#"]);return Pe=function(){return e},e}function ke(){var e=r()(["Status"]);return ke=function(){return e},e}function we(){var e=r()(["Voided"]);return we=function(){return e},e}function Ce(){var e=r()(["Exchange"]);return Ce=function(){return e},e}function Te(){var e=r()(["Refund"]);return Te=function(){return e},e}function Ie(){var e=r()(["Unpaid"]);return Ie=function(){return e},e}function Ae(){var e=r()(["Part paid"]);return Ae=function(){return e},e}function Re(){var e=r()(["Completed"]);return Re=function(){return e},e}var Me={[he.e.PAID]:{type:fe.a.SUCCESS,text:Object(m.c)(Re())},[he.e.PART_PAID]:{type:fe.a.WARNING,text:Object(m.c)(Ae())},[he.e.UNPAID]:{type:fe.a.WARNING,text:Object(m.c)(Ie())},[he.e.REFUND]:{type:fe.a.DANGER,text:Object(m.c)(Te())},[he.e.EXCHANGE]:{type:fe.a.SUCCESS,text:Object(m.c)(Ce())},[he.e.VOIDED]:{type:fe.a.DANGER,text:Object(m.c)(we())}},De="status",xe="receiptNumber",qe="invoiceDate",Le="locationName",Fe="totalGross",Be=[{id:De,text:Object(m.c)(ke()),align:ye.b.LEFT,width:120},{id:xe,text:Object(m.c)(Pe()),align:ye.b.LEFT,width:120},{id:qe,text:Object(m.c)(Se()),align:ye.b.LEFT,width:120},{id:Le,text:Object(m.c)(Ne()),align:ye.b.LEFT,width:120},{id:Fe,text:Object(m.c)(je()),align:ye.b.RIGHT,width:120}],Ve=Be.filter(e=>e.id!==Le);function He(e){return e.reduce((e,{width:t})=>e+t,0)}var Ue=He(Be),Ye=He(Ve),Qe=de()()((re=ne=class extends c.PureComponent{constructor(...e){super(...e),i()(this,"renderCell",(e,t)=>{var{enableLinks:a}=this.props,n=t[e.id],r=n;switch(e.id){case De:var{type:o,text:i}=Me[n];r=s.a.createElement(fe.b,{type:o},i);break;case xe:r=a?s.a.createElement(E.n,{linkTo:Object(be.h)(t.id)},n):n;break;case qe:r=n.format("D MMM YYYY");break;case Fe:r=s.a.createElement(ge.a,{price:n});break;default:r=n}return s.a.createElement(ye.e,{key:e.id,align:e.align},r)})}render(){var{hasMoreRows:e,hasMultipleLocations:t,limit:a,loading:n,loadMore:r,sales:o,totalRowsCount:i,size:c}=this.props,l=t?Be:Ve,u=t?Ue:Ye,p=c.width&&c.width<u;return s.a.createElement(g.b,{className:Ee.a.self},s.a.createElement(ye.d,{className:Ee.a.table,pinFirstColumn:p},l.map(({id:e,text:t,align:a,width:n})=>s.a.createElement(ye.f,{key:e,align:a,width:n},t)),o.map(e=>s.a.createElement(ye.h,{key:e.id},l.map(t=>this.renderCell(t,e)))),s.a.createElement(ye.g,null,s.a.createElement(O.a,{if:n,type:"paginated-resource",spinnerSize:"medium",flex:"column"},s.a.createElement(g.b,{flex:"column"},Object(m.c)("Showing %{rowsCount} of %{totalRowsCount} results",{rowsCount:o.length,totalRowsCount:i}),e&&s.a.createElement(E.r,{onAction:r},Object(m.c)("Load %{limit} more",{limit:a})))))))}},i()(ne,"propTypes",{enableLinks:u.a.bool,hasMoreRows:u.a.bool.isRequired,hasMultipleLocations:u.a.bool,sales:u.a.arrayOf(u.a.shape({invoiceDate:Oe.b})).isRequired,loadMore:u.a.func.isRequired,loading:u.a.bool,limit:u.a.number.isRequired,totalRowsCount:u.a.number.isRequired,size:u.a.shape({width:u.a.number})}),ae=re))||ae,_e=a("OyCh");class Ke extends c.PureComponent{render(){var{hasMultipleLocations:e,sales:t,loadMore:a,enableLinks:n}=this.props;return s.a.createElement(_e.b,{flex:"column",threshold:150,loadMore:a},t.map(t=>s.a.createElement(C.m,{enableLinks:n,hasMultipleLocations:e,key:t.id,sale:t})))}}i()(Ke,"propTypes",{enableLinks:u.a.bool,hasMultipleLocations:u.a.bool,sales:u.a.arrayOf(u.a.shape({id:u.a.string})).isRequired,loadMore:u.a.func.isRequired});var We,Ge,ze,Je=a("Mi3G"),Ze=a.n(Je);function Xe(){var e=r()(["here"]);return Xe=function(){return e},e}function $e(){var e=r()(["Oops, something went wrong"]);return $e=function(){return e},e}function et(){var e=r()(["Use the checkout feature to create a new sale for this client"]);return et=function(){return e},e}function tt(){var e=r()(["No Sales History"]);return tt=function(){return e},e}var at,nt,rt,ot=Object(ue.g)()(We=Object(h.b)((e,{clientId:t})=>({items:f.a.getCustomerSaleHistoryDict(e,t),hasMultipleLocations:f.a.getLocationList(e).length>1}))((ze=Ge=class extends c.PureComponent{constructor(...e){super(...e),i()(this,"state",{loading:!1,offset:0,hasMore:!0,itemIds:[],totalSalesCount:0,error:!1}),i()(this,"promise",null),i()(this,"loadMore",()=>{var{clientId:e}=this.props,{hasMore:t,offset:a}=this.state;return t&&!this.promise&&(this.setState({loading:!0}),this.promise=function(e,t){return A.a.readCustomerSaleList(e,t).then(e=>{var{offset:a,limit:n}=t,r=I()(e,"body.data",[]);return{nextOffset:a+n,hasMore:r.length===n,totalSalesCount:I()(e,"body.meta.salesCount",0),itemIds:r.map(e=>e.id)}})}(e,{limit:20,offset:a}).then(({totalSalesCount:e,nextOffset:t,hasMore:a,itemIds:n})=>{this.promise=null,this.setState(r=>({loading:!1,offset:t,hasMore:a,itemIds:r.itemIds.concat(n),totalSalesCount:e}))}).catch(()=>{this.setState({loading:!1,hasMore:!1,error:!0})})),this.promise}),i()(this,"reloadSection",()=>{this.promise=null,this.setState({loading:!0,error:!1,hasMore:!0},this.loadMore)})}componentDidMount(){this.loadMore()}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){var{hasMultipleLocations:e,isMatch:t,items:a,profileView:n}=this.props,{itemIds:r,hasMore:o,loading:i,totalSalesCount:c,error:l}=this.state,u=r.map(e=>a[e]);return s.a.createElement(g.b,{flex:"column",grow:1,className:Ze.a.self},s.a.createElement(O.a,{if:i},u.length>0&&(n&&!t?s.a.createElement(Qe,{enableLinks:n,hasMoreRows:o,hasMultipleLocations:e,sales:u,loadMore:this.loadMore,loading:i,limit:20,totalRowsCount:c}):s.a.createElement(Ke,{enableLinks:n,hasMultipleLocations:e,sales:u,loadMore:this.loadMore})),!l&&!i&&!o&&0===u.length&&s.a.createElement(v.a,{icon:"no-sales",name:Object(m.c)(tt()),text:Object(m.c)(et())}),l&&s.a.createElement(v.a,{icon:"connection-error",name:Object(m.c)($e())},Object(m.c)("Click %{retryButton} to try again or contact our support.",{retryButton:s.a.createElement(E.n,{as:"span",onAction:this.reloadSection},Object(m.c)(Xe()))}))))}},i()(Ge,"propTypes",{isMatch:u.a.bool.isRequired,clientId:u.a.string.isRequired,hasMultipleLocations:u.a.bool,items:u.a.object.isRequired,profileView:u.a.bool}),We=ze))||We)||We,it=a("v18t"),ct=a.n(it);function st(){var e=r()(["Use the checkout feature to create a new sale for this client"]);return st=function(){return e},e}function lt(){var e=r()(["No Sales History"]);return lt=function(){return e},e}function ut(){var e=r()(["here"]);return ut=function(){return e},e}function mt(){var e=r()(["Oops, something went wrong"]);return mt=function(){return e},e}var pt=Object(h.b)((e,{clientId:t})=>({items:f.a.getCustomerSaleProducts(e,t)}),{})((rt=nt=class extends c.PureComponent{constructor(...e){super(...e),i()(this,"state",{loading:!1,offset:0,hasMore:!0,error:!1}),i()(this,"promise",null),i()(this,"loadMore",()=>{var{clientId:e}=this.props,{offset:t,hasMore:a}=this.state;return a&&!this.promise&&(this.setState({loading:!0}),this.promise=M(e,{offset:t}).then(({nextOffset:e,hasMore:t})=>{this.promise=null,this.setState({loading:!1,offset:e,hasMore:t})}).catch(()=>{this.setState({loading:!1,hasMore:!1,error:!0})})),this.promise}),i()(this,"reloadSection",()=>{this.promise=null,this.setState({loading:!0,error:!1,hasMore:!0},this.loadMore)})}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){var{items:e}=this.props,{loading:t,error:a}=this.state;return s.a.createElement(_e.b,{flex:"column",className:ct.a.self,loadMore:this.loadMore,threshold:150},!a&&!t&&e.map(e=>s.a.createElement(C.u,{key:e.id,item:e})),!t&&a&&s.a.createElement(v.a,{icon:"connection-error",name:Object(m.c)(mt())},Object(m.c)("Click %{retryButton} to try again or contact our support.",{retryButton:s.a.createElement(E.n,{as:"span",onAction:this.reloadSection},Object(m.c)(ut()))})),!t&&!a&&0===e.length&&s.a.createElement(v.a,{icon:"no-products",name:Object(m.c)(lt()),text:Object(m.c)(st())}))}},i()(nt,"propTypes",{clientId:u.a.string.isRequired,items:u.a.arrayOf(u.a.object).isRequired}),at=rt))||at,dt=a("uv4m"),bt=a.n(dt);function ht(){var e=r()(["Info"]);return ht=function(){return e},e}function ft(){var e=r()(["Invoices"]);return ft=function(){return e},e}function yt(){var e=r()(["Products"]);return yt=function(){return e},e}function gt(){var e=r()(["Appointments"]);return gt=function(){return e},e}class Ot extends c.PureComponent{render(){return s.a.createElement(p.b,{flexContent:!0,noTabsMargin:!0,className:bt.a.self,contentClassName:bt.a.tabContainer},s.a.createElement(p.a,{name:Object(m.c)(gt())},s.a.createElement(oe,this.props)),s.a.createElement(p.a,{name:Object(m.c)(yt())},s.a.createElement(pt,this.props)),s.a.createElement(p.a,{name:Object(m.c)(ft())},s.a.createElement(ot,this.props)),!this.props.profileView&&s.a.createElement(p.a,{name:Object(m.c)(ht())},s.a.createElement(me,this.props)))}}i()(Ot,"propTypes",{clientId:u.a.string.isRequired,profileView:u.a.bool})},tJFL:function(e,t,a){"use strict";a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return V}));var n=a("q1tI"),r=a.n(n),o=a("17x9"),i=a("TSYQ"),c=a.n(i),s=a("Jje6"),l=a("iiWb"),u=a.n(l),m=a("XOuL"),p=a("tmrx"),d=a.n(p),b=({children:e,className:t,withShadow:a,isLoading:n,isBlank:o,small:i})=>r.a.createElement(s.b,{className:c()(d.a.self,{[d.a.shadow]:a||o,[d.a.blank]:o,[d.a.small]:i},t)},(n||o)&&r.a.createElement(m.a,{className:d.a.loader,if:!0,static:!0,fixedMobile:!0}),!o&&e);b.propTypes={className:o.string,small:o.bool,children:o.node,withShadow:o.bool,isLoading:o.bool,isBlank:o.bool};var h=b,f=({children:e,className:t,small:a,withScreenShadow:n,isLoading:o,blankScreen:i})=>r.a.createElement(s.b,{className:c()(u.a.container,{[u.a.containerBottomBorder]:a},t)},r.a.createElement(s.b,{className:c()(u.a.self,{[u.a.small]:a})},r.a.createElement(s.b,{className:u.a.speaker}),r.a.createElement(h,{withShadow:n,isLoading:o,isBlank:i,small:a},e)));f.propTypes={className:o.string,children:o.node,small:o.bool,withScreenShadow:o.bool,isLoading:o.bool,blankScreen:o.bool};var y=f,g=a("VkAN"),O=a.n(g),v=a("ePPS"),E=a("i6OX"),j=a("Qs7Y"),N=a("0knz"),S=a.n(N);function P(){var e=O()(["Fresha"]);return P=function(){return e},e}function k(){var e=O()(["now"]);return k=function(){return e},e}function w(){var e=O()(["messages"]);return w=function(){return e},e}var C=({className:e,children:t})=>{var[a,n]=t.split(/(https?:\/\/[^\s]+)/);return r.a.createElement(s.b,{className:c()(S.a.self,e)},r.a.createElement(s.b,{as:"header",className:S.a.header,role:"presentation"},r.a.createElement(s.b,{className:S.a.headerTitle},r.a.createElement(E.b,{color:"white",className:S.a.icon,size:"25",name:"sms-icon"}),r.a.createElement(j.d,{className:S.a.title,qaType:"message-title"},Object(v.c)(w()))),r.a.createElement(j.d,{qaType:"message-date"},Object(v.c)(k()))),r.a.createElement(s.b,{className:S.a.subject,role:"presentation"},Object(v.c)(P())),r.a.createElement(s.b,{className:S.a.content,qaType:"message-text"},a,r.a.createElement(j.d,{className:S.a.link},n)))};C.propTypes={className:o.string,children:o.node};var T=C;function I(){var e=O()(["now"]);return I=function(){return e},e}function A(){var e=O()(["fresha"]);return A=function(){return e},e}var R=({className:e,children:t,subject:a})=>r.a.createElement(s.b,{className:c()(S.a.self,e)},r.a.createElement(s.b,{as:"header",className:S.a.header,role:"presentation"},r.a.createElement(s.b,{className:S.a.headerTitle},r.a.createElement(E.b,{color:"white",className:S.a.icon,size:"25",name:"fresha"}),r.a.createElement(j.d,{className:S.a.title,qaType:"notification-title"},Object(v.c)(A()))),r.a.createElement(j.d,{qaType:"notification-date"},Object(v.c)(I()))),r.a.createElement(s.b,{className:S.a.subject,role:"presentation",qaType:"notification-subject"},a),r.a.createElement(s.b,{className:S.a.content,qaType:"notification-text"},t));R.propTypes={className:o.string,subject:o.string,children:o.node};var M=R,D=a("lSNA"),x=a.n(D),q=a("u4U/"),L=a("I31e"),F=a.n(L);function B(){var e=O()(["Example message"]);return B=function(){return e},e}class V extends n.Component{getContent(){var{title:e,content:t,type:a}=this.props;return"html"===a?r.a.createElement(q.a,{qaType:"preview-iframe",title:"email-preview",html:t,width:"100%",htmlHasRootElement:!0}):"text"===a&&e?r.a.createElement(M,{subject:e},t):r.a.createElement(T,null,t)}render(){var{isExample:e}=this.props;return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(s.b,{className:F.a.infoBox,qaType:"info-box"},Object(v.c)(B())),this.getContent())}}x()(V,"propTypes",{title:o.string,content:o.string,type:Object(o.oneOf)(["text","html"]),isExample:o.bool})},tnX3:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return me}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("QILm"),l=a.n(s),u=a("VkAN"),m=a.n(u),p=a("lSNA"),d=a.n(p),b=a("9oTK"),h=a("Puqe"),f=a.n(h),y=a("mwIZ"),g=a.n(y),O=a("7GkX"),v=a.n(O),E=a("q1tI"),j=a.n(E),N=a("17x9"),S=a.n(N),P=a("TSYQ"),k=a.n(P),w=a("/MKj"),C=a("Ty5D"),T=a("gY1J"),I=a("ePPS"),A=a("JqEL"),R=a("5ZU+"),M=a("nbpM"),D=a("XOD0"),x=a("Jje6"),q=a("DTlD"),L=a("uopA"),F=a("/Q2I"),B=a("dhJQ"),V=a("Vows"),H=a("6+t1"),U=a("rb4H"),Y=a("/pl8"),Q=a("X67z"),_=a("dsWg"),K=a("NgSR"),W=a("Xhf8"),G=a("nDSK"),z=a("5XOi"),J=a("3qA6"),Z=a.n(J);function X(){var e=m()(["Use the search to add a client, or keep empty to save as walk-in."]);return X=function(){return e},e}function $(){var e=m()(["Add client"]);return $=function(){return e},e}function ee(){var e=m()(["Block client"]);return ee=function(){return e},e}function te(){var e=m()(["Unblock client"]);return te=function(){return e},e}function ae(){var e=m()(["Edit client details"]);return ae=function(){return e},e}function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(){var e=m()(["Client Details"]);return re=function(){return e},e}function oe(){var e=m()(["Search client"]);return oe=function(){return e},e}var ie=()=>"translateX(100%)";function ce(e){return Object(b.all)([R.a.readCustomer(e,{include:"customer-payment-method"}),R.a.readCustomerMarketingConsentLog(e)])}var se={className:S.a.string,isMatch:S.a.bool,children:S.a.node,canResetCustomer:S.a.bool,customer:K.a,onSetCustomer:S.a.func,isActive:S.a.bool,onSetActive:S.a.func,displayEmptyPlaceholder:S.a.bool,forceInfo:S.a.bool,disableInfo:S.a.bool,removeCustomerText:S.a.string,dispatch:S.a.func,clientContext:S.a.object},le=v()(se),ue=[T.c.CREATE,T.c.START_EDIT,T.c.EDIT],me=Object(B.g)()(n=Object(w.b)(e=>({clientContext:M.a.getClientContext(e)}))((o=r=class extends E.Component{constructor(t){super(t),d()(this,"setModalRef",e=>{!e||this.state.modalRef&&this.state.modalRef===e||this.setState({modalRef:e})}),d()(this,"deriveStateFromProps",e=>{var t,{customer:a}=e,n=g()(a,"id");n&&n!==this.loadedCustomerId&&(this.loadedCustomerId=n,n!==T.d&&ce(n),t={searchActive:!1,infoActive:!1});var{searchActive:r,infoActive:o}=this.state||{};return this.isActive(e)||!r&&!o||(t={searchActive:!1,infoActive:!1}),t}),d()(this,"customerModalEventsHandler",void 0),d()(this,"handleSetCustomer",e=>{ce(e).then(()=>{var{onSetCustomer:t}=this.props;t&&t(e)}),this.handleCloseDetails(),this.setState({searchModalOpen:!1})}),d()(this,"handleResetCustomer",()=>{this.handleCloseDetails(),this.props.onSetCustomer(null)}),d()(this,"handleCreateCustomer",()=>{R.a.resetCustomerContext(T.c.START_CREATE),this.props.dispatch(Object(W.a)())}),d()(this,"handleEditCustomer",()=>{var{customer:e}=this.props;R.a.resetCustomerContext(T.c.START_EDIT,e.id),Object(D.c)(Object(_.u)(e.id))}),d()(this,"handleToggleBlockCustomer",()=>{var{customer:t}=this.props;Object(D.c)(Object(_.r)({customer:t,currentPath:e.location.pathname}))}),d()(this,"handleOpenSearch",()=>{var{onSetActive:e}=this.props,t=e&&(()=>e(!0));this.setState({searchActive:!0},t)}),d()(this,"handleOpenInfo",()=>{var{onSetActive:e}=this.props,t=e&&(()=>e(!0));this.setState({infoActive:!0},t)}),d()(this,"handleCloseDetails",()=>{var{onSetActive:e}=this.props,t=e&&(()=>e(!1));this.setState({searchActive:!1,infoActive:!1},t)}),d()(this,"toggleSearchModal",()=>{this.setState({searchModalOpen:!this.state.searchModalOpen})}),d()(this,"handleCall",()=>{Object(A.g)(this.props.customer.contactNumber)}),d()(this,"renderSearchClientModal",()=>{var{isMatch:e}=this.props,{modalRef:t}=this.state;return j.a.createElement(F.i,{noPadding:!0},j.a.createElement(F.g,{onClose:this.toggleSearchModal,noBottomPadding:!0},Object(I.c)(oe())),j.a.createElement(F.c,{selfRef:this.setModalRef,onlyBottomPadding:!0},t&&j.a.createElement(G.a,{grow:1,isOpen:!0,mobile:e,handleSetCustomer:this.handleSetCustomer,handleCreateCustomer:this.handleCreateCustomer,stickySearch:e,scrollableView:t})))}),d()(this,"renderClientDetailsModal",(e,t)=>{var{customer:a,isMatch:n}=this.props;return j.a.createElement(F.i,null,j.a.createElement(F.g,{onClose:this.handleCloseDetails},Object(I.c)(re())),j.a.createElement(F.c,{onlyBottomPadding:!0},j.a.createElement(z.a,{customer:a,detailsMode:e,isMatch:n,dropdownActions:t}),j.a.createElement(q.a,{customer:a,grow:1})))}),this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({infoActive:!1,searchActive:!1,searchModalOpen:!1},this.deriveStateFromProps(t))}componentDidMount(){var{clientContext:{operation:e,clientId:t},customer:a}=this.props,n=!a||a.id!==t;R.a.resetCustomerContext(),n&&ue.includes(e)&&this.handleSetCustomer(t)}UNSAFE_componentWillReceiveProps(e){var t=this.deriveStateFromProps(e);t&&this.setState(t)}componentWillUnmount(){this.disableCustomerModalEventListeners()}isActive(e=this.props){var{isActive:t,onSetActive:a}=e;return void 0!==t?t:!a}disableCustomerModalEventListeners(){this.customerModalEventsHandler&&window.jQuery(window.document).off("customerUpdated customerDeleted",this.customerModalEventsHandler)}render(){var e=this.props,{className:t,isMatch:a,displayEmptyPlaceholder:n,customer:r,canResetCustomer:o,removeCustomerText:i,forceInfo:s,disableInfo:u,children:m,clientContext:p}=e,d=l()(e,["className","isMatch","displayEmptyPlaceholder","customer","canResetCustomer","removeCustomerText","forceInfo","disableInfo","children","clientContext"]),{searchActive:b,infoActive:h,searchModalOpen:y}=this.state,g=r&&r.id===T.d,O=this.isActive(),v=O&&b,E=O&&(h||s)&&r&&!g,N=E&&(!r.deletedAt||o),S=e=>[{show:a&&r&&!!r.contactNumber&&!r.obfuscatedContactNumber,onAction:this.handleCall,text:Object(I.c)("Call %{number}",{number:r&&r.contactNumber}),qaType:"customer-call"},{show:r&&!r.deletedAt,onAction:Object(Y.c)(e.canSeeCustomerDetails,this.handleEditCustomer),text:Object(I.c)(ae()),qaType:"customer-edit"},{show:r&&!r.deletedAt,onAction:this.handleToggleBlockCustomer,text:r&&r.blocked?Object(I.c)(te()):Object(I.c)(ee()),qaType:"customer-block"},{show:o,onAction:this.handleResetCustomer,text:i,danger:!0,qaType:"customer-remove"}];return j.a.createElement(Y.b,{keys:Q.a.CAN_SEE_CUSTOMER_DETAILS},e=>j.a.createElement(x.b,c()({grow:1,flex:"column",className:k()(Z.a.self,t)},f()(d,le)),!r||v?a&&!v?j.a.createElement(V.b,{onAction:this.toggleSearchModal,qaType:"add-client-rb"},Object(I.c)($())):j.a.createElement(G.a,{isOpen:v,mobile:a,autoFocus:v,handleOpenSearch:this.handleOpenSearch,handleSetCustomer:this.handleSetCustomer,handleCreateCustomer:this.handleCreateCustomer,grow:v?1:0}):j.a.createElement(z.a,{dropdownActions:S(e),detailsMode:N&&!a,customer:g?void 0:r,onAction:g?o?this.handleOpenSearch:void 0:u||E?void 0:this.handleOpenInfo}),!v&&j.a.createElement(x.b,{grow:1,shrink:1,flex:"column",className:Z.a.children},j.a.createElement(x.b,{grow:1,shrink:1,flex:"column",className:k()({[Z.a.withVerticalScroll]:!a})},n&&!a&&!r&&j.a.createElement(L.a,{icon:"fresh-no-results-found",iconColor:"original",text:Object(I.c)(X())}),m),!a&&r&&!g&&j.a.createElement(H.c,{getTranslateValue:ie,in:E,transitionAppear:!1},j.a.createElement(q.a,{className:k()(Z.a.customerStats,Z.a.withVerticalScroll),customer:r,grow:1}))),y&&this.renderSearchClientModal(),a&&E&&this.renderClientDetailsModal(N,S(e)),j.a.createElement(C.b,{exact:!0,path:"*".concat(_.c),component:U.a}),j.a.createElement(C.b,{exact:!0,path:"*".concat(_.p),component:U.b})))}},d()(r,"propTypes",se),d()(r,"defaultProps",{canResetCustomer:!1,forceInfo:!1,disableInfo:!1}),n=o))||n)||n}).call(this,a("yLpj"))},"u4U/":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("9oTK"),r=a.n(n),o=a("lSNA"),i=a.n(o),c=a("DzJC"),s=a.n(c),l=a("q1tI"),u=a.n(l),m=a("17x9"),p=a("TSYQ"),d=a.n(p),b=a("h96j"),h=a.n(b);class f extends l.Component{constructor(e){super(e),i()(this,"ref",Object(l.createRef)()),i()(this,"hasEventListener",!1),i()(this,"setIframeSize",(e,t)=>{this.setState({width:e,height:t})}),i()(this,"doIframe",e=>{if(this.ref.current){var t,{width:a,height:o}=this.props;a>0&&o>0&&this.setIframeSize({width:a,height:o});var i=this.ref.current.contentDocument,c=this.ref.current.contentWindow;if(e){i.documentElement.innerHTML=e;var s=[...i.querySelectorAll("img")].map(e=>new r.a(t=>{e.onload=()=>t()}));Object(n.all)(s).then(()=>this.onLoadImages())}this.hasEventListener&&(this.hasEventListener=!0,c.addEventListener("resize",this.onResize)),this.props.htmlHasRootElement?("100%"===i.body.children[0].style.height&&(i.body.children[0].style.height="auto"),t=((e,t,a)=>{var n=((e,t)=>{var a=t.currentStyle||e.getComputedStyle(t),{marginLeft:n,marginRight:r,marginTop:o,marginBottom:i}=a;return{left:n,right:r,top:o,bottom:i}})(t,e.body),r=parseInt(n.left,10)+parseInt(n.right,10),o=parseInt(n.top,10)+parseInt(n.bottom,10),{offsetHeight:i,offsetWidth:c}=a;return{width:r+c,height:o+i}})(i,c,i.body.children[0])):t=(e=>({width:e.body.scrollWidth,height:e.body.scrollHeight}))(i),this.setIframeSize(a||t.width,o||t.height)}else this.setState({mounted:!1},()=>this.setState({mounted:!0}))}),i()(this,"onLoadImages",s()(()=>this.doIframe(),1e3)),this.state={mounted:!1,width:e.width,height:e.height}}componentDidMount(){this.setState({mounted:!0})}componentDidUpdate(e,t){var{html:a,htmlHasRootElement:n,width:r,height:o}=this.props,{mounted:i}=this.state;!t.mounted&&i&&this.doIframe(a),e.width===r&&e.height===o&&e.html===a&&e.htmlHasRootElement===n||this.doIframe(this.props.html)}componentWillUnmount(){this.ref.current.contentWindow.removeEventListener("resize",this.onLoadImages)}render(){var{className:e,title:t,qaType:a}=this.props,{height:n,width:r}=this.state,{ref:o}=this;return u.a.createElement("iframe",{className:d()(h.a.self,e),ref:o,title:t,"data-qa":a,frameBorder:"0",style:{width:r,height:n,minHeight:n}})}}i()(f,"propTypes",{className:m.string,title:m.string,qaType:m.string,html:m.string,htmlHasRootElement:m.bool,width:Object(m.oneOfType)([m.number,m.string]),height:m.number}),i()(f,"defaultProps",{htmlHasRootElement:!1,width:0,height:0});var y=f},uHid:function(e,t,a){"use strict";(function(e){var t=a("lSNA"),n=a.n(t),r=a("q1tI"),o=a("17x9"),i=a.n(o);class c extends r.PureComponent{constructor(e){super(e),this.state={isRendered:!1}}componentDidMount(){this.timeout=e.requestAnimationFrame(()=>{e.requestAnimationFrame(()=>{this.setState({isRendered:!0})})})}componentWillUnmount(){e.cancelAnimationFrame(this.timeout)}render(){var e=this.state.isRendered?this.props:{};return this.props.children(e)}}n()(c,"propTypes",{children:i.a.func})}).call(this,a("yLpj"))},uVYG:function(e,t,a){"use strict";a.d(t,"a",(function(){return qe}));var n={};a.r(n),a.d(n,"cancelledBy",(function(){return q})),a.d(n,"noShow",(function(){return L})),a.d(n,"undoNoShow",(function(){return F})),a.d(n,"saleCreated",(function(){return B})),a.d(n,"voided",(function(){return V})),a.d(n,"notificationSent",(function(){return H})),a.d(n,"appointmentCreated",(function(){return Q})),a.d(n,"confirmedByClient",(function(){return W})),a.d(n,"ratingCreated",(function(){return z})),a.d(n,"postTipSucceeded",(function(){return J})),a.d(n,"staffChanged",(function(){return Z})),a.d(n,"rescheduled",(function(){return X})),a.d(n,"updated",(function(){return $}));var r={};a.r(r),a.d(r,"cancelledBy",(function(){return ae})),a.d(r,"noShow",(function(){return oe})),a.d(r,"undoNoShow",(function(){return ie})),a.d(r,"saleCreated",(function(){return le})),a.d(r,"voided",(function(){return pe})),a.d(r,"notificationSent",(function(){return he})),a.d(r,"appointmentCreated",(function(){return ge})),a.d(r,"confirmedByClient",(function(){return Ee})),a.d(r,"ratingCreated",(function(){return je})),a.d(r,"postTipSucceeded",(function(){return Pe})),a.d(r,"staffChanged",(function(){return ke})),a.d(r,"rescheduled",(function(){return we})),a.d(r,"updated",(function(){return Ce}));var o=a("VkAN"),i=a.n(o),c=a("lSNA"),s=a.n(c),l=a("q1tI"),u=a.n(l),m=a("17x9"),p=a.n(m),d=a("PhEd"),b=a("/MKj"),h=a("XOD0"),f=a("QXy2"),y=a("Qs7Y"),g=a("dhJQ"),O=a("Vows"),v=a("nIiI"),E=a("ePPS"),j=a("nbpM"),N=a("c0W2"),S=a("gjK0"),P=a.n(S),k=a("sQHA"),w=a("KvEn"),C=a("3wSE"),T=a("5KxP");function I(){var e=i()(["at"]);return I=function(){return e},e}var A=e=>({a:t=>u.a.createElement(C.n,{linkTo:Object(T.h)(e),replace:!0,inheritFontSize:!0},t),price:e=>u.a.createElement(w.a,{price:e.toString()})}),R=e=>({a:t=>u.a.createElement(C.n,{linkTo:Object(T.h)(e),replace:!0,inheritFontSize:!0},t)}),M=e=>({a:t=>e?u.a.createElement(C.n,{onAction:e,inheritFontSize:!0},t):{content:t}}),D=e=>({a:t=>u.a.createElement(C.n,{onAction:e,inheritFontSize:!0,qaType:"cancellation-policy-entry"},t)}),x=e=>()=>u.a.createElement(v.a,{date:e,dateFormat:"ddd, D MMM YYYY",formatTime:!0,separator:Object(E.c)(I())});function q({metadata:e}){var{customerName:t,employeeName:a,feeGross:n,saleId:r}=e;return t&&n?Object(E.f)("Cancelled online by %{customerName} with <a><price>%{feePrice}</price> fee</a>",{employeeName:a,customerName:t,feePrice:n},A(r)):t?Object(E.f)("Cancelled online by %{customerName}",{employeeName:a,customerName:t,feePrice:n},A(r)):n?Object(E.f)("Cancelled by %{employeeName} with <a><price>%{feePrice}</price> fee</a>",{employeeName:a,feePrice:n},A(r)):Object(E.c)("Cancelled by %{employeeName}",{employeeName:a})}function L({customerOrEmployeeName:e,metadata:t}){var{feeGross:a,saleId:n}=t;return a?Object(E.f)("Set to No-Show by %{customerOrEmployeeName} with <a><price>%{feePrice}</price> fee</a>",{customerOrEmployeeName:e,feePrice:a},A(n)):Object(E.c)("Set to No-Show by %{customerOrEmployeeName}",{customerOrEmployeeName:e})}function F({customerOrEmployeeName:e,metadata:t}){var{feeGross:a,saleId:n}=t;return a?Object(E.f)("No-show undone by %{customerOrEmployeeName} with <a><price>%{feePrice}</price> fee</a>",{customerOrEmployeeName:e,feePrice:a},A(n)):Object(E.c)("No-show undone by %{customerOrEmployeeName}",{customerOrEmployeeName:e})}function B({customerOrEmployeeName:e,metadata:t}){var{receiptNumber:a,saleId:n}=t;return Object(E.f)("Checked out to <a>invoice %{receiptNumber}</a> by %{customerOrEmployeeName}",{customerOrEmployeeName:e,receiptNumber:a},R(n))}function V({customerOrEmployeeName:e,metadata:t}){var{receiptNumber:a,saleId:n}=t;return Object(E.f)("Voided <a>invoice %{receiptNumber}</a> by %{customerOrEmployeeName}",{customerOrEmployeeName:e,receiptNumber:a},R(n))}function H({metadata:e,onNotificationClick:t}){var a,n,r=e.status===k.u.SENT?"sent":"failed",{notificationId:o}=e;return(null===(a=(e=>({[k.s.CANCELLATION]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Cancellation Email</a> sent",null,e),failed:Object(E.f)("<a>Cancellation Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Cancellation SMS</a> sent",null,e),failed:Object(E.f)("<a>Cancellation SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Cancellation Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Cancellation Push Notification</a> failed to send",null,e)}},[k.s.CONFIRMATION]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Confirmation Email</a> sent",null,e),failed:Object(E.f)("<a>Confirmation Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Confirmation SMS</a> sent",null,e),failed:Object(E.f)("<a>Confirmation SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Confirmation Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Confirmation Push Notification</a> failed to send",null,e)}},[k.s.REMINDER]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reminder Email</a> sent",null,e),failed:Object(E.f)("<a>Reminder Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reminder SMS</a> sent",null,e),failed:Object(E.f)("<a>Reminder SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reminder Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Reminder Push Notification</a> failed to send",null,e)}},[k.s.RESCHEDULING]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reschedule Email</a> sent",null,e),failed:Object(E.f)("<a>Reschedule Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reschedule SMS</a> sent",null,e),failed:Object(E.f)("<a>Reschedule SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reschedule Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Reschedule Push Notification</a> failed to send",null,e)}},[k.s.RESCHEDULE]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reschedule Email</a> sent",null,e),failed:Object(E.f)("<a>Reschedule Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reschedule SMS</a> sent",null,e),failed:Object(E.f)("<a>Reschedule SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reschedule Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Reschedule Push Notification</a> failed to send",null,e)}},[k.s.THANK_YOU]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Thank You Email</a> sent",null,e),failed:Object(E.f)("<a>Thank You Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Thank You SMS</a> sent",null,e),failed:Object(E.f)("<a>Thank You SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Thank You Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Thank You Push Notification</a> failed to send",null,e)}},[k.s.THANK_YOU_FOR_TIPPING]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Thank You For Tipping Email</a> sent",null,e),failed:Object(E.f)("<a>Thank You For Tipping Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Thank You For Tipping SMS</a> sent",null,e),failed:Object(E.f)("<a>Thank You For Tipping SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Thank You For Tipping Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Thank You For Tipping Push Notification</a> failed to send",null,e)}},[k.s.NO_SHOW]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>No-show Email</a> sent",null,e),failed:Object(E.f)("<a>No-show Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>No-show SMS</a> sent",null,e),failed:Object(E.f)("<a>No-show SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>No-show Push Notification</a> sent",null,e),failed:Object(E.f)("<a>No-show Push Notification</a> failed to send",null,e)}},[k.s.CONFIRMATION_REQUEST]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Confirmation Request Email</a> sent",null,e),failed:Object(E.f)("<a>Confirmation Request Email</a> failed to send",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Confirmation Request SMS</a> sent",null,e),failed:Object(E.f)("<a>Confirmation Request SMS</a> failed to send",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Confirmation Request Push Notification</a> sent",null,e),failed:Object(E.f)("<a>Confirmation Request Push Notification</a> failed to send",null,e)}}}))(M(o?()=>t(o):void 0))[e.type])||void 0===a||null===(n=a[e.transportMethod])||void 0===n?void 0:n[r])||""}var U=a("bTSH"),Y=a("pKoe");function Q({customerOrEmployeeName:e,metadata:t,appointmentSummary:a,reference:n,showPolicyFn:r}){var{primaryBooking:{marketplaceAppointmentConfirmation:o}}=a,i=String(n).toUpperCase(),{appointmentFeePolicyVariant:c,appointmentFeePolicyAdvanceTimeInMinutes:s}=t,l=c&&!o&&U.b[c]!==U.b.no_fees,u=l?Object(Y.g)(c,s).toLowerCase():"",m=D(r),p={customerOrEmployeeName:e,appointmentFeePolicyName:u,refNumber:i};switch(t.type){case k.p.CALENDAR:return l?Object(E.f)("Booked by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",p,m):Object(E.c)("Booked by %{customerOrEmployeeName}, reference %{refNumber}",p);case k.p.ONLINE:case k.p.WALK_IN:case k.p.ONLINE_BUTTON:case k.p.FACEBOOK:case k.p.MARKETPLACE:return function(e,t,a,n){switch(a){case k.k.BOOK_NOW_LINK:return n?Object(E.f)("Booked using Book now link by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked using Book now link by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.FACEBOOK:return n?Object(E.f)("Booked on Facebook by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked on Facebook by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.FRESHA:return n?Object(E.f)("Booked on Fresha by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked on Fresha by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.INSTAGRAM:return n?Object(E.f)("Booked on Instagam by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked on Instagram by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.GOOGLE_RESERVE:return n?Object(E.f)("Booked on Google by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked on Google by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.MARKETING:return n?Object(E.f)("Booked using a marketing message by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked using a marketing message by %{customerOrEmployeeName}, reference %{refNumber}",e);case k.k.OFFLINE:default:return n?Object(E.f)("Booked by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber}",e,t):Object(E.c)("Booked by %{customerOrEmployeeName}, reference %{refNumber}",e)}}(p,m,t.appointmentChannelVariant,l);default:return l?Object(E.f)("Booked, reference %{refNumber} with <a>%{appointmentFeePolicyName}</a>",p,m):Object(E.c)("Booked, reference %{refNumber}",p)}}var _=a("+TO7");function K(){var e=i()(["Client confirmed appointment with card"]);return K=function(){return e},e}function W({appointmentSummary:e,showPolicyFn:t}){var a,{policy:n}=e;if(!n)return null;var r=null==e||null===(a=e.customer)||void 0===a?void 0:a.firstName,o=D(t);return r&&n.variant===_.a.NO_FEES?Object(E.c)("%{firstName} confirmed appointment with card",{firstName:r}):r&&n.variant!==_.a.NO_FEES?Object(E.f)("%{firstName} confirmed appointment with <a>%{appointmentFeePolicyName}</a>",{firstName:r,appointmentFeePolicyName:Object(Y.g)(n.variant,n.advanceTimeInMinutes).toLowerCase()},o):n.variant===_.a.NO_FEES?Object(E.c)(K()):Object(E.f)("Client confirmed appointment with <a>%{appointmentFeePolicyName}</a>",{appointmentFeePolicyName:Object(Y.g)(n.variant,n.advanceTimeInMinutes).toLowerCase()},o)}function G(){var e=i()(["Rating created"]);return G=function(){return e},e}function z(){return Object(E.c)(G())}function J({metadata:e}){var{employeeName:t,multipleEmployee:a,customerFirstName:n,tipAmount:r,receiptNumber:o,saleId:i}=e;return a?Object(E.f)("<price>%{tipAmount}</price> tip paid to <a>invoice %{receiptNumber}</a> by %{customerFirstName}",{customerFirstName:n,tipAmount:r,receiptNumber:o},A(i)):Object(E.f)("<price>%{tipAmount}</price> tip for %{employeeName} paid to <a>invoice %{receiptNumber}</a> by %{customerFirstName}",{employeeName:t,customerFirstName:n,tipAmount:r,receiptNumber:o},A(i))}function Z({metadata:e}){var{employeeName:t,multipleStaff:a,previousStaff:n,performingStaff:r}=e,{firstName:o}=n||{},{firstName:i}=r||{};return a?Object(E.c)("Staff set changed in appointment by %{employeeName}",{employeeName:t,previousStaffName:o,performingStaffName:i}):Object(E.c)("Staff changed from %{previousStaffName} to %{performingStaffName} in appointment by %{employeeName}",{employeeName:t,previousStaffName:o,performingStaffName:i})}function X({customerOrEmployeeName:e,metadata:t}){var{newStartTime:a,previousStartTime:n}=t;return Object(E.f)("Appointment rescheduled from <previousDate></previousDate> to <newDate></newDate> by %{customerOrEmployeeName}",{customerOrEmployeeName:e},{previousDate:x(a),newDate:x(n)})}function $({metadata:e}){var{employeeName:t}=e;return Object(E.c)("Appointment updated by %{employeeName}",{employeeName:t})}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae({metadata:e,datetime:t}){var{customerName:a,employeeName:n,feeGross:r,saleId:o}=e;return a&&r?Object(E.f)("Cancelled online by %{customerName} with <a><price>%{feePrice}</price> fee</a> at <datetime></datetime>",{employeeName:n,customerName:a,feePrice:r},te(te({},A(o)),{},{datetime:t})):a?Object(E.f)("Cancelled online by %{customerName} at <datetime></datetime>",{employeeName:n,customerName:a,feePrice:r},te(te({},A(o)),{},{datetime:t})):r?Object(E.f)("Cancelled by %{employeeName} with <a><price>%{feePrice}</price> fee</a> at <datetime></datetime>",{employeeName:n,feePrice:r},te(te({},A(o)),{},{datetime:t})):Object(E.f)("Cancelled by %{employeeName} at <datetime></datetime>",{employeeName:n},{datetime:t})}function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function oe({customerOrEmployeeName:e,metadata:t,datetime:a}){var{feeGross:n,saleId:r}=t,o=re(re({},A(r)),{},{datetime:a});return n?Object(E.f)("Set to No-Show by %{customerOrEmployeeName} with <a><price>%{feePrice}</price> fee</a> at <datetime></datetime>",{customerOrEmployeeName:e,feePrice:n},o):Object(E.f)("Set to No-Show by %{customerOrEmployeeName} at <datetime></datetime>",{customerOrEmployeeName:e},o)}function ie({customerOrEmployeeName:e,metadata:t,datetime:a}){var{feeGross:n,saleId:r}=t,o=re(re({},A(r)),{},{datetime:a});return n?Object(E.f)("No-show undone by %{customerOrEmployeeName} with <a><price>%{feePrice}</price> fee</a> at <datetime></datetime>",{customerOrEmployeeName:e,feePrice:n},o):Object(E.f)("No-show undone by %{customerOrEmployeeName} at <datetime></datetime>",{customerOrEmployeeName:e},o)}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function le({customerOrEmployeeName:e,metadata:t,datetime:a}){var{receiptNumber:n,saleId:r}=t;return Object(E.f)("Checked out to <a>invoice %{receiptNumber}</a> by %{customerOrEmployeeName} at <datetime></datetime>",{customerOrEmployeeName:e,receiptNumber:n},se(se({},R(r)),{},{datetime:a}))}function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe({customerOrEmployeeName:e,metadata:t,datetime:a}){var{receiptNumber:n,saleId:r}=t;return Object(E.f)("Voided <a>invoice %{receiptNumber}</a> by %{customerOrEmployeeName} at <datetime></datetime>",{customerOrEmployeeName:e,receiptNumber:n},me(me({},R(r)),{},{datetime:a}))}function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function he({metadata:e,onNotificationClick:t,datetime:a}){var n,r,o=e.status===k.u.SENT?"sent":"failed",{notificationId:i}=e;return(null===(n=(e=>({[k.s.CANCELLATION]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Cancellation Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Cancellation Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Cancellation SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Cancellation SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Cancellation Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Cancellation Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.CONFIRMATION]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Confirmation Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Confirmation SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Confirmation Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.REMINDER]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reminder Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reminder Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reminder SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reminder SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reminder Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reminder Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.RESCHEDULING]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reschedule Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reschedule SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reschedule Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.RESCHEDULE]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Reschedule Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Reschedule SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Reschedule Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Reschedule Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.THANK_YOU]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Thank You Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Thank You SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Thank You Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.THANK_YOU_FOR_TIPPING]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Thank You For Tipping Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You For Tipping Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Thank You For Tipping SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You For Tipping SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Thank You For Tipping Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Thank You For Tipping Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.NO_SHOW]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>No-show Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>No-show Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>No-show SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>No-show SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>No-show Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>No-show Push Notification</a> failed to send at <datetime></datetime>",null,e)}},[k.s.CONFIRMATION_REQUEST]:{[k.t.EMAIL]:{sent:Object(E.f)("<a>Confirmation Request Email</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation Request Email</a> failed to send at <datetime></datetime>",null,e)},[k.t.SMS]:{sent:Object(E.f)("<a>Confirmation Request SMS</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation Request SMS</a> failed to send at <datetime></datetime>",null,e)},[k.t.PUSH]:{sent:Object(E.f)("<a>Confirmation Request Push Notification</a> sent at <datetime></datetime>",null,e),failed:Object(E.f)("<a>Confirmation Request Push Notification</a> failed to send",null,e)}}}))(be(be({},M(i?()=>t(i):void 0)),{},{datetime:a}))[e.type])||void 0===n||null===(r=n[e.transportMethod])||void 0===r?void 0:r[o])||""}function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge({customerOrEmployeeName:e,metadata:t,appointmentSummary:a,reference:n,showPolicyFn:r,datetime:o}){var{primaryBooking:{marketplaceAppointmentConfirmation:i}}=a,c=String(n).toUpperCase(),{appointmentFeePolicyVariant:s,appointmentFeePolicyAdvanceTimeInMinutes:l}=t,u=s&&!i&&U.b[s]!==U.b.no_fees,m=u?Object(Y.g)(s,l).toLowerCase():"",p=ye(ye({},D(r)),{},{datetime:o}),d={customerOrEmployeeName:e,appointmentFeePolicyName:m,refNumber:c,datetime:o};switch(t.type){case k.p.CALENDAR:return u?Object(E.f)("Booked by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",d,p):Object(E.f)("Booked by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",d,p);case k.p.ONLINE:case k.p.WALK_IN:case k.p.ONLINE_BUTTON:case k.p.FACEBOOK:case k.p.MARKETPLACE:return function(e,t,a,n){switch(a){case k.k.BOOK_NOW_LINK:return n?Object(E.f)("Booked using Book now link by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked using Book now link by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.FACEBOOK:return n?Object(E.f)("Booked on Facebook by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked on Facebook by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.FRESHA:return n?Object(E.f)("Booked on Fresha by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked on Fresha by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.INSTAGRAM:return n?Object(E.f)("Booked on Instagam by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked on Instagram by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.GOOGLE_RESERVE:return n?Object(E.f)("Booked on Google by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked on Google by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.MARKETING:return n?Object(E.f)("Booked using a marketing message by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked using a marketing message by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t);case k.k.OFFLINE:default:return n?Object(E.f)("Booked by %{customerOrEmployeeName} with <a>%{appointmentFeePolicyName}</a>, reference %{refNumber} at <datetime></datetime>",e,t):Object(E.f)("Booked by %{customerOrEmployeeName}, reference %{refNumber} at <datetime></datetime>",e,t)}}(d,p,t.appointmentChannelVariant,u);default:return u?Object(E.f)("Booked, reference %{refNumber} with <a>%{appointmentFeePolicyName}</a> at <datetime></datetime>",d,p):Object(E.f)("Booked, reference %{refNumber} at <datetime></datetime>",d,p)}}function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ee({appointmentSummary:e,showPolicyFn:t,datetime:a}){var n,{policy:r}=e;if(!r)return null;var o=null==e||null===(n=e.customer)||void 0===n?void 0:n.firstName,i=ve(ve({},D(t)),{},{datetime:a});return o&&r.variant===_.a.NO_FEES?Object(E.f)("%{firstName} confirmed appointment with card at <datetime></datetime>",{firstName:o},i):o&&r.variant!==_.a.NO_FEES?Object(E.f)("%{firstName} confirmed appointment with <a>%{appointmentFeePolicyName}</a> at <datetime></datetime>",{firstName:o,appointmentFeePolicyName:Object(Y.g)(r.variant,r.advanceTimeInMinutes).toLowerCase()},i):r.variant===_.a.NO_FEES?Object(E.f)("Client confirmed appointment with card at <datetime></datetime>",null,i):Object(E.f)("Client confirmed appointment with <a>%{appointmentFeePolicyName}</a> at <datetime></datetime>",{appointmentFeePolicyName:Object(Y.g)(r.variant,r.advanceTimeInMinutes).toLowerCase()},i)}function je({datetime:e}){return Object(E.f)("Rating created at <datetime></datetime>",null,{datetime:e})}function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Pe({metadata:e,datetime:t}){var{employeeName:a,multipleEmployee:n,customerFirstName:r,tipAmount:o,receiptNumber:i,saleId:c}=e;return n?Object(E.f)("<price>%{tipAmount}</price> tip paid to <a>invoice %{receiptNumber}</a> by %{customerFirstName}  at <datetime></datetime>",{customerFirstName:r,tipAmount:o,receiptNumber:i},Se(Se({},A(c)),{},{datetime:t})):Object(E.f)("<price>%{tipAmount}</price> tip for %{employeeName} paid to <a>invoice %{receiptNumber}</a> by %{customerFirstName} at <datetime></datetime>",{employeeName:a,customerFirstName:r,tipAmount:o,receiptNumber:i},Se(Se({},A(c)),{},{datetime:t}))}function ke({metadata:e,datetime:t}){var{employeeName:a,multipleStaff:n,previousStaff:r,performingStaff:o}=e,{firstName:i}=r||{},{firstName:c}=o||{};return n?Object(E.f)("Staff set changed in appointment by %{employeeName} at <datetime></datetime>",{employeeName:a,previousStaffName:i,performingStaffName:c},{datetime:t}):Object(E.f)("Staff changed from %{previousStaffName} to %{performingStaffName} in appointment by %{employeeName} at <datetime></datetime>",{employeeName:a,previousStaffName:i,performingStaffName:c},{datetime:t})}function we({customerOrEmployeeName:e,metadata:t,datetime:a}){var{newStartTime:n,previousStartTime:r}=t,o=x(r);return Object(E.f)("Appointment rescheduled from <previousdate></previousdate> to <newdate></newdate> by %{customerOrEmployeeName} at <datetime></datetime>",{customerOrEmployeeName:e},{previousdate:o,newdate:x(n),datetime:a})}function Ce({metadata:e,datetime:t}){var{employeeName:a}=e;return Object(E.f)("Appointment updated by %{employeeName} at <datetime></datetime>",{employeeName:a},{datetime:t})}var Te,Ie,Ae;function Re(){var e=i()(["at"]);return Re=function(){return e},e}function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(){var e=i()(["at"]);return De=function(){return e},e}var xe=Object(b.b)(e=>({isReshedulEnabled:j.a.isReshedulEnabled(e)}))((Ae=Ie=class extends l.Component{constructor(...e){super(...e),s()(this,"showPolicy",()=>{var{appointmentSummary:{primaryBooking:e}}=this.props;Object(h.c)(Object(N.w)(e.id))})}getMessageNode({withDates:e}={}){var{onNotificationClick:t,entry:{code:a,metadata:o,reference:i,timestamp:c},appointmentSummary:l}=this.props,m=(null==o?void 0:o.employeeName)||(null==o?void 0:o.customerName);return((e,t=!1)=>{var a=t?r:n;switch(e){case k.r.CREATED_BY_CUSTOMER:case k.r.CREATED_BY_EMPLOYEE:return a.appointmentCreated;case k.r.CANCELLED_BY_CUSTOMER:case k.r.CANCELLED_BY_EMPLOYEE:return a.cancelledBy;case k.r.NO_SHOW:return a.noShow;case k.r.NO_SHOW_UNDONE:return a.undoNoShow;case k.r.SALE_CREATED:return a.saleCreated;case k.r.SALE_VOIDED:return a.voided;case k.r.NOTIFICATION_SENT:case k.r.CLIENT_NOTIFICATION_SENT:return a.notificationSent;case k.r.RATING_CREATED:return a.ratingCreated;case k.r.CONFIRMED_BY_CLIENT:return a.confirmedByClient;case k.r.POST_TIP_SUCCEEDED:return a.postTipSucceeded;case k.r.STAFF_CHANGED:return a.staffChanged;case k.r.RESCHEDULED_BY_EMPLOYEE:case k.r.RESCHEDULED_BY_CUSTOMER:return a.rescheduled;case k.r.UPDATED:return a.updated;default:return()=>""}})(a,e)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({customerOrEmployeeName:m,appointmentSummary:l,onNotificationClick:t,metadata:o,reference:i,showPolicyFn:this.showPolicy},e&&{datetime:()=>u.a.createElement(v.a,{date:c,dateFormat:"ddd, D MMM YYYY",formatTime:!0,separator:Object(E.c)(De())})}))}render(){var{entry:{timestamp:e},isMatch:t,isReshedulEnabled:a}=this.props;return t?u.a.createElement(O.g,{description:a?u.a.createElement(d.Text,{type:"fresha-caption",color:"gray100"},this.getMessageNode()):this.getMessageNode(),topNote:u.a.createElement(v.a,{date:e,dateFormat:"ddd, D MMM YYYY",formatTime:!0,separator:Object(E.c)(Re())})}):a?u.a.createElement(d.Text,{className:P.a.self,type:"fresha-caption",color:"gray100"},this.getMessageNode({withDates:!0})):u.a.createElement(y.d,{className:P.a.self,type:"inherit"},this.getMessageNode({withDates:!0}))}},s()(Ie,"propTypes",{appointmentSummary:p.a.object.isRequired,entry:p.a.shape({code:p.a.string,reference:p.a.string,timestamp:f.b,metadata:p.a.shape({notificationId:p.a.string})}).isRequired,onNotificationClick:p.a.func.isRequired,isMatch:p.a.bool,isReshedulEnabled:p.a.bool}),Te=Ae))||Te,qe=Object(g.g)()(xe)},ww3E:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a("lSNA"),r=a.n(n),o=a("QILm"),i=a.n(o),c=a("q1tI"),s=a.n(c),l=a("17x9"),u=a.n(l),m=a("TSYQ"),p=a.n(m),d=a("QXy2"),b=a("FAYg"),h=a("i6OX"),f=a("YeTj"),y=a.n(f);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){var{active:t,as:a,disabled:n,inGroup:o,type:l,children:u,className:m,iconClass:d,iconCollapse:f,collapse:O,qaType:v,noFillIcon:E}=e,j=i()(e,["active","as","disabled","inGroup","type","children","className","iconClass","iconCollapse","collapse","qaType","noFillIcon"]),N=l;"string"==typeof l&&(N=l.split(" ")),Array.isArray(N)||(N=[]);var S=p()(y.a.btn,y.a.btnCollapse,N.map(e=>y.a["btn-".concat(e)]),{[y.a.active]:t,[y.a.disabled]:n,[y.a.inGroup]:o,[y.a[O]]:f,[y.a.whiteIcon]:!E},m),P=u;return f&&(P=[s.a.createElement("span",{key:"1",className:p()(y.a.childrenCollapse,y.a[O])},u),s.a.createElement(h.b,{key:"2",name:f,className:p()(d,y.a.iconCollapse,y.a[O])})]),!b.DISABLE_QA_TYPE&&v&&(j["data-qa"]=v),Object(c.createElement)(a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({className:S,disabled:n},j),P)}O.defaultProps={as:"button",type:"default",collapse:"small"},O.propTypes={type:Object(d.c)(Object.keys(y.a).filter(e=>/^btn-/g.test(e)).map(e=>e.substring(4))),className:u.a.string,active:u.a.bool,as:u.a.oneOfType([u.a.string,u.a.func]),disabled:u.a.bool,inGroup:u.a.bool,children:u.a.node,iconClass:u.a.string,iconCollapse:u.a.string,collapse:u.a.oneOf(["extra-small","small","medium"]),qaType:u.a.string,noFillIcon:u.a.bool}},yAJH:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("QILm"),l=a.n(s),u=a("lSNA"),m=a.n(u),p=a("N1om"),d=a.n(p),b=a("vN+2"),h=a.n(b),f=a("q1tI"),y=a.n(f),g=a("17x9"),O=a.n(g),v=a("TSYQ"),E=a.n(v),j=a("PhEd"),N=a("/MKj"),S=a("kas2"),P=a("IiP0"),k=a("Jje6"),w=a("dhJQ"),C=a("6kH+"),T=a("y6ah"),I=a("Qs7Y"),A=a("ITHA"),R=a("Vows"),M=a("nbpM"),D=a("7c8Z"),x=a.n(D),q=Object(T.a)(e=>0===e.items.length,null)(n=Object(w.g)()(n=Object(N.b)(e=>({isReshedulEnabled:M.a.isReshedulEnabled(e)}))((o=r=class extends f.Component{constructor(...e){super(...e),m()(this,"onAction",e=>this.props.onAddItem(e.id))}shouldComponentUpdate({items:e}){return e!==this.props.items}render(){var e=this.props,{className:t,title:a,items:n,onAddItem:r,color:o,isMatch:i,isReshedulEnabled:s}=e,u=l()(e,["className","title","items","onAddItem","color","isMatch","isReshedulEnabled"]),m=Object(P.e)(o);return y.a.createElement(k.b,c()({className:E()(x.a.self,t)},u),i?y.a.createElement(C.b,{className:x.a.stickySectionHeader,label:y.a.createElement(k.b,{flex:"row",justifyContent:"space-between"},a),suffix:m&&y.a.createElement(k.b,{className:x.a.colorDot,style:{backgroundColor:m}})}):s?y.a.createElement(j.Text,{className:x.a.sectionHeader,type:"fresha-h3",color:"gray100",qaType:d()(a)},a):y.a.createElement(I.d,{className:x.a.sectionHeader,type:"group-title",qaType:d()(a)},a),y.a.createElement(A.e,{className:x.a.list},y.a.createElement(k.b,{className:E()(x.a.line,{[x.a.hasColor]:m}),style:{backgroundColor:Object(P.e)(o)}}),n.map(e=>y.a.createElement(R.r,c()({key:e.id,onAction:this.onAction,actionData:e},Object(S.b)(e),{qaType:"spl-result-item-".concat(d()(e.name))})))))}},m()(r,"propTypes",{id:O.a.string,className:O.a.string,color:O.a.string,title:O.a.string,items:O.a.arrayOf(O.a.object),onAddItem:O.a.func,isMatch:O.a.bool,isReshedulEnabled:O.a.bool}),m()(r,"defaultProps",{onAddItem:h.a}),n=o))||n)||n)||n},yDb1:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var n,r,o,i=a("lSNA"),c=a.n(i),s=a("q1tI"),l=a.n(s),u=a("/MKj"),m=a("17x9"),p=a.n(m),d=a("5ZU+"),b=a("nbpM"),h=a("XOD0"),f=a("c0W2"),y=a("VkAN"),g=a.n(y),O=a("ePPS"),v=a("3wSE"),E=a("/Q2I"),j=a("ZO1O"),N=a("dhJQ"),S=a("kZhr"),P=a("uZ2f");function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(){var e=g()(["Add an appointment note (visible to staff only)"]);return C=function(){return e},e}function T(){var e=g()(["Notes visible to staff only"]);return T=function(){return e},e}function I(){var e=g()(["Appointment notes"]);return I=function(){return e},e}var A,R,M,D=Object(N.g)()(n=Object(S.q)({form:"edit-appointment-note"})((o=r=class extends s.PureComponent{render(){var{isMatch:e}=this.props;return l.a.createElement(P.s,{name:"notes",type:"textarea",multiline:!0,rows:e?1:3,basis:"100%",label:e?void 0:Object(O.c)(I()),placeholder:e?Object(O.c)(T()):Object(O.c)(C())})}},c()(r,"propTypes",w(w({},S.Q),{},{isMatch:p.a.bool.isRequired})),n=o))||n)||n;function x(){var e=g()(["Save"]);return x=function(){return e},e}function q(){var e=g()(["Edit Appointment Notes"]);return q=function(){return e},e}var L,F,B,V=p.a.shape({notes:p.a.string}).isRequired,H=Object(u.b)(null,{submitForm:function(){return Object(S.hb)("edit-appointment-note")}})((M=R=class extends s.PureComponent{render(){return l.a.createElement(E.i,null,l.a.createElement(E.g,{secondaryAction:l.a.createElement(v.e,{onAction:this.props.handleCancel,replace:!0})},Object(O.c)(q())),l.a.createElement(E.c,{noPadding:!0},l.a.createElement(j.d,{type:"plain popup-form bottom-space"},l.a.createElement(D,{onSubmit:this.props.handleSubmit,initialValues:this.props.initialValues}))),l.a.createElement(E.e,{flex:"column",justifyContent:"space-between"},l.a.createElement(E.a,{type:v.f,onAction:this.props.submitForm},Object(O.c)(x()))))}},c()(R,"propTypes",{submitForm:p.a.func.isRequired,handleCancel:p.a.func.isRequired,handleSubmit:p.a.func.isRequired,initialValues:V}),A=M))||A;function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=Object(u.b)(e=>{var{primaryBooking:t}=b.a.getAppointmentSummary(e);return{id:t.id,initialValues:{notes:t.notes}}},{})((B=F=class extends s.PureComponent{constructor(...e){super(...e),c()(this,"handleSubmit",e=>{var t={data:{attributes:Y({},e),relationships:{booking:{data:{id:this.props.id,type:"bookings"}}},type:"booking-update-note-requests"}};d.a.createBookingNote(t).then(()=>{this.navigateBack()})}),c()(this,"handleCancel",()=>{this.navigateBack()}),c()(this,"navigateBack",()=>{Object(h.b)(Object(f.l)(this.props.id))})}render(){var{initialValues:e}=this.props;return l.a.createElement(H,{initialValues:e,handleCancel:this.handleCancel,handleSubmit:this.handleSubmit})}},c()(F,"propTypes",{id:p.a.string,initialValues:V}),L=B))||L},ydOK:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return J}));var n,r,o,i,c,s=a("pVnL"),l=a.n(s),u=a("VkAN"),m=a.n(u),p=a("QILm"),d=a.n(p),b=a("lSNA"),h=a.n(b),f=a("E+oP"),y=a.n(f),g=a("q1tI"),O=a.n(g),v=a("17x9"),E=a.n(v),j=a("/MKj"),N=a("TSYQ"),S=a.n(N),P=a("PhEd"),k=a("WV/M"),w=a("nbpM"),C=a("ePPS"),T=a("mHXU"),I=a("i6OX"),A=a("/Q2I"),R=a("Jje6"),M=a("DTRD"),D=a("kZhr"),x=a("N7pg"),q=a("bymT"),L=a("JqEL"),F=a("9hcw"),B=a("8rET"),V=a.n(B),H=a("dhJQ"),U=a("QXy2"),Y=a("rd6W"),Q=a("lVuS"),_=a.n(Q);function K(){var e=m()(["Search by service name"]);return K=function(){return e},e}function W(){var e=m()(["Select Service"]);return W=function(){return e},e}function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=(n=Object(j.b)(e=>({provider:w.a.getProvider(e),reshedulEnabled:w.a.isReshedulEnabled(e)}),{}),r=Object(H.g)(),n(o=Object(D.n)(o=r((c=i=class extends g.PureComponent{constructor(...t){super(...t),h()(this,"state",{open:!1,modalRef:null,query:"",searchInputFocus:!1}),h()(this,"onItemClick",e=>{this.close(),this.props.onSelectItem(e)}),h()(this,"inputRef",Object(g.createRef)()),h()(this,"setModalRef",e=>{!e||this.state.modalRef&&this.state.modalRef===e||this.setState({modalRef:e})}),h()(this,"displayValue",()=>{var e=this.getValue(),{open:t,query:a}=this.state;return t?a:y()(e)?"":"".concat(e.name," ").concat(e.details)}),h()(this,"handleInputChange",e=>{e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=e.target?e.target.value:e;this.setState({query:t})}),h()(this,"handleInputBlur",()=>{this.props.input.onBlur(this.getValue())}),h()(this,"handleSearchInputFocus",()=>{this.setState({searchInputFocus:!0})}),h()(this,"handleSearchInputBlur",()=>{this.handleInputBlur(),this.setState({searchInputFocus:!1})}),h()(this,"open",e=>{e.stopPropagation(),this.setState({open:!0,query:""})}),h()(this,"startOpenMobile",e=>{this.openMobileTouch={start:e.changedTouches[0].clientY,delta:0}}),h()(this,"moveOpenMobile",e=>{this.openMobileTouch?this.openMobileTouch.delta=Math.abs(this.openMobileTouch.start-e.changedTouches[0].clientY):this.startOpenMobile(e)}),h()(this,"endOpenMobile",t=>{t.stopPropagation(),t.preventDefault(),t.target.blur(),e.focus(),this.openMobileTouch&&this.openMobileTouch.delta<10&&(this.open(t),this.openMobileTouch=null)}),h()(this,"close",()=>{this.setState({open:!1,query:""})})}getValue(){return this.props.input.value}render(){var e=this.props,{className:t,input:a,meta:n,disabled:r,mobile:o,location:i,bookingId:c,provider:s,label:u,placeholder:m,warning:p,alwaysWarn:b,isMatch:h,onSelectItem:f,qaType:y,reshedulEnabled:g}=e,v=d()(e,["className","input","meta","disabled","mobile","location","bookingId","provider","label","placeholder","warning","alwaysWarn","isMatch","onSelectItem","qaType","reshedulEnabled"]),{open:E,modalRef:j,searchInputFocus:N}=this.state,w=z(z({},a),{},{value:this.displayValue(),onChange:this.handleInputChange,onBlur:this.handleInputBlur}),D=z(z({},n),{},{active:n.active||E,warning:p}),B=z(z({},w),{},{onFocus:this.handleSearchInputFocus,onBlur:this.handleSearchInputBlur}),H=O.a.createElement(Y.a,{query:this.state.query,bookingId:c,location:i,onItemClick:this.onItemClick,scrollableView:j,qaType:"service-pricing-level-select-results"}),U=this.getValue(),Q=U&&U.type===k.a.PACKAGE_ITEM&&O.a.createElement(I.b,{className:S()(_.a.packageIcon),name:"package-tags",size:h?"standard":"big",color:"gray-6"}),G=Object(F.e)(),J=Object(F.b)(),Z=G||o;return O.a.createElement(R.b,l()({className:S()(_.a.inputWrapper,_.a.self,t)},v),E&&!Z&&O.a.createElement(M.a,{show:!0,onAction:this.close,transparent:!0}),O.a.createElement(q.c,{className:S()(V.a.textSelect,_.a.selectInput,{[V.a.open]:E,[_.a.open]:E}),warning:p,alwaysWarn:b,label:u,placeholder:m,qaType:"service-input",input:w,inputClassName:_.a.selectInputInput,meta:D,disabled:r,onClick:this.open,onTouchStart:G&&!E?this.startOpenMobile:void 0,onTouchMove:G&&!E?this.moveOpenMobile:void 0,onTouchEnd:G&&!E?this.endOpenMobile:void 0,autoComplete:"off",readOnly:!E||Z,inlineSuffix:!0,suffix:g?O.a.createElement(P.Icon,{name:o?"navigation-24-chevron-right":"navigation-24-chevron-down",size:"16"}):O.a.createElement(I.b,{className:V.a.chevron,name:o?"arrow-right-cropped":"arrow-down-cropped",size:"small",color:"gray-7"}),suffixClassName:_.a.dsSuffix,prefix:Q,selfRef:this.inputRef}),E&&!Z&&O.a.createElement(T.a,{contentClassName:_.a.popupContent,minHeight:240,onClose:this.close,onMouseDown:L.k,padding:{bottom:30,top:30},stretch:!0,shrink:!0,transitionDuration:J?0:void 0,noOverlay:!0,anchorEl:this.inputRef.current},H),E&&Z&&O.a.createElement(A.i,null,O.a.createElement(A.g,{onClose:this.close,noBottomPadding:!0},Object(C.c)(W())),O.a.createElement(A.c,{selfRef:this.setModalRef,onlyBottomPadding:!0},O.a.createElement(x.b,{qaType:"service-search",placeholder:Object(C.c)(K()),input:B,meta:{active:N},disabled:r,autoComplete:"off",shrink:0,sticky:!0}),j&&H)))}},h()(i,"propTypes",z(z({},D.P),{},{className:E.a.string,disabled:E.a.bool,mobile:E.a.bool,location:E.a.string.isRequired,bookingId:E.a.string,provider:E.a.shape({previewEndDate:U.b}),isMatch:E.a.bool,onSelectItem:E.a.func,reshedulEnabled:E.a.bool})),o=c))||o)||o)||o)}).call(this,a("yLpj"))},zg6z:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return A}));var n,r,o,i=a("pVnL"),c=a.n(i),s=a("VkAN"),l=a.n(s),u=a("QILm"),m=a.n(u),p=a("lSNA"),d=a.n(p),b=a("DzJC"),h=a.n(b),f=a("q1tI"),y=a.n(f),g=a("17x9"),O=a.n(g),v=a("TSYQ"),E=a.n(v),j=a("ePPS"),N=a("Jje6"),S=a("Qs7Y"),P=a("3wSE"),k=a("dhJQ"),w=a("Xszq"),C=a.n(w);function T(){var e=l()(["Show more"]);return T=function(){return e},e}function I(){var e=l()(["Show less"]);return I=function(){return e},e}var A=Object(k.g)()((o=r=class extends f.PureComponent{constructor(...e){super(...e),d()(this,"state",{more:!1,collapsible:!1}),d()(this,"onShowMoreClick",()=>{this.setState({more:!this.state.more},this.setContainerHeight)}),d()(this,"calculateIfShowMore",()=>{if(this.refContent){var e=this.refContent.getBoundingClientRect().height;e!==this.textHeight&&(this.textHeight=e,e>this.maxHeight?this.setState({collapsible:!0},this.setContainerHeight):(this.setState({collapsible:!1,more:!1}),this.refNote.style.height=""))}}),d()(this,"raf",null),d()(this,"maxHeight",32),d()(this,"textHeight",null),d()(this,"refNote",null),d()(this,"refContent",null),d()(this,"resizeEventListener",h()(this.calculateIfShowMore,100)),d()(this,"refHandlers",{note:e=>{this.refNote=e},content:e=>{this.refContent=e}})}componentDidMount(){this.raf=e.requestAnimationFrame(this.calculateIfShowMore),e.addEventListener("resize",this.resizeEventListener)}componentDidUpdate(){this.raf=e.requestAnimationFrame(this.calculateIfShowMore)}componentWillUnmount(){e.cancelAnimationFrame(this.raf),e.removeEventListener("resize",this.resizeEventListener),this.resizeEventListener.cancel()}setContainerHeight(){this.refNote.style.height="".concat(this.state.more?this.textHeight:this.maxHeight,"px")}render(){var e=this.props,{className:t,note:a,isMatch:n}=e,r=m()(e,["className","note","isMatch"]),{collapsible:o,more:i}=this.state;return y.a.createElement(N.b,c()({qaType:"customer-note",className:E()(C.a.self,t)},r),y.a.createElement(N.b,{className:C.a.scrollArea},y.a.createElement(N.b,{selfRef:this.refHandlers.note,className:E()(C.a.note,{[C.a.collapsible]:o})},y.a.createElement(S.d,{qaType:"customer-note-text",selfRef:this.refHandlers.content,breakWord:!0,type:n?"body-1":"body-2"},a))),o&&y.a.createElement(P.n,{qaType:"customer-note-link",className:C.a.showMore,onAction:this.onShowMoreClick},i?Object(j.c)(I()):Object(j.c)(T())))}},d()(r,"propTypes",{className:O.a.string,note:O.a.string.isRequired,isMatch:O.a.bool}),n=o))||n}).call(this,a("yLpj"))}}]);